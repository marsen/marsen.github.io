<!DOCTYPE html>
<html>
<head>
  
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NTDGNJZ');</script>
<!-- End Google Tag Manager -->

  
<!-- Google Analytics -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RF47NNRE5G"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RF47NNRE5G');
</script>
<!-- End Google Analytics -->

  
<!-- Google AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1885096025224905"
     crossorigin="anonymous"></script>
<!-- End Google AdSense -->



  <meta charset="utf-8">
  
  <title>Marsen&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Marsen&#39;s Blog">
<meta property="og:url" content="https://blog.marsen.me/index.html">
<meta property="og:site_name" content="Marsen&#39;s Blog">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Marsen L.">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Marsen&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
      
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300&display=swap" rel="stylesheet">
  
  
<link rel="stylesheet" href="/css/style.css">

  <meta property ="og:image" content="https://avatars1.githubusercontent.com/u/4269720?s=460&v=4" /> 
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="blog-banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Marsen&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle"></a>
          <div>
          <span style="width: 20px; height: 10px; background: linear-gradient(to bottom, #005BBB 50%, #FFD700 50%); text-align: center; color: white; font-size: 6px; font-weight: bold; line-height: 100px;">
            #StandWithUkraine
          </span>
          </div>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="æœå°‹"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.marsen.me"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2025/race-condition-in-file-storage" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/08/07/2025/race-condition-in-file-storage/" class="article-date">
  <time datetime="2025-08-07T05:15:41.000Z" itemprop="datePublished">2025-08-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/08/07/2025/race-condition-in-file-storage/"> [å­¸ç¿’ç­†è¨˜] Node.js æª”æ¡ˆæ“ä½œ mkdir çš„æ­£ç¢ºå§¿å‹¢</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å‰æƒ…æè¦"><a href="#å‰æƒ…æè¦" class="headerlink" title="å‰æƒ…æè¦"></a>å‰æƒ…æè¦</h2><p>åœ¨ code review ä¸­ RD å¯«äº†ä»¥ä¸‹çš„ç¨‹å¼</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">exists</span>(fullPath)) &#123;</span><br><span class="line">  <span class="keyword">await</span> fs.<span class="property">promises</span>.<span class="title function_">mkdir</span>(fullPath, &#123; <span class="attr">recursive</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çœ‹ä¼¼åˆç†çš„ã€Œæª¢æŸ¥ç„¶å¾ŒåŸ·è¡Œã€ï¼ˆCheck-Then-Actï¼‰æ¨¡å¼å¯èƒ½å°è‡´çš„ä½µç™¼å•é¡Œã€‚</p>
<p>å‡è¨­å…©å€‹è«‹æ±‚åŒæ™‚ä¸Šå‚³æª”æ¡ˆåˆ°åŒä¸€å€‹ä¸å­˜åœ¨çš„ç›®éŒ„ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ™‚é–“ç·šï¼š</span><br><span class="line">T1: è«‹æ±‚A åŸ·è¡Œ this.exists(fullPath) â†’ è¿”å› false (ç›®éŒ„ä¸å­˜åœ¨)</span><br><span class="line">T2: è«‹æ±‚B åŸ·è¡Œ this.exists(fullPath) â†’ è¿”å› false (ç›®éŒ„ä¸å­˜åœ¨)</span><br><span class="line">T3: è«‹æ±‚A åŸ·è¡Œ mkdir(fullPath) â†’ æˆåŠŸå»ºç«‹ç›®éŒ„</span><br><span class="line">T4: è«‹æ±‚B åŸ·è¡Œ mkdir(fullPath) â†’ å¯èƒ½æ‹‹å‡º EEXIST éŒ¯èª¤(fs.promises.mkdir å·²åœ¨åº•å±¤æ’é™¤é€™å€‹å•é¡Œ)</span><br></pre></td></tr></table></figure>

<p>é›–ç„¶ä½¿ç”¨äº† <code>recursive: true</code>ï¼Œé‚£å‰é¢çš„æª¢æŸ¥å¾ˆå¯èƒ½æ˜¯ä¸å¿…è¦çš„è¡Œç‚ºã€‚</p>
<h3 id="ç‚ºä»€éº¼æœƒé€™æ¨£ï¼Ÿ"><a href="#ç‚ºä»€éº¼æœƒé€™æ¨£ï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼æœƒé€™æ¨£ï¼Ÿ"></a>ç‚ºä»€éº¼æœƒé€™æ¨£ï¼Ÿ</h3><p>å•é¡Œçš„æ ¹æºåœ¨æ–¼<strong>æ™‚é–“çª—å£</strong>ã€‚å…©å€‹æ­¥é©Ÿä¹‹é–“å­˜åœ¨æ™‚é–“å·®ï¼Œè€Œé€™å€‹æ™‚é–“å·®å°±æ˜¯ç«¶æ…‹æ¢ä»¶çš„æº«åºŠï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ æœ‰æ™‚é–“çª—å£çš„å¯«æ³•</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">exists</span>(fullPath)) &#123;  <span class="comment">// æ­¥é©Ÿ1: æª¢æŸ¥</span></span><br><span class="line">  <span class="comment">// ğŸ‘† é€™è£¡åˆ°ä¸‹é¢ä¹‹é–“å°±æ˜¯å±éšªçš„æ™‚é–“çª—å£</span></span><br><span class="line">  <span class="keyword">await</span> fs.<span class="property">promises</span>.<span class="title function_">mkdir</span>(fullPath, &#123; <span class="attr">recursive</span>: <span class="literal">true</span> &#125;)  <span class="comment">// æ­¥é©Ÿ2: åŸ·è¡Œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è§£æ±ºæ–¹æ¡ˆ"><a href="#è§£æ±ºæ–¹æ¡ˆ" class="headerlink" title="è§£æ±ºæ–¹æ¡ˆ"></a>è§£æ±ºæ–¹æ¡ˆ</h2><h3 id="æ–¹æ³•1-ç›´æ¥ä½¿ç”¨-mkdirï¼ˆæ¨è–¦ï¼‰"><a href="#æ–¹æ³•1-ç›´æ¥ä½¿ç”¨-mkdirï¼ˆæ¨è–¦ï¼‰" class="headerlink" title="æ–¹æ³•1: ç›´æ¥ä½¿ç”¨ mkdirï¼ˆæ¨è–¦ï¼‰"></a>æ–¹æ³•1: ç›´æ¥ä½¿ç”¨ mkdirï¼ˆæ¨è–¦ï¼‰</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">uploadFile</span>(<span class="attr">file</span>: <span class="title class_">UploadedFile</span>, pathToStore?: <span class="string">`/<span class="subst">$&#123;<span class="built_in">string</span>&#125;</span>`</span>): <span class="title class_">Promise</span>&lt;<span class="built_in">string</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> fullPath = <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.uploadDir&#125;</span><span class="subst">$&#123;pathToStore ?? <span class="string">&#x27;&#x27;</span>&#125;</span>`</span></span><br><span class="line">  <span class="comment">// ç›´æ¥å»ºç«‹ç›®éŒ„ï¼Œrecursive: true æœƒè‡ªå‹•è™•ç†å·²å­˜åœ¨çš„æƒ…æ³</span></span><br><span class="line">  <span class="keyword">await</span> fs.<span class="property">promises</span>.<span class="title function_">mkdir</span>(fullPath, &#123; <span class="attr">recursive</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">  <span class="keyword">const</span> uploadPath = path.<span class="title function_">join</span>(fullPath, file.<span class="property">originalName</span>)</span><br><span class="line">  <span class="keyword">await</span> fs.<span class="property">promises</span>.<span class="title function_">writeFile</span>(uploadPath, file.<span class="property">buffer</span>)</span><br><span class="line">  <span class="keyword">return</span> uploadPath</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç‚ºä»€éº¼-recursive-true-å·²ç¶“è¶³å¤ "><a href="#ç‚ºä»€éº¼-recursive-true-å·²ç¶“è¶³å¤ " class="headerlink" title="ç‚ºä»€éº¼ recursive: true å·²ç¶“è¶³å¤ "></a>ç‚ºä»€éº¼ recursive: true å·²ç¶“è¶³å¤ </h2><p>æ ¹æ“š Node.js å®˜æ–¹æ–‡ä»¶ï¼Œ<code>fs.promises.mkdir(path, &#123; recursive: true &#125;)</code> å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ol>
<li><strong>è‡ªå‹•å»ºç«‹çˆ¶ç›®éŒ„</strong>ï¼šå¦‚æœçˆ¶ç›®éŒ„ä¸å­˜åœ¨æœƒè‡ªå‹•å»ºç«‹</li>
<li><strong>è™•ç†å·²å­˜åœ¨ç›®éŒ„</strong>ï¼šç•¶ <code>recursive</code> ç‚º <code>true</code> æ™‚ï¼Œå¦‚æœç›®éŒ„å·²å­˜åœ¨ä¸æœƒæ‹‹å‡ºéŒ¯èª¤</li>
<li><strong>ç°¡åŒ–éŒ¯èª¤è™•ç†</strong>ï¼šé¿å…äº†æ‰‹å‹•æª¢æŸ¥ç›®éŒ„æ˜¯å¦å­˜åœ¨çš„éœ€è¦</li>
</ol>
<p>å®˜æ–¹ç¯„ä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mkdir &#125; <span class="keyword">from</span> <span class="string">&#x27;node:fs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create ./tmp/a/apple, regardless of whether ./tmp and ./tmp/a exist.</span></span><br><span class="line"><span class="title function_">mkdir</span>(<span class="string">&#x27;./tmp/a/apple&#x27;</span>, &#123; <span class="attr">recursive</span>: <span class="literal">true</span> &#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">é€™å°±åƒé¤å»³é»é¤çš„å·®åˆ¥ï¼š</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`typescript</span></span><br><span class="line"><span class="string">// âŒ ç«¶æ…‹æ¢ä»¶ç‰ˆæœ¬ï¼ˆä¸å¥½çš„åšæ³•ï¼‰</span></span><br><span class="line"><span class="string">if (é¤å»³æ²’æœ‰æº–å‚™æˆ‘è¦çš„é¤) &#123;  // æª¢æŸ¥</span></span><br><span class="line"><span class="string">  è«‹å»šå¸«æº–å‚™é€™é“é¤        // åŸ·è¡Œ</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">// å•é¡Œï¼šå…©å€‹å®¢äººå¯èƒ½åŒæ™‚æª¢æŸ¥åˆ°ã€Œæ²’æœ‰ã€ï¼Œç„¶å¾Œéƒ½è¦æ±‚æº–å‚™</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// âœ… ç›´æ¥åŸ·è¡Œç‰ˆæœ¬ï¼ˆå¥½çš„åšæ³•ï¼‰</span></span><br><span class="line"><span class="string">è«‹å»šå¸«æº–å‚™é€™é“é¤ï¼Œå¦‚æœå·²ç¶“æœ‰äº†å°±ä¸ç”¨é‡è¤‡æº–å‚™</span></span><br><span class="line"><span class="string">// å»šå¸«æœƒè‡ªå·±åˆ¤æ–·æ˜¯å¦éœ€è¦æº–å‚™ï¼Œé¿å…é‡è¤‡å·¥ä½œ</span></span><br></pre></td></tr></table></figure>

<h2 id="æ•ˆèƒ½å„ªå‹¢"><a href="#æ•ˆèƒ½å„ªå‹¢" class="headerlink" title="æ•ˆèƒ½å„ªå‹¢"></a>æ•ˆèƒ½å„ªå‹¢</h2><p>ä¿®å¾©å¾Œé‚„æœ‰æ„å¤–çš„æ•ˆèƒ½æå‡ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿®å¾©å‰ï¼š2æ¬¡ç³»çµ±èª¿ç”¨</span></span><br><span class="line"><span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">exists</span>(fullPath)  <span class="comment">// ç³»çµ±èª¿ç”¨1: stat()</span></span><br><span class="line"><span class="keyword">await</span> fs.<span class="property">promises</span>.<span class="title function_">mkdir</span>()    <span class="comment">// ç³»çµ±èª¿ç”¨2: mkdir()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®å¾©å¾Œï¼š1æ¬¡ç³»çµ±èª¿ç”¨  </span></span><br><span class="line"><span class="keyword">await</span> fs.<span class="property">promises</span>.<span class="title function_">mkdir</span>(fullPath, &#123; <span class="attr">recursive</span>: <span class="literal">true</span> &#125;)  <span class="comment">// ç³»çµ±èª¿ç”¨1: mkdir()</span></span><br></pre></td></tr></table></figure>

<h2 id="ç¶“é©—æ•™è¨“"><a href="#ç¶“é©—æ•™è¨“" class="headerlink" title="ç¶“é©—æ•™è¨“"></a>ç¶“é©—æ•™è¨“</h2><ol>
<li><strong>é¿å… Check-Then-Act æ¨¡å¼</strong>ï¼šé€™æ˜¯ä½µç™¼ç¨‹å¼è¨­è¨ˆçš„ç¶“å…¸é™·é˜±ï¼Œä¸éé€™æ¬¡æ¡ˆä¾‹ï¼ŒåŸ·è¡Œçš„åº•å±¤å¯¦ä½œå·²è™•ç†å¥½ï¼Œæ‰€ä»¥ä¸æœƒæœ‰å•é¡Œ</li>
<li><strong>ä¿¡ä»»ç³»çµ±èª¿ç”¨</strong>ï¼šç¾ä»£ API é€šå¸¸å·²ç¶“è€ƒæ…®äº†ä½µç™¼å ´æ™¯</li>
<li><strong>ç°¡å–®å°±æ˜¯ç¾</strong>ï¼šç§»é™¤ä¸å¿…è¦çš„æª¢æŸ¥é‚è¼¯ï¼Œç¨‹å¼ç¢¼æ›´ç°¡æ½”ä¹Ÿæ›´å®‰å…¨</li>
</ol>
<h2 id="åƒè€ƒ"><a href="#åƒè€ƒ" class="headerlink" title="åƒè€ƒ"></a>åƒè€ƒ</h2><ul>
<li><a target="_blank" rel="noopener" href="https://nodejs.org/api/fs.html#fsmkdirpath-options-callback">Nodejs - fsPromises.mkdir(path[, options])</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2025/08/07/2025/race-condition-in-file-storage/" data-id="cme0z8sdh00ip2sqzffhfgbqv" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2025/08/07/2025/race-condition-in-file-storage/#disqus_thread" class="article-comment-link">ç•™è¨€</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" rel="tag">å­¸ç¿’ç­†è¨˜</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2025/ai_google_search_api" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/07/31/2025/ai_google_search_api/" class="article-date">
  <time datetime="2025-07-31T08:51:10.000Z" itemprop="datePublished">2025-07-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/07/31/2025/ai_google_search_api/"> [å¯¦ä½œç­†è¨˜] AI Agent å¯¦ä½œ Web Search APIï¼šå¾è¨­è¨ˆåˆ°éƒ¨ç½²çš„å®Œæ•´è¨˜éŒ„</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å‰æƒ…æè¦"><a href="#å‰æƒ…æè¦" class="headerlink" title="å‰æƒ…æè¦"></a>å‰æƒ…æè¦</h2><p>æœ€è¿‘è³¼è²· Claude Codeï¼Œåœ¨æ­¤åŒæ™‚ä¹Ÿæœ‰è©¦ç”¨ Github Copilot &#x2F; Gitlab Duo &#x2F; Gemini &#x2F; Amazon Q</p>
<p>å‰›å¥½æ‰‹ä¸Šæœ‰éœ€æ±‚ï¼Œæ˜¯ç°¡å–®çš„ API ä¸²æ¥ï¼Œä½†æ˜¯æˆ‘å€‘çš„ç³»çµ±æ¶æ§‹æœ‰ä¸€äº›åªæœ‰åœ˜éšŠçŸ¥é“çš„ Know Howã€‚</p>
<p>æˆ‘æƒ³è©¦è©¦ç”¨ AI Agent ä¾†å”åŠ©æˆ‘è™•ç†é€™äº›é–‹ç™¼ï¼Œéœ€æ±‚ç°¡å–®æ˜ç¢ºï¼Œä½†æ˜¯æŠ€è¡“ç´°ç¯€ä¸¦ä¸å°‘ï¼Œ</p>
<p>å¦‚æœæ˜¯æ–°é€² RD(å³ä½¿æœ‰é–‹ç™¼ç¶“é©—)ä¹Ÿä¸è¦‹å¾—èƒ½æŒæ¡å¾—å¾ˆå¥½ï¼Œæˆ‘ä¾†è©¦è©¦çœ‹ AI Agent èƒ½ä½œä»€éº¼ç¨‹åº¦ã€‚</p>
<p>é€™ç¯‡æ–‡ç« è¨˜éŒ„æˆ‘åœ¨åŸºæ–¼ Clean Architecture çš„ Node.js API ç³»çµ±ä¸­å¯¦ä½œ Web Search åŠŸèƒ½çš„å®Œæ•´éç¨‹ï¼ŒåŒ…å«æ¶æ§‹è¨­è¨ˆã€æ¬Šé™ç®¡ç†ã€éŒ¯èª¤è™•ç†ç­‰ç´°ç¯€ã€‚</p>
<h2 id="ç³»çµ±æ¶æ§‹èƒŒæ™¯"><a href="#ç³»çµ±æ¶æ§‹èƒŒæ™¯" class="headerlink" title="ç³»çµ±æ¶æ§‹èƒŒæ™¯"></a>ç³»çµ±æ¶æ§‹èƒŒæ™¯</h2><p>å°ˆæ¡ˆæ¡ç”¨ <strong>Clean Architecture</strong> æ­é… <strong>ä¾è³´æ³¨å…¥ (Inversify)</strong>ï¼ŒæŠ€è¡“æ£§åŒ…å«ï¼š</p>
<ul>
<li>TypeScript + Express.js</li>
<li>TypeORM (è³‡æ–™åº« ORM)</li>
<li>Inversify (ä¾è³´æ³¨å…¥å®¹å™¨)</li>
<li>JWT (èº«ä»½é©—è­‰)</li>
<li>Zod (åƒæ•¸é©—è­‰)</li>
</ul>
<p>æ¶æ§‹åˆ†ç‚ºå››å€‹ä¸»è¦å±¤ç´šï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">â”œâ”€â”€ adapters/          # å¤–éƒ¨ä»‹é¢å±¤ - æ§åˆ¶å™¨</span><br><span class="line">â”œâ”€â”€ domain/           # é ˜åŸŸå±¤ - æ ¸å¿ƒæ¥­å‹™é‚è¼¯  </span><br><span class="line">â”œâ”€â”€ infrastructure/   # åŸºç¤è¨­æ–½å±¤ - å¤–éƒ¨ä¾è³´å¯¦ä½œ  </span><br><span class="line">â””â”€â”€ useCases/        # æ‡‰ç”¨å±¤ - æ¥­å‹™ç”¨ä¾‹</span><br></pre></td></tr></table></figure>

<h2 id="éœ€æ±‚åˆ†æèˆ‡è¨­è¨ˆæ±ºç­–"><a href="#éœ€æ±‚åˆ†æèˆ‡è¨­è¨ˆæ±ºç­–" class="headerlink" title="éœ€æ±‚åˆ†æèˆ‡è¨­è¨ˆæ±ºç­–"></a>éœ€æ±‚åˆ†æèˆ‡è¨­è¨ˆæ±ºç­–</h2><h3 id="API-è¦æ ¼å®šç¾©"><a href="#API-è¦æ ¼å®šç¾©" class="headerlink" title="API è¦æ ¼å®šç¾©"></a>API è¦æ ¼å®šç¾©</h3><ul>
<li><strong>ç«¯é»</strong>: <code>GET /api/v1/websearch?keyword=é—œéµå­—</code></li>
<li><strong>è¼¸å…¥</strong>: Query åƒæ•¸ <code>&#123; keyword: string &#125;</code></li>
<li><strong>è¼¸å‡º</strong>: <code>&#123; data: [&#123; title: string, url: string, description: string &#125;] &#125;</code></li>
<li><strong>çµæœæ•¸</strong>: 10 ç­†</li>
<li><strong>æ¬Šé™</strong>: æ‰€æœ‰ API éƒ½éœ€è¦æ¬Šé™æª¢æŸ¥(æˆ‘å€‘ä¹‹å‰é–‹ç™¼å¥½çš„ RBAC æ¬Šé™ç³»çµ± )ï¼Œä¸€å€‹åŠŸèƒ½å°æ‡‰ä¸€å€‹æ¬Šé™ï¼Œç‚ºæ­¤æˆ‘éœ€è¦æ–°å¢ <code>web_search</code> æ¬Šé™</li>
</ul>
<h3 id="é—œéµè¨­è¨ˆæ±ºç­–"><a href="#é—œéµè¨­è¨ˆæ±ºç­–" class="headerlink" title="é—œéµè¨­è¨ˆæ±ºç­–"></a>é—œéµè¨­è¨ˆæ±ºç­–</h3><p><strong>1. æ§åˆ¶å™¨é¸æ“‡</strong>  </p>
<p>æ±ºå®šå°‡åŠŸèƒ½æ”¾åœ¨ <code>BasicController</code> è€Œé <code>ProjController</code>ï¼Œå› ç‚ºé€™æ˜¯é€šç”¨åŠŸèƒ½è€Œéç‰¹å®šæ¥­å‹™é‚è¼¯ã€‚</p>
<p>| é€™è£¡æˆ‘åœ¨éœ€æ±‚ä¸Šæœ‰æ˜ç¢ºå‘ŠçŸ¥ AIï¼Œå¯¦ä½œä¸Šä¹Ÿæ²’æœ‰å•é¡Œ</p>
<p><strong>2. ä¾è³´é—œä¿‚</strong><br>åš´æ ¼éµå¾ª Clean Architecture çš„ä¾è³´è¦å‰‡ï¼š</p>
<p>| ä¹Ÿæœ‰å¯«å…¥ CLAUDE.md çš„é–‹ç™¼æº–å‰‡ä¸­ï¼Œä½† AI æœƒå¸¸å¸¸å¿˜è¨˜é€™ä»¶äº‹</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Controller â†’ UseCase â†’ Service â†’ External API</span><br></pre></td></tr></table></figure>

<p><strong>3. ç’°å¢ƒè®Šæ•¸ç­–ç•¥</strong>  </p>
<p>å°‡ Google API è¨­å®šç‚ºéå¿…è¦æ¬„ä½ï¼Œæœªè¨­å®šæ™‚è­¦å‘Šä½†ä¸ä¸­æ–·å…¶ä»–æœå‹™ã€‚</p>
<p>| AI æä¾›å¾ˆå¥½çš„å»ºè­°ä¸¦å¿«é€Ÿå®Œæˆé–‹ç™¼</p>
<p><strong>4. éŒ¯èª¤è™•ç†è¨­è¨ˆ</strong>  </p>
<ul>
<li>503: API æœªè¨­å®š</li>
<li>502: API å‘¼å«å¤±æ•—  </li>
<li>400: åƒæ•¸éŒ¯èª¤ (Zod é©—è­‰)</li>
</ul>
<h2 id="å¯¦ä½œæ­¥é©Ÿè©³è§£"><a href="#å¯¦ä½œæ­¥é©Ÿè©³è§£" class="headerlink" title="å¯¦ä½œæ­¥é©Ÿè©³è§£"></a>å¯¦ä½œæ­¥é©Ÿè©³è§£</h2><h3 id="Phase-1-ç’°å¢ƒè¨­å®šæ“´å……"><a href="#Phase-1-ç’°å¢ƒè¨­å®šæ“´å……" class="headerlink" title="Phase 1: ç’°å¢ƒè¨­å®šæ“´å……"></a>Phase 1: ç’°å¢ƒè¨­å®šæ“´å……</h3><p>é¦–å…ˆæ“´å……ç’°å¢ƒè®Šæ•¸è¨­å®šï¼Œæ–°å¢ Google Search API ç›¸é—œè¨­å®šï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .env.example</span></span><br><span class="line"><span class="comment"># Google Search API Configuration</span></span><br><span class="line">GOOGLE_API_KEY=your_google_api_key</span><br><span class="line">GOOGLE_SEARCH_ENGINE_ID=your_search_engine_id  </span><br><span class="line">GOOGLE_SEARCH_API_URL=https://www.googleapis.com/customsearch/v1</span><br><span class="line">GOOGLE_SEARCH_RESULTS_COUNT=10</span><br></pre></td></tr></table></figure>

<p><strong>ä¿®æ”¹ envConfigService.ts</strong><br>æ–°å¢ <code>getOptional()</code> æ–¹æ³•æ”¯æ´å¯é¸é…ç½®ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">getOptional</span>(<span class="attr">key</span>: <span class="built_in">string</span>): <span class="built_in">string</span> | <span class="literal">undefined</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> process.<span class="property">env</span>[key]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Phase-2-æ¬Šé™ç³»çµ±æ•´åˆ"><a href="#Phase-2-æ¬Šé™ç³»çµ±æ•´åˆ" class="headerlink" title="Phase 2: æ¬Šé™ç³»çµ±æ•´åˆ"></a>Phase 2: æ¬Šé™ç³»çµ±æ•´åˆ</h3><p>å»ºç«‹è³‡æ–™åº«é·ç§»æª”æ¡ˆï¼Œæ–°å¢ <code>web_search</code> æ¬Šé™ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> permissions (name, description) <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="string">&#x27;web_search&#x27;</span>, <span class="string">&#x27;Web Search API access permission&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ†é…çµ¦ admin å’Œ member è§’è‰²</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> role_permissions (role_id, permission_id) </span><br><span class="line"><span class="keyword">SELECT</span> r.id, p.id <span class="keyword">FROM</span> roles r, permissions p </span><br><span class="line"><span class="keyword">WHERE</span> r.name <span class="keyword">IN</span> (<span class="string">&#x27;admin&#x27;</span>, <span class="string">&#x27;member&#x27;</span>) <span class="keyword">AND</span> p.name <span class="operator">=</span> <span class="string">&#x27;web_search&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="Phase-3-æ ¸å¿ƒæ¶æ§‹å¯¦ä½œ"><a href="#Phase-3-æ ¸å¿ƒæ¶æ§‹å¯¦ä½œ" class="headerlink" title="Phase 3: æ ¸å¿ƒæ¶æ§‹å¯¦ä½œ"></a>Phase 3: æ ¸å¿ƒæ¶æ§‹å¯¦ä½œ</h3><h4 id="1-å®šç¾©é ˜åŸŸä»‹é¢"><a href="#1-å®šç¾©é ˜åŸŸä»‹é¢" class="headerlink" title="1. å®šç¾©é ˜åŸŸä»‹é¢"></a>1. å®šç¾©é ˜åŸŸä»‹é¢</h4><p><strong>src&#x2F;domain&#x2F;interfaces&#x2F;webSearchService.ts</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">WebSearchService</span> &#123;</span><br><span class="line">  <span class="title function_">search</span>(<span class="attr">keyword</span>: <span class="built_in">string</span>): <span class="title class_">Promise</span>&lt;<span class="title class_">WebSearchResult</span>[]&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">WebSearchResult</span> &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">url</span>: <span class="built_in">string</span>  </span><br><span class="line">  <span class="attr">description</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-Google-Search-Service-å¯¦ä½œ"><a href="#2-Google-Search-Service-å¯¦ä½œ" class="headerlink" title="2. Google Search Service å¯¦ä½œ"></a>2. Google Search Service å¯¦ä½œ</h4><p><strong>src&#x2F;infrastructure&#x2F;services&#x2F;googleSearchService.ts</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">GoogleSearchService</span> <span class="keyword">implements</span> <span class="title class_">WebSearchService</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">    <span class="meta">@inject</span>(TYPES.HttpClient) <span class="keyword">private</span> <span class="keyword">readonly</span> httpClient: IHttpClient,</span></span><br><span class="line"><span class="params">    <span class="meta">@inject</span>(TYPES.EnvConfigService) <span class="keyword">private</span> <span class="keyword">readonly</span> envConfig: IEnvConfigService</span></span><br><span class="line"><span class="params">  </span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">search</span>(<span class="attr">keyword</span>: <span class="built_in">string</span>): <span class="title class_">Promise</span>&lt;<span class="title class_">WebSearchResult</span>[]&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> apiKey = <span class="variable language_">this</span>.<span class="property">envConfig</span>.<span class="title function_">getOptional</span>(<span class="string">&#x27;GOOGLE_API_KEY&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> searchEngineId = <span class="variable language_">this</span>.<span class="property">envConfig</span>.<span class="title function_">getOptional</span>(<span class="string">&#x27;GOOGLE_SEARCH_ENGINE_ID&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (!apiKey || !searchEngineId) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AppError</span>(<span class="string">&#x27;Google Search API æœªè¨­å®š&#x27;</span>, <span class="number">503</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> params = &#123;</span><br><span class="line">      <span class="attr">key</span>: apiKey,</span><br><span class="line">      <span class="attr">cx</span>: searchEngineId, </span><br><span class="line">      <span class="attr">q</span>: keyword,</span><br><span class="line">      <span class="attr">num</span>: <span class="variable language_">this</span>.<span class="property">envConfig</span>.<span class="title function_">get</span>(<span class="string">&#x27;GOOGLE_SEARCH_RESULTS_COUNT&#x27;</span>, <span class="string">&#x27;10&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">httpClient</span>.<span class="title function_">get</span>(</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">envConfig</span>.<span class="title function_">get</span>(<span class="string">&#x27;GOOGLE_SEARCH_API_URL&#x27;</span>), </span><br><span class="line">        &#123; params &#125;</span><br><span class="line">      )</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">transformGoogleResponse</span>(response.<span class="property">data</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AppError</span>(<span class="string">&#x27;æœå°‹æœå‹™æš«æ™‚ç„¡æ³•ä½¿ç”¨&#x27;</span>, <span class="number">502</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="title function_">transformGoogleResponse</span>(<span class="attr">data</span>: <span class="built_in">any</span>): <span class="title class_">WebSearchResult</span>[] &#123;</span><br><span class="line">    <span class="keyword">if</span> (!data.<span class="property">items</span>) <span class="keyword">return</span> []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> data.<span class="property">items</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">item: <span class="built_in">any</span></span>) =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">title</span>: item.<span class="property">title</span>,</span><br><span class="line">      <span class="attr">url</span>: item.<span class="property">link</span>,</span><br><span class="line">      <span class="attr">description</span>: item.<span class="property">snippet</span> || <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-UseCase-å±¤å¯¦ä½œ"><a href="#3-UseCase-å±¤å¯¦ä½œ" class="headerlink" title="3. UseCase å±¤å¯¦ä½œ"></a>3. UseCase å±¤å¯¦ä½œ</h4><p><strong>src&#x2F;useCases&#x2F;ExecuteWebSearch.ts</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">ExecuteWebSearch</span> <span class="keyword">implements</span> <span class="title class_">IUseCase</span>&lt;<span class="title class_">ExecuteWebSearchDTO</span>, <span class="title class_">WebSearchResponseDTO</span>&gt; &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">    <span class="meta">@inject</span>(TYPES.WebSearchService) <span class="keyword">private</span> <span class="keyword">readonly</span> webSearchService: WebSearchService</span></span><br><span class="line"><span class="params">  </span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">execute</span>(<span class="attr">input</span>: <span class="title class_">ExecuteWebSearchDTO</span>): <span class="title class_">Promise</span>&lt;<span class="title class_">WebSearchResponseDTO</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> results = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">webSearchService</span>.<span class="title function_">search</span>(input.<span class="property">keyword</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">data</span>: results &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// DTO å®šç¾©</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">ExecuteWebSearchDTO</span> &#123;</span><br><span class="line">  <span class="attr">keyword</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">WebSearchResponseDTO</span> &#123;</span><br><span class="line">  <span class="attr">data</span>: <span class="title class_">WebSearchResult</span>[]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-Controller-å±¤å¯¦ä½œ"><a href="#4-Controller-å±¤å¯¦ä½œ" class="headerlink" title="4. Controller å±¤å¯¦ä½œ"></a>4. Controller å±¤å¯¦ä½œ</h4><p><strong>src&#x2F;adapters&#x2F;controllers&#x2F;basicController.ts</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; z &#125; <span class="keyword">from</span> <span class="string">&#x27;zod&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Zod é©—è­‰ schema</span></span><br><span class="line"><span class="keyword">const</span> webSearchQuerySchema = z.<span class="title function_">object</span>(&#123;</span><br><span class="line">  <span class="attr">keyword</span>: z.<span class="title function_">string</span>().<span class="title function_">min</span>(<span class="number">1</span>, <span class="string">&#x27;keyword åƒæ•¸ç‚ºå¿…å¡«ä¸”ä¸èƒ½ç‚ºç©ºå­—ä¸²&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">webSearch</span>(<span class="attr">req</span>: <span class="title class_">Request</span>, <span class="attr">res</span>: <span class="title class_">Response</span>): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨ Zod é€²è¡Œåƒæ•¸é©—è­‰</span></span><br><span class="line">  <span class="keyword">const</span> &#123; keyword &#125; = webSearchQuerySchema.<span class="title function_">parse</span>(req.<span class="property">query</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> <span class="attr">input</span>: <span class="title class_">ExecuteWebSearchDTO</span> = &#123; keyword &#125;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">executeWebSearch</span>.<span class="title function_">execute</span>(input)</span><br><span class="line">  </span><br><span class="line">  res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(result)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-è·¯ç”±è¨­å®š"><a href="#5-è·¯ç”±è¨­å®š" class="headerlink" title="5. è·¯ç”±è¨­å®š"></a>5. è·¯ç”±è¨­å®š</h4><p><strong>src&#x2F;infrastructure&#x2F;routes&#x2F;basicRouter.ts</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¨»å†Šè·¯ç”±ï¼Œå…ˆåŸ·è¡Œæ¬Šé™æª¢æŸ¥ï¼Œå†åŸ·è¡Œæ¥­å‹™é‚è¼¯</span></span><br><span class="line">r.<span class="title function_">get</span>(<span class="string">`<span class="subst">$&#123;basePath&#125;</span>/websearch`</span>, </span><br><span class="line">  auth.<span class="title function_">user</span>(<span class="string">&#x27;web_search&#x27;</span>),  <span class="comment">// æ¬Šé™ä¸­ä»‹è»Ÿé«”</span></span><br><span class="line">  <span class="title function_">asyncWrapper</span>(basicController.<span class="property">webSearch</span>.<span class="title function_">bind</span>(basicController))</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="Phase-4-ä¾è³´æ³¨å…¥è¨­å®š"><a href="#Phase-4-ä¾è³´æ³¨å…¥è¨­å®š" class="headerlink" title="Phase 4: ä¾è³´æ³¨å…¥è¨­å®š"></a>Phase 4: ä¾è³´æ³¨å…¥è¨­å®š</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// inversify.config.ts</span></span><br><span class="line"><span class="comment">// è¨»å†Š UseCase</span></span><br><span class="line">container.<span class="property">bind</span>&lt;<span class="title class_">IUseCase</span>&lt;<span class="title class_">ExecuteWebSearchDTO</span>, <span class="title class_">WebSearchResponseDTO</span>&gt;&gt;(</span><br><span class="line">  <span class="variable constant_">TYPES</span>.<span class="property">ExecuteWebSearch</span></span><br><span class="line">).<span class="title function_">to</span>(<span class="title class_">ExecuteWebSearch</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¨»å†Š Service</span></span><br><span class="line">container.<span class="property">bind</span>&lt;<span class="title class_">WebSearchService</span>&gt;(</span><br><span class="line">  <span class="variable constant_">TYPES</span>.<span class="property">WebSearchService</span></span><br><span class="line">).<span class="title function_">to</span>(<span class="title class_">GoogleSearchService</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–° TYPES å¸¸æ•¸</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">TYPES</span> = &#123;</span><br><span class="line">  <span class="comment">// ... existing types</span></span><br><span class="line">  <span class="title class_">ExecuteWebSearch</span>: <span class="title class_">Symbol</span>.<span class="title function_">for</span>(<span class="string">&#x27;ExecuteWebSearch&#x27;</span>),</span><br><span class="line">  <span class="title class_">WebSearchService</span>: <span class="title class_">Symbol</span>.<span class="title function_">for</span>(<span class="string">&#x27;WebSearchService&#x27;</span>),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ¸¬è©¦èˆ‡é©—è­‰"><a href="#æ¸¬è©¦èˆ‡é©—è­‰" class="headerlink" title="æ¸¬è©¦èˆ‡é©—è­‰"></a>æ¸¬è©¦èˆ‡é©—è­‰</h2><h3 id="æº–å‚™æ¸¬è©¦ç’°å¢ƒ-â€“-å–å¾—æ¸¬è©¦-Token"><a href="#æº–å‚™æ¸¬è©¦ç’°å¢ƒ-â€“-å–å¾—æ¸¬è©¦-Token" class="headerlink" title="æº–å‚™æ¸¬è©¦ç’°å¢ƒ â€“ å–å¾—æ¸¬è©¦ Token"></a>æº–å‚™æ¸¬è©¦ç’°å¢ƒ â€“ å–å¾—æ¸¬è©¦ Token</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -X <span class="string">&#x27;POST&#x27;</span> <span class="string">&#x27;http://localhost:4578/api/v1/auth/login&#x27;</span> \</span><br><span class="line">  -H <span class="string">&#x27;accept: application/json&#x27;</span> \</span><br><span class="line">  -H <span class="string">&#x27;Content-Type: application/json&#x27;</span> \</span><br><span class="line">  -d <span class="string">&#x27;&#123;&quot;account&quot;: &quot;test_act&quot;, &quot;password&quot;: &quot;test_pwd&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ¸¬è©¦æ¡ˆä¾‹è¨­è¨ˆ"><a href="#æ¸¬è©¦æ¡ˆä¾‹è¨­è¨ˆ" class="headerlink" title="æ¸¬è©¦æ¡ˆä¾‹è¨­è¨ˆ"></a>æ¸¬è©¦æ¡ˆä¾‹è¨­è¨ˆ</h3><p>| AIã€€æœƒè‡ªå‹•å¹«æˆ‘è·‘ End To End æ¸¬è©¦ï¼ˆæœ¬ä¾†æ˜¯ RD ç”¨curl æˆ– postman é€²è¡Œçš„å·¥ä½œï¼‰<br>| æ¡ˆä¾‹çš„è¨­è¨ˆä¸Šä¹Ÿå¾ˆç´°å¿ƒï¼Œå¾ˆå¤š RD æ˜¯åªæ¸¬è©¦ Happy Case çš„</p>
<h4 id="æ­£å¸¸åŠŸèƒ½æ¸¬è©¦-happy-case"><a href="#æ­£å¸¸åŠŸèƒ½æ¸¬è©¦-happy-case" class="headerlink" title="æ­£å¸¸åŠŸèƒ½æ¸¬è©¦(happy case)"></a>æ­£å¸¸åŠŸèƒ½æ¸¬è©¦(happy case)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET <span class="string">&quot;http://localhost:4578/api/v1/websearch?keyword=nodejs&quot;</span> \</span><br><span class="line">  -H <span class="string">&quot;Authorization: Bearer &lt;token&gt;&quot;</span></span><br><span class="line"><span class="comment"># é æœŸ: Google æœå°‹çµæœ JSON</span></span><br></pre></td></tr></table></figure>

<h4 id="æ¬Šé™æª¢æŸ¥å¤±æ•—æ¸¬è©¦"><a href="#æ¬Šé™æª¢æŸ¥å¤±æ•—æ¸¬è©¦" class="headerlink" title="æ¬Šé™æª¢æŸ¥å¤±æ•—æ¸¬è©¦"></a>æ¬Šé™æª¢æŸ¥å¤±æ•—æ¸¬è©¦</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET <span class="string">&quot;http://localhost:4578/api/v1/websearch?keyword=test&quot;</span></span><br><span class="line"><span class="comment"># é æœŸ: &#123;&quot;error&quot;:&quot;Authentication invalid&quot;&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="åƒæ•¸é©—è­‰æ¸¬è©¦"><a href="#åƒæ•¸é©—è­‰æ¸¬è©¦" class="headerlink" title="åƒæ•¸é©—è­‰æ¸¬è©¦"></a>åƒæ•¸é©—è­‰æ¸¬è©¦</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¼ºå°‘åƒæ•¸</span></span><br><span class="line">curl -X GET <span class="string">&quot;http://localhost:4578/api/v1/websearch&quot;</span> \</span><br><span class="line">  -H <span class="string">&quot;Authorization: Bearer &lt;token&gt;&quot;</span></span><br><span class="line"><span class="comment"># é æœŸ: Zod é©—è­‰éŒ¯èª¤ï¼Œ400 status</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç©ºåƒæ•¸</span></span><br><span class="line">curl -X GET <span class="string">&quot;http://localhost:4578/api/v1/websearch?keyword=&quot;</span> \</span><br><span class="line">  -H <span class="string">&quot;Authorization: Bearer &lt;token&gt;&quot;</span></span><br><span class="line"><span class="comment"># é æœŸ: &#123;&quot;error&quot;:[&#123;...,&quot;message&quot;:&quot;keyword åƒæ•¸ç‚ºå¿…å¡«ä¸”ä¸èƒ½ç‚ºç©ºå­—ä¸²&quot;&#125;]&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="éŒ¯èª¤è™•ç†æ©Ÿåˆ¶"><a href="#éŒ¯èª¤è™•ç†æ©Ÿåˆ¶" class="headerlink" title="éŒ¯èª¤è™•ç†æ©Ÿåˆ¶"></a>éŒ¯èª¤è™•ç†æ©Ÿåˆ¶</h2><h3 id="Zod-é©—è­‰æ•´åˆ"><a href="#Zod-é©—è­‰æ•´åˆ" class="headerlink" title="Zod é©—è­‰æ•´åˆ"></a>Zod é©—è­‰æ•´åˆ</h3><blockquote>
<p>å°ˆæ¡ˆå·²å…§å»º Zod åœ¨ req&#x2F;res æª¢æŸ¥åƒæ•¸èˆ‡éŒ¯èª¤è™•ç†æœ‰å¾ˆå¥½çš„è¡¨ç¾ï¼Œæ˜¯åœ˜éšŠçš„é–‹ç™¼å·¥å…·ä¹‹ä¸€<br>ä½†è¦æé†’ AI ä¸ç„¶ä»–æœƒæ‰‹åˆ»ä¸€å€‹éŒ¯èª¤è™•ç†çµ¦ä½ ï¼ˆåˆ»å¾—ä¹Ÿä¸å·®å°±æ˜¯äº†ï¼‰</p>
</blockquote>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// errorHandler.ts å·²æ”¯æ´</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="title class_">ZodError</span>,</span><br><span class="line">  <span class="attr">status</span>: <span class="number">400</span>,</span><br><span class="line">  <span class="attr">log</span>: <span class="string">&#x27;Zod validation error&#x27;</span>,</span><br><span class="line">  <span class="attr">getMsg</span>: <span class="function">(<span class="params">err: ZodError</span>) =&gt;</span> err.<span class="property">errors</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âŒ-éŒ¯èª¤æ–¹å¼ï¼šAI-æ‰‹åˆ»éŒ¯èª¤è™•ç†"><a href="#âŒ-éŒ¯èª¤æ–¹å¼ï¼šAI-æ‰‹åˆ»éŒ¯èª¤è™•ç†" class="headerlink" title="âŒ éŒ¯èª¤æ–¹å¼ï¼šAI æ‰‹åˆ»éŒ¯èª¤è™•ç†"></a>âŒ éŒ¯èª¤æ–¹å¼ï¼šAI æ‰‹åˆ»éŒ¯èª¤è™•ç†</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!keyword || <span class="keyword">typeof</span> keyword !== <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">  res.<span class="title function_">status</span>(<span class="number">400</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;keyword åƒæ•¸ç‚ºå¿…å¡«ä¸”å¿…é ˆæ˜¯å­—ä¸²&#x27;</span> &#125;)</span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="âœ…-æ­£ç¢ºæ–¹å¼ï¼šä½¿ç”¨-Zod"><a href="#âœ…-æ­£ç¢ºæ–¹å¼ï¼šä½¿ç”¨-Zod" class="headerlink" title="âœ… æ­£ç¢ºæ–¹å¼ï¼šä½¿ç”¨ Zod"></a>âœ… æ­£ç¢ºæ–¹å¼ï¼šä½¿ç”¨ Zod</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; keyword &#125; = webSearchQuerySchema.<span class="title function_">parse</span>(req.<span class="property">query</span>)</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ Zod çš„å¥½è™•ï¼š</p>
<ul>
<li>çµ±ä¸€çš„éŒ¯èª¤æ ¼å¼</li>
<li>è‡ªå‹•æ•´åˆåˆ°å…¨åŸŸéŒ¯èª¤è™•ç†å™¨</li>
<li>å‹åˆ¥å®‰å…¨ä¿è­‰</li>
</ul>
<h3 id="ä¸­ä»‹è»Ÿé«”åŸ·è¡Œé †åº"><a href="#ä¸­ä»‹è»Ÿé«”åŸ·è¡Œé †åº" class="headerlink" title="ä¸­ä»‹è»Ÿé«”åŸ·è¡Œé †åº"></a>ä¸­ä»‹è»Ÿé«”åŸ·è¡Œé †åº</h3><blockquote>
<p>é‡æ§‹ç®—æ˜¯é€™æ¬¡éœ€æ±‚çš„å¤§ç›®æ¨™ï¼Œåªè¦æç¤ºè©å¯«å¾—å¤ å¥½ AI å¯ä»¥æä¾›å¾ˆå®Œæ•´çš„è·¯ç”±åˆ—è¡¨<br>è€Œä¸”é‡æ§‹çš„ç‹€æ…‹ä¹Ÿå¾ˆæ­£ç¢ºï¼Œä¸éæˆ‘çš„å°ˆæ¡ˆä¸å¤§åªæœ‰ 30 éš»å·¦å³çš„ API åƒåŠ åƒ¹å€¼å¯èƒ½ä¸é«˜</p>
</blockquote>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è«‹æ±‚ â†’ auth.user(&#x27;web_search&#x27;) â†’ asyncWrapper â†’ zod.parse() â†’ æ¥­å‹™é‚è¼¯</span><br></pre></td></tr></table></figure>

<p>é€™å€‹é †åºç¢ºä¿ï¼š</p>
<ol>
<li>å…ˆæª¢æŸ¥èº«ä»½æ¬Šé™</li>
<li>å†é€²è¡Œåƒæ•¸é©—è­‰  </li>
<li>æœ€å¾ŒåŸ·è¡Œæ¥­å‹™é‚è¼¯</li>
</ol>
<h2 id="Google-Custom-Search-API-æ•´åˆè¦é»"><a href="#Google-Custom-Search-API-æ•´åˆè¦é»" class="headerlink" title="Google Custom Search API æ•´åˆè¦é»"></a>Google Custom Search API æ•´åˆè¦é»</h2><blockquote>
<p>å•†æ¥­éœ€æ±‚çš„ä¸»é‚è¼¯ï¼Œæˆ‘ä¸€è¡Œç¨‹å¼æ²’å¯«åªèˆ‡ AI äº’å‹•å°±å®Œæˆäº†é€™å€‹åŠŸèƒ½ï¼ŒåŒ…å«é»å°é»çš„æ¸¬è©¦<br>ä¸éåœ¨é›¶ä¿¡ä»»åŸå‰‡ä¸‹ï¼Œé‚„æ˜¯è«‹å…¶ä»– RD å†ä½œä¸€æ¬¡ Code Review èˆ‡å®Œæ•´æ¸¬è©¦</p>
</blockquote>
<h3 id="å¿…è¦åƒæ•¸èªªæ˜"><a href="#å¿…è¦åƒæ•¸èªªæ˜" class="headerlink" title="å¿…è¦åƒæ•¸èªªæ˜"></a>å¿…è¦åƒæ•¸èªªæ˜</h3><ul>
<li><code>key</code>: Google API Key</li>
<li><code>cx</code>: Custom Search Engine ID  </li>
<li><code>q</code>: æœå°‹é—œéµå­—</li>
<li><code>num</code>: çµæœæ•¸é‡</li>
</ul>
<h3 id="API-å›æ‡‰è½‰æ›"><a href="#API-å›æ‡‰è½‰æ›" class="headerlink" title="API å›æ‡‰è½‰æ›"></a>API å›æ‡‰è½‰æ›</h3><p>Google API å›æ‡‰çµæ§‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;items&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æœå°‹çµæœæ¨™é¡Œ&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;link&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://example.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;snippet&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æœå°‹çµæœæ‘˜è¦&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>è½‰æ›ç‚ºç³»çµ±æ ¼å¼ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æœå°‹çµæœæ¨™é¡Œ&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://example.com&quot;</span><span class="punctuation">,</span> </span><br><span class="line">      <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æœå°‹çµæœæ‘˜è¦&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="å°çµ"><a href="#å°çµ" class="headerlink" title="å°çµ"></a>å°çµ</h2><p>é€™æ¬¡å¯¦ä½œè®“æˆ‘æ·±åº¦é«”é©—äº† AI èˆ‡å„ªè‰¯æ¶æ§‹åœ¨å¯¦éš›å°ˆæ¡ˆä¸­çš„é‹ç”¨ã€‚å¹¾å€‹é—œéµæ”¶ç©«ï¼š</p>
<h3 id="æ¶æ§‹å„ªå‹¢"><a href="#æ¶æ§‹å„ªå‹¢" class="headerlink" title="æ¶æ§‹å„ªå‹¢"></a>æ¶æ§‹å„ªå‹¢</h3><ul>
<li>æ¸…æ™°çš„åˆ†å±¤è®“è·è²¬åˆ†æ˜ï¼Œæ¸¬è©¦å®¹æ˜“</li>
<li>ä¾è³´æ³¨å…¥è®“å…ƒä»¶å¯æŠ½æ›ï¼Œç¬¦åˆé–‹æ”¾å°é–‰åŸå‰‡</li>
<li>çµ±ä¸€çš„éŒ¯èª¤è™•ç†æ©Ÿåˆ¶ï¼Œç¶­è­·æˆæœ¬ä½</li>
</ul>
<p>ä¸Šé¢æ˜¯åŸæœ¬çš„å„ªå‹¢ï¼ŒåŠ ä¸Š AI åˆ¤è®€å¾Œï¼Œå¯ä»¥é«˜æ•ˆç”¢ç”Ÿ Clean Code  </p>
<p>ä¸å¤ªç¢ºå®šä¸è‰¯ä»£ç¢¼æœƒæœ‰ä»€éº¼çµæœï¼Œå¾ˆå¹¸é‹æ˜¯æˆ‘ä¸åœ¨é‚£ç¨®ç’°å¢ƒä¹‹ä¸­  </p>
<p>ç¾åœ¨ä¸‰å€‹åœˆåœˆæ˜¯æœ‰äº¤é›†çš„ï¼Œå¥½åˆå¿«åˆä¾¿å®œ(ç”¢å‡ºï¼å–®ä½æ™‚é–“)ï¼Œ  </p>
<p>ä¾ç…§ AI å¸¶ä¾†çš„ç”Ÿç”¢åŠ›èˆ‡ç¾æœ‰çš„ RD ç›¸æ¯”ï¼Œå…¶å¯¦æ˜¯å¾ˆä¾¿å®œçš„é¸æ“‡ã€‚</p>
<p>è‰¯å¥½çš„è¨­è¨ˆçµåˆå·¥å…·(AI)æ˜¯ææ˜‡æ•ˆç‡çš„æ‰‹æ®µ,  </p>
<p>3 å€‹äººå¯ä»¥ç•¶ ï¼— å€‹äººç”¨ã€‚è‡³æ–¼ç‚ºä»€éº¼æ˜¯ï¼“å€‹äººï¼Œæœ‰æ©Ÿæœƒå†èªªäº†ã€‚</p>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2025/07/31/2025/ai_google_search_api/" data-id="cme0z8sda00hy2sqz4qz1gflw" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2025/07/31/2025/ai_google_search_api/#disqus_thread" class="article-comment-link">ç•™è¨€</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">å¯¦ä½œç­†è¨˜</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2025/ai-eai-browser-install-flatpak-solution" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/07/29/2025/ai-eai-browser-install-flatpak-solution/" class="article-date">
  <time datetime="2025-07-29T05:51:36.000Z" itemprop="datePublished">2025-07-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/07/29/2025/ai-eai-browser-install-flatpak-solution/"> [å¯¦ä½œç­†è¨˜] EAI æ©Ÿå™¨ç€è¦½å™¨å®‰è£å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å‰æƒ…æè¦"><a href="#å‰æƒ…æè¦" class="headerlink" title="å‰æƒ…æè¦"></a>å‰æƒ…æè¦</h2><p>æœ€è¿‘æ‹¿åˆ°ä¸€å€‹åœ°ç«¯è³‡æº <a target="_blank" rel="noopener" href="https://www.lannerinc.com/products/edge-ai-appliance/deep-learning-inference-appliances/eai-i233">EAI-I233</a> é–‹ç™¼åœ°ç«¯ AI æ‡‰ç”¨ã€‚<br>éç¨‹ä¸­é‡åˆ°äº†å®‰è£ç€è¦½å™¨(firefox)ç„¡æ³•æ­£å¸¸é‹ä½œçš„å•é¡Œã€‚<br>ç¶“éæŸ¥æ‰¾è³‡æ–™ï¼Œç™¼ç¾é€™æ˜¯ Jetson Orin Nano ä¸Šçš„å·²çŸ¥å•é¡Œï¼Œä¸æ˜¯å€‹æ¡ˆã€‚<br>è¨˜éŒ„ä¸€ä¸‹å¦‚ä½•é€é Flatpak å®‰è£ Chromium åœ¨ EAI æ©Ÿå™¨ä¸Šï¼Œä»¥è§£æ±ºç€è¦½å™¨å•é¡Œã€‚</p>
<h2 id="å•é¡Œæè¿°"><a href="#å•é¡Œæè¿°" class="headerlink" title="å•é¡Œæè¿°"></a>å•é¡Œæè¿°</h2><p>åœ¨ Jetson Orin Nano ç­‰ EAI è¨­å‚™ä¸Šï¼Œé€é snap å®‰è£çš„ Chromium ç€è¦½å™¨æœƒå‡ºç¾ç„¡æ³•æ­£å¸¸å•Ÿå‹•æˆ–é‹è¡Œä¸ç©©å®šçš„ç‹€æ³ã€‚<br>é€™å€‹å•é¡Œä¸¦éå€‹æ¡ˆï¼Œåœ¨ NVIDIA é–‹ç™¼è€…è«–å£‡ä¸Šæœ‰è¨±å¤šç”¨æˆ¶å›å ±é¡ä¼¼å•é¡Œã€‚  </p>
<h2 id="è§£æ±ºæ–¹æ¡ˆ"><a href="#è§£æ±ºæ–¹æ¡ˆ" class="headerlink" title="è§£æ±ºæ–¹æ¡ˆ"></a>è§£æ±ºæ–¹æ¡ˆ</h2><h3 id="ç§»é™¤ç¾æœ‰çš„-snap-ç‰ˆæœ¬-Chromium"><a href="#ç§»é™¤ç¾æœ‰çš„-snap-ç‰ˆæœ¬-Chromium" class="headerlink" title="ç§»é™¤ç¾æœ‰çš„ snap ç‰ˆæœ¬ Chromium"></a>ç§»é™¤ç¾æœ‰çš„ snap ç‰ˆæœ¬ Chromium</h3><p>é¦–å…ˆç§»é™¤é€é snap å®‰è£çš„ Chromiumï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo snap remove chromium</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£èˆ‡è¨­å®š-Flatpak"><a href="#å®‰è£èˆ‡è¨­å®š-Flatpak" class="headerlink" title="å®‰è£èˆ‡è¨­å®š Flatpak"></a>å®‰è£èˆ‡è¨­å®š Flatpak</h3><p>æ›´æ–°å¥—ä»¶ç®¡ç†å™¨ä¸¦å®‰è£ Flatpakï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install flatpak</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ  Flathub å„²å­˜åº«ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flatpak remote-add --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo</span><br></pre></td></tr></table></figure>

<h3 id="é‡é–‹æ©Ÿä¸¦å®‰è£-Chromium"><a href="#é‡é–‹æ©Ÿä¸¦å®‰è£-Chromium" class="headerlink" title="é‡é–‹æ©Ÿä¸¦å®‰è£ Chromium"></a>é‡é–‹æ©Ÿä¸¦å®‰è£ Chromium</h3><p>é‡æ–°å•Ÿå‹•æ©Ÿå™¨å¾Œï¼Œé€é Flatpak å®‰è£ Chromiumï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é‡é–‹æ©Ÿå¾ŒåŸ·è¡Œ</span></span><br><span class="line">flatpak install flathub org.chromium.Chromium</span><br></pre></td></tr></table></figure>

<h2 id="ç‚ºä»€éº¼è¦ç”¨-Flatpakï¼Ÿ"><a href="#ç‚ºä»€éº¼è¦ç”¨-Flatpakï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼è¦ç”¨ Flatpakï¼Ÿ"></a>ç‚ºä»€éº¼è¦ç”¨ Flatpakï¼Ÿ</h2><p>ç›¸æ¯”æ–¼ snapï¼ŒFlatpak åœ¨ ARM æ¶æ§‹çš„è¨­å‚™ä¸Šæœ‰æ›´å¥½çš„ç›¸å®¹æ€§ã€‚<br>ç‰¹åˆ¥æ˜¯åœ¨ Jetson ç³»åˆ—é–‹ç™¼æ¿ä¸Šï¼ŒFlatpak èƒ½å¤ æä¾›æ›´ç©©å®šçš„å¥—ä»¶åŸ·è¡Œç’°å¢ƒï¼Œé¿å…å› ç‚º snap æ²™ç›’æ©Ÿåˆ¶èˆ‡ç¡¬é«”é©…å‹•äº’å‹•æ™‚ç”¢ç”Ÿçš„å•é¡Œã€‚  </p>
<h2 id="ä¸€äº›è¦æ³¨æ„çš„å°å•é¡Œ"><a href="#ä¸€äº›è¦æ³¨æ„çš„å°å•é¡Œ" class="headerlink" title="ä¸€äº›è¦æ³¨æ„çš„å°å•é¡Œ"></a>ä¸€äº›è¦æ³¨æ„çš„å°å•é¡Œ</h2><p><strong>é‡é–‹æ©Ÿæ˜¯å¿…è¦çš„</strong><br>åœ¨å®‰è£å®Œ Flatpak å¾Œï¼Œå‹™å¿…é‡é–‹æ©Ÿå†å®‰è£ Chromiumï¼Œç¢ºä¿æ‰€æœ‰ç›¸ä¾æœå‹™æ­£ç¢ºå•Ÿå‹•ã€‚</p>
<p><strong>æ¬Šé™å•é¡Œ</strong><br>å¦‚æœé‡åˆ°æ¬Šé™å•é¡Œï¼Œç¢ºèªç•¶å‰ä½¿ç”¨è€…å·²åŠ å…¥ç›¸é—œç¾¤çµ„ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -a -G sudo <span class="variable">$USER</span></span><br></pre></td></tr></table></figure>

<h2 id="åƒè€ƒè³‡æ–™"><a href="#åƒè€ƒè³‡æ–™" class="headerlink" title="åƒè€ƒè³‡æ–™"></a>åƒè€ƒè³‡æ–™</h2><ul>
<li><a target="_blank" rel="noopener" href="https://forums.developer.nvidia.com/t/jetson-orin-nano-browser-issue/338580/44">Jetson Orin Nano Browser Issue - NVIDIA Developer Forum</a></li>
<li><a target="_blank" rel="noopener" href="https://jetsonhacks.com/2025/07/12/why-chromium-suddenly-broke-on-jetson-orin-and-how-to-bring-it-back/">JetsonHacks: Why Chromium Suddenly Broke on Jetson Orin</a></li>
</ul>
<h2 id="å°çµ"><a href="#å°çµ" class="headerlink" title="å°çµ"></a>å°çµ</h2><p>é€é Flatpak å®‰è£ Chromium æ˜¯ç›®å‰åœ¨ EAI è¨­å‚™ä¸Šæœ€ç©©å®šçš„è§£æ±ºæ–¹æ¡ˆã€‚<br>é›–ç„¶éœ€è¦é¡å¤–çš„è¨­å®šæ­¥é©Ÿï¼Œä½†èƒ½å¤ æœ‰æ•ˆè§£æ±º snap ç‰ˆæœ¬åœ¨ ARM æ¶æ§‹ä¸Šçš„ç›¸å®¹æ€§å•é¡Œã€‚<br>é€™å€‹è§£æ±ºæ–¹æ¡ˆä¸åƒ…é©ç”¨æ–¼ Jetson Orin Nanoï¼Œä¹Ÿå¯ä»¥æ‡‰ç”¨åˆ°å…¶ä»–é¡ä¼¼çš„ ARM æ¶æ§‹é–‹ç™¼æ¿ä¸Šã€‚<br>æœ‰æ©Ÿæœƒæ‹¿åˆ°åˆ¥çš„æ©Ÿå™¨å†ä¾†è©¦è©¦ã€‚</p>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2025/07/29/2025/ai-eai-browser-install-flatpak-solution/" data-id="cme0z8sd700hj2sqzhy1s0szr" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2025/07/29/2025/ai-eai-browser-install-flatpak-solution/#disqus_thread" class="article-comment-link">ç•™è¨€</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2025/express-res-locals-auth-best-practice" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/07/25/2025/express-res-locals-auth-best-practice/" class="article-date">
  <time datetime="2025-07-25T03:17:04.000Z" itemprop="datePublished">2025-07-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/07/25/2025/express-res-locals-auth-best-practice/"> [å­¸ç¿’ç­†è¨˜] Express.js middleware auth çš„æ¥­ç•Œæ¨™æº–(res.locals)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ Express.js èªè­‰ç³»çµ±ä¸­ï¼Œå¸¸è¦‹çš„åšæ³•æ˜¯åœ¨æ¯å€‹éœ€è¦é©—è­‰çš„è·¯ç”±ä¸­ç›´æ¥è§£æ JWT tokenã€‚<br>ä½†æœ‰ä¸€å€‹æ›´å¥½çš„å¯¦ä½œæ–¹å¼ï¼šä½¿ç”¨ä¸­ä»‹è»Ÿé«”å°‡èªè­‰çµæœå­˜æ”¾åœ¨ <code>res.locals</code> ä¸­ã€‚<br>é€™ä¸åƒ…æ˜¯å®˜æ–¹å»ºè­°çš„åšæ³•ï¼Œä¹Ÿé¿å…äº†é‡è¤‡è§£æ token çš„æ•ˆèƒ½å•é¡Œã€‚</p>
<h2 id="TL-DR"><a href="#TL-DR" class="headerlink" title="TL;DR"></a>TL;DR</h2><p>ä½¿ç”¨ <code>res.locals</code> è™•ç†èªè­‰æ˜¯ Express.js çš„æ¨™æº–å¯¦ä½œï¼š</p>
<ul>
<li>é¿å…åœ¨æ¯å€‹è·¯ç”±é‡è¤‡è§£æ JWT token</li>
<li>Auth.jsã€Passport.js ç­‰ä¸»æµå‡½å¼åº«éƒ½æ¡ç”¨é€™ç¨®æ¨¡å¼</li>
<li>Express.js å®˜æ–¹æ–‡æª”æ˜ç¢ºæ”¯æŒé€™ç¨®ç”¨æ³•</li>
</ul>
<h2 id="ç›´æ¥è§£æ-JWT-çš„ç¼ºé»"><a href="#ç›´æ¥è§£æ-JWT-çš„ç¼ºé»" class="headerlink" title="ç›´æ¥è§£æ JWT çš„ç¼ºé»"></a>ç›´æ¥è§£æ JWT çš„ç¼ºé»</h2><h3 id="é‡è¤‡å·¥ä½œçš„æ•ˆèƒ½å•é¡Œ"><a href="#é‡è¤‡å·¥ä½œçš„æ•ˆèƒ½å•é¡Œ" class="headerlink" title="é‡è¤‡å·¥ä½œçš„æ•ˆèƒ½å•é¡Œ"></a>é‡è¤‡å·¥ä½œçš„æ•ˆèƒ½å•é¡Œ</h3><p>å¦‚æœæ¯å€‹è·¯ç”±éƒ½ç›´æ¥è§£æ JWTï¼Œæœƒé€ æˆä¸å¿…è¦çš„é‡è¤‡é‹ç®—ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âŒ åœ¨æ¯å€‹è·¯ç”±é‡è¤‡è§£æ</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/profile&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> token = req.<span class="property">headers</span>.<span class="property">authorization</span>?.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">  <span class="keyword">const</span> user = jwt.<span class="title function_">verify</span>(token, <span class="variable constant_">JWT_SECRET</span>) <span class="comment">// é‡è¤‡è§£æ</span></span><br><span class="line">  res.<span class="title function_">json</span>(&#123; user &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/orders&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> token = req.<span class="property">headers</span>.<span class="property">authorization</span>?.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">  <span class="keyword">const</span> user = jwt.<span class="title function_">verify</span>(token, <span class="variable constant_">JWT_SECRET</span>) <span class="comment">// åˆè§£æä¸€æ¬¡</span></span><br><span class="line">  res.<span class="title function_">json</span>(&#123; <span class="attr">orders</span>: <span class="title function_">getUserOrders</span>(user.<span class="property">id</span>) &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="ç¨‹å¼ç¢¼é‡è¤‡èˆ‡ç¶­è­·å›°é›£"><a href="#ç¨‹å¼ç¢¼é‡è¤‡èˆ‡ç¶­è­·å›°é›£" class="headerlink" title="ç¨‹å¼ç¢¼é‡è¤‡èˆ‡ç¶­è­·å›°é›£"></a>ç¨‹å¼ç¢¼é‡è¤‡èˆ‡ç¶­è­·å›°é›£</h3><p>æ¯å€‹éœ€è¦èªè­‰çš„è·¯ç”±éƒ½è¦å¯«é¡ä¼¼çš„ token é©—è­‰é‚è¼¯ï¼Œé•åäº† DRY åŸå‰‡ï¼Œä¹Ÿå¢åŠ äº†ç¶­è­·æˆæœ¬ã€‚</p>
<h3 id="éŒ¯èª¤è™•ç†ä¸ä¸€è‡´"><a href="#éŒ¯èª¤è™•ç†ä¸ä¸€è‡´" class="headerlink" title="éŒ¯èª¤è™•ç†ä¸ä¸€è‡´"></a>éŒ¯èª¤è™•ç†ä¸ä¸€è‡´</h3><p>ä¸åŒè·¯ç”±å¯èƒ½æœ‰ä¸åŒçš„ token é©—è­‰éŒ¯èª¤è™•ç†æ–¹å¼ï¼Œé€ æˆ API å›æ‡‰ä¸ä¸€è‡´ã€‚</p>
<h2 id="ä»€éº¼æ˜¯-res-localsï¼Ÿ"><a href="#ä»€éº¼æ˜¯-res-localsï¼Ÿ" class="headerlink" title="ä»€éº¼æ˜¯ res.localsï¼Ÿ"></a>ä»€éº¼æ˜¯ res.localsï¼Ÿ</h2><p>æ ¹æ“š Express.js å®˜æ–¹æ–‡æª”ï¼Œ<code>res.locals</code> æ˜¯ä¸€å€‹ç‰©ä»¶ï¼Œç”¨ä¾†å­˜æ”¾<strong>è«‹æ±‚ç¯„åœå…§çš„å€åŸŸè®Šæ•¸</strong>ï¼Œé€™äº›è®Šæ•¸åªåœ¨ç•¶å‰è«‹æ±‚-å›æ‡‰é€±æœŸä¸­å¯ç”¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Express.js å®˜æ–¹ç¯„ä¾‹</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="property">locals</span>.<span class="property">user</span> = req.<span class="property">user</span></span><br><span class="line">  res.<span class="property">locals</span>.<span class="property">authenticated</span> = !req.<span class="property">user</span></span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="ä¸»æµå‡½å¼åº«çš„æ¨™æº–å¯¦ä½œ"><a href="#ä¸»æµå‡½å¼åº«çš„æ¨™æº–å¯¦ä½œ" class="headerlink" title="ä¸»æµå‡½å¼åº«çš„æ¨™æº–å¯¦ä½œ"></a>ä¸»æµå‡½å¼åº«çš„æ¨™æº–å¯¦ä½œ</h2><h3 id="Auth-js-å®˜æ–¹ç¯„ä¾‹"><a href="#Auth-js-å®˜æ–¹ç¯„ä¾‹" class="headerlink" title="Auth.js å®˜æ–¹ç¯„ä¾‹"></a>Auth.js å®˜æ–¹ç¯„ä¾‹</h3><p>Auth.js å®˜æ–¹æ–‡æª”æ˜ç¢ºå±•ç¤ºäº†ä½¿ç”¨ <code>res.locals</code> çš„æ¨™æº–æ¨¡å¼ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getSession &#125; <span class="keyword">from</span> <span class="string">&quot;@auth/express&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">authSession</span>(<span class="params">req, res, next</span>) &#123;</span><br><span class="line">  res.<span class="property">locals</span>.<span class="property">session</span> = <span class="keyword">await</span> <span class="title function_">getSession</span>(req)</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(authSession)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨è·¯ç”±ä¸­ä½¿ç”¨</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; session &#125; = res.<span class="property">locals</span></span><br><span class="line">  res.<span class="title function_">render</span>(<span class="string">&quot;index&quot;</span>, &#123; <span class="attr">user</span>: session?.<span class="property">user</span> &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="Passport-js-çš„å¯¦ä½œæ¨¡å¼"><a href="#Passport-js-çš„å¯¦ä½œæ¨¡å¼" class="headerlink" title="Passport.js çš„å¯¦ä½œæ¨¡å¼"></a>Passport.js çš„å¯¦ä½œæ¨¡å¼</h3><p>Passport.js åœ¨èªè­‰æˆåŠŸæ™‚æœƒè¨­ç½® <code>req.user</code> å±¬æ€§ï¼Œè¨±å¤šé–‹ç™¼è€…æœƒå°‡æ­¤è³‡è¨Šè¤‡è£½åˆ° <code>res.locals</code> ä»¥ä¾¿åœ¨è¦–åœ–ä¸­ä½¿ç”¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// èªè­‰ä¸­ä»‹è»Ÿé«”</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="property">locals</span>.<span class="property">user</span> = req.<span class="title function_">isAuthenticated</span>() ? req.<span class="property">user</span> : <span class="literal">null</span></span><br><span class="line">  res.<span class="property">locals</span>.<span class="property">isAuthenticated</span> = req.<span class="title function_">isAuthenticated</span>()</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="ç‚ºä»€éº¼é€™æ˜¯å¥½å¯¦ä½œï¼Ÿ"><a href="#ç‚ºä»€éº¼é€™æ˜¯å¥½å¯¦ä½œï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼é€™æ˜¯å¥½å¯¦ä½œï¼Ÿ"></a>ç‚ºä»€éº¼é€™æ˜¯å¥½å¯¦ä½œï¼Ÿ</h2><h3 id="1-å®˜æ–¹æ”¯æŒçš„æ¨™æº–"><a href="#1-å®˜æ–¹æ”¯æŒçš„æ¨™æº–" class="headerlink" title="1. å®˜æ–¹æ”¯æŒçš„æ¨™æº–"></a>1. å®˜æ–¹æ”¯æŒçš„æ¨™æº–</h3><p>Express.js å®˜æ–¹æ–‡æª”èªªæ˜ <code>res.locals</code> å°±æ˜¯ç”¨ä¾†å­˜æ”¾è«‹æ±‚ç´šåˆ¥çš„è³‡è¨Šï¼Œå¦‚èªè­‰ç”¨æˆ¶ã€ç”¨æˆ¶è¨­å®šç­‰ã€‚é€™ä¸æ˜¯ hack æˆ– workaroundï¼Œè€Œæ˜¯è¨­è¨ˆç”¨é€”ã€‚</p>
<h3 id="2-ç”Ÿæ…‹ç³»çµ±å…±è­˜"><a href="#2-ç”Ÿæ…‹ç³»çµ±å…±è­˜" class="headerlink" title="2. ç”Ÿæ…‹ç³»çµ±å…±è­˜"></a>2. ç”Ÿæ…‹ç³»çµ±å…±è­˜</h3><p>ä¸»æµçš„èªè­‰å‡½å¼åº«éƒ½æ¡ç”¨é¡ä¼¼æ¨¡å¼ï¼š</p>
<ul>
<li>Auth.js ç›´æ¥åœ¨æ–‡æª”ä¸­å±•ç¤º <code>res.locals.session</code></li>
<li>Passport.js ç¤¾ç¾¤æ™®éä½¿ç”¨ <code>res.locals.user</code></li>
<li>è¨±å¤šæ•™å­¸éƒ½å±•ç¤ºå°‡èªè­‰ç‹€æ…‹å­˜æ”¾åœ¨ <code>res.locals</code> çš„æ¨¡å¼</li>
</ul>
<h3 id="3-åˆ†é›¢é—œæ³¨é»"><a href="#3-åˆ†é›¢é—œæ³¨é»" class="headerlink" title="3. åˆ†é›¢é—œæ³¨é»"></a>3. åˆ†é›¢é—œæ³¨é»</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// èªè­‰ä¸­ä»‹è»Ÿé«” - åªè² è²¬èªè­‰</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">authMiddleware</span>(<span class="params">req, res, next</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> token = req.<span class="property">headers</span>.<span class="property">authorization</span>?.<span class="title function_">split</span>(<span class="string">&#x27; &#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (token) &#123;</span><br><span class="line">    <span class="keyword">const</span> decoded = jwt.<span class="title function_">verify</span>(token, <span class="variable constant_">JWT_SECRET</span>)</span><br><span class="line">    res.<span class="property">locals</span>.<span class="property">user</span> = decoded</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·¯ç”±è™•ç†å™¨ - åªè² è²¬æ¥­å‹™é‚è¼¯</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/profile&#x27;</span>, authMiddleware, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; user &#125; = res.<span class="property">locals</span></span><br><span class="line">  <span class="keyword">if</span> (!user) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;Unauthorized&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  res.<span class="title function_">json</span>(&#123; <span class="attr">profile</span>: user &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="4-è¦–åœ–æ•´åˆå„ªå‹¢"><a href="#4-è¦–åœ–æ•´åˆå„ªå‹¢" class="headerlink" title="4. è¦–åœ–æ•´åˆå„ªå‹¢"></a>4. è¦–åœ–æ•´åˆå„ªå‹¢</h3><p>åœ¨ä½¿ç”¨æ¨¡æ¿å¼•æ“æ™‚ï¼Œ<code>res.locals</code> çš„è³‡æ–™æœƒè‡ªå‹•å‚³éçµ¦è¦–åœ–ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸­ä»‹è»Ÿé«”è¨­å®š</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="property">locals</span>.<span class="property">currentUser</span> = req.<span class="property">user</span></span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨ EJS/Pug æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨</span></span><br><span class="line"><span class="comment">// &lt;%= currentUser.name %&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="å¸¸è¦‹çš„åæ¨¡å¼"><a href="#å¸¸è¦‹çš„åæ¨¡å¼" class="headerlink" title="å¸¸è¦‹çš„åæ¨¡å¼"></a>å¸¸è¦‹çš„åæ¨¡å¼</h2><h3 id="é¿å…çš„åšæ³•"><a href="#é¿å…çš„åšæ³•" class="headerlink" title="é¿å…çš„åšæ³•"></a>é¿å…çš„åšæ³•</h3><p>æœ‰äº›é–‹ç™¼è€…èªç‚ºéåº¦ä½¿ç”¨ <code>res.locals</code> æœƒè®“é™¤éŒ¯è®Šå›°é›£ï¼Œä½†é€™é€šå¸¸æ˜¯å› ç‚ºï¼š</p>
<ol>
<li><strong>æ¿«ç”¨ä¸­ä»‹è»Ÿé«”æ¨¡å¼</strong> - æŠŠæ¥­å‹™é‚è¼¯ä¹Ÿæ”¾åœ¨ä¸­ä»‹è»Ÿé«”è£¡</li>
<li><strong>éåº¦è€¦åˆ</strong> - å¤šå€‹ä¸­ä»‹è»Ÿé«”äº’ç›¸ä¾è³´ <code>res.locals</code> çš„é †åº</li>
</ol>
<h3 id="æ­£ç¢ºçš„ä½¿ç”¨åŸå‰‡"><a href="#æ­£ç¢ºçš„ä½¿ç”¨åŸå‰‡" class="headerlink" title="æ­£ç¢ºçš„ä½¿ç”¨åŸå‰‡"></a>æ­£ç¢ºçš„ä½¿ç”¨åŸå‰‡</h3><p>ä¸­ä»‹è»Ÿé«”æ‡‰è©²ç”¨æ–¼æ‰€æœ‰ HTTP è«‹æ±‚å…±é€šçš„äº‹é …ï¼Œä¸”ä¸åŒ…å«æ¥­å‹™é‚è¼¯ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// âœ… å¥½çš„åšæ³• - ç´”ç²¹çš„èªè­‰æª¢æŸ¥</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">authenticate</span>(<span class="params">req, res, next</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> token = <span class="title function_">getTokenFromRequest</span>(req)</span><br><span class="line">  <span class="keyword">const</span> user = <span class="title function_">validateToken</span>(token)</span><br><span class="line">  res.<span class="property">locals</span>.<span class="property">user</span> = user</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… å¥½çš„åšæ³• - æˆæ¬Šæª¢æŸ¥</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">requireAuth</span>(<span class="params">req, res, next</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!res.<span class="property">locals</span>.<span class="property">user</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;Unauthorized&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âŒ é¿å…çš„åšæ³• - åœ¨ä¸­ä»‹è»Ÿé«”ä¸­è™•ç†æ¥­å‹™é‚è¼¯</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">badMiddleware</span>(<span class="params">req, res, next</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> user = res.<span class="property">locals</span>.<span class="property">user</span></span><br><span class="line">  <span class="keyword">const</span> orders = <span class="title function_">getUserOrders</span>(user.<span class="property">id</span>) <span class="comment">// æ¥­å‹™é‚è¼¯ä¸æ‡‰è©²åœ¨é€™è£¡</span></span><br><span class="line">  res.<span class="property">locals</span>.<span class="property">orders</span> = orders</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å¯¦å‹™ä¸Šçš„æœ€ä½³å¯¦ä½œ"><a href="#å¯¦å‹™ä¸Šçš„æœ€ä½³å¯¦ä½œ" class="headerlink" title="å¯¦å‹™ä¸Šçš„æœ€ä½³å¯¦ä½œ"></a>å¯¦å‹™ä¸Šçš„æœ€ä½³å¯¦ä½œ</h2><h3 id="æ¨™æº–èªè­‰ä¸­ä»‹è»Ÿé«”"><a href="#æ¨™æº–èªè­‰ä¸­ä»‹è»Ÿé«”" class="headerlink" title="æ¨™æº–èªè­‰ä¸­ä»‹è»Ÿé«”"></a>æ¨™æº–èªè­‰ä¸­ä»‹è»Ÿé«”</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">authMiddleware</span>(<span class="params">req, res, next</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> token = req.<span class="property">headers</span>.<span class="property">authorization</span>?.<span class="title function_">replace</span>(<span class="string">&#x27;Bearer &#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (token) &#123;</span><br><span class="line">      <span class="keyword">const</span> decoded = jwt.<span class="title function_">verify</span>(token, process.<span class="property">env</span>.<span class="property">JWT_SECRET</span>)</span><br><span class="line">      res.<span class="property">locals</span>.<span class="property">user</span> = decoded</span><br><span class="line">      res.<span class="property">locals</span>.<span class="property">isAuthenticated</span> = <span class="literal">true</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      res.<span class="property">locals</span>.<span class="property">user</span> = <span class="literal">null</span></span><br><span class="line">      res.<span class="property">locals</span>.<span class="property">isAuthenticated</span> = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    res.<span class="property">locals</span>.<span class="property">user</span> = <span class="literal">null</span></span><br><span class="line">    res.<span class="property">locals</span>.<span class="property">isAuthenticated</span> = <span class="literal">false</span></span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆæ¬Šæª¢æŸ¥ä¸­ä»‹è»Ÿé«”</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">requireAuth</span>(<span class="params">req, res, next</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!res.<span class="property">locals</span>.<span class="property">isAuthenticated</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;Authentication required&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">next</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨æ–¹å¼</span></span><br><span class="line">app.<span class="title function_">use</span>(authMiddleware)</span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/profile&#x27;</span>, requireAuth, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; user &#125; = res.<span class="property">locals</span></span><br><span class="line">  res.<span class="title function_">json</span>(&#123; user &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="èˆ‡-req-è‡ªå®šç¾©å±¬æ€§çš„æ¯”è¼ƒ"><a href="#èˆ‡-req-è‡ªå®šç¾©å±¬æ€§çš„æ¯”è¼ƒ" class="headerlink" title="èˆ‡ req è‡ªå®šç¾©å±¬æ€§çš„æ¯”è¼ƒ"></a>èˆ‡ req è‡ªå®šç¾©å±¬æ€§çš„æ¯”è¼ƒ</h3><p>é›–ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>req.user</code> æˆ– <code>req.data</code> ç­‰è‡ªå®šç¾©å±¬æ€§ï¼Œä½† <code>res.locals</code> æœ‰å¹¾å€‹å„ªå‹¢ï¼š</p>
<ol>
<li><strong>èªæ„æ¸…æ™°</strong> - æ˜ç¢ºè¡¨ç¤ºé€™æ˜¯çµ¦è¦–åœ–ç”¨çš„è³‡æ–™</li>
<li><strong>è‡ªå‹•å‚³é</strong> - æ¨¡æ¿å¼•æ“æœƒè‡ªå‹•å–ç”¨ <code>res.locals</code> çš„è³‡æ–™</li>
<li><strong>æ¨™æº–åŒ–</strong> - ç¤¾ç¾¤å…±è­˜ï¼Œç¶­è­·æ€§æ›´å¥½</li>
</ol>
<h2 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h2><p><code>res.locals</code> åœ¨èªè­‰ç³»çµ±ä¸­çš„ä½¿ç”¨ç¢ºå¯¦æ˜¯æ¨™æº–å¯¦ä½œï¼š</p>
<ol>
<li><strong>å®˜æ–¹æ”¯æŒ</strong> - Express.js å’Œ Auth.js å®˜æ–¹æ–‡æª”éƒ½å±•ç¤ºé€™ç¨®ç”¨æ³•</li>
<li><strong>ç”Ÿæ…‹ç³»çµ±æ¨™æº–</strong> - Passport.js ç­‰ä¸»æµå‡½å¼åº«æ¡ç”¨ç›¸åŒæ¨¡å¼</li>
<li><strong>æ•ˆèƒ½è€ƒé‡</strong> - é¿å…é‡è¤‡è§£æ JWT æˆ–æŸ¥è©¢è³‡æ–™åº«</li>
<li><strong>é–‹ç™¼é«”é©—</strong> - æ§åˆ¶å™¨å¯ä»¥ç›´æ¥å­˜å–ç”¨æˆ¶è³‡è¨Š</li>
</ol>
<p>æ‰€ä»¥ä¸‹æ¬¡æœ‰äººèªªä½¿ç”¨ <code>res.locals</code> ä¸æ˜¯å¥½å¯¦ä½œæ™‚ï¼Œå¯ä»¥æ‹¿å‡ºé€™äº›å®˜æ–¹æ–‡æª”ä¾†è­‰æ˜é€™ç¢ºå¯¦æ˜¯è¢«å»£æ³›æ¥å—çš„æ¨™æº–åšæ³•ã€‚</p>
<h2 id="åƒè€ƒè³‡æ–™"><a href="#åƒè€ƒè³‡æ–™" class="headerlink" title="åƒè€ƒè³‡æ–™"></a>åƒè€ƒè³‡æ–™</h2><ul>
<li><a target="_blank" rel="noopener" href="https://expressjs.com/en/guide/using-middleware.html">Express.js Using middleware</a></li>
<li><a target="_blank" rel="noopener" href="https://authjs.dev/reference/express">Auth.js Express Integration</a></li>
<li><a target="_blank" rel="noopener" href="https://www.passportjs.org/concepts/authentication/middleware/">Passport.js Middleware Documentation</a></li>
<li><a target="_blank" rel="noopener" href="https://expressjs.com/en/api.html#res.locals">Express.js res.locals API Reference</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2025/07/25/2025/express-res-locals-auth-best-practice/" data-id="cme0z8sdb00i02sqzafub9w3x" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2025/07/25/2025/express-res-locals-auth-best-practice/#disqus_thread" class="article-comment-link">ç•™è¨€</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2025/ithub-action-ssh-keyscan-not-found-fix" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/07/22/2025/ithub-action-ssh-keyscan-not-found-fix/" class="article-date">
  <time datetime="2025-07-22T05:42:30.000Z" itemprop="datePublished">2025-07-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/07/22/2025/ithub-action-ssh-keyscan-not-found-fix/">[è¸©é›·ç­†è¨˜] GitHub Action ssh-keyscan not found å•é¡Œä¿®å¾©</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å‰æƒ…æè¦"><a href="#å‰æƒ…æè¦" class="headerlink" title="å‰æƒ…æè¦"></a>å‰æƒ…æè¦</h2><p>GitHub Action <code>marsen/hexo-action@v1.0.11</code> ä¹‹å‰é‹è¡Œæ­£å¸¸ï¼Œä½†æœ€è¿‘é–‹å§‹å¤±æ•—ï¼ŒéŒ¯èª¤è¨Šæ¯ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/app/entrypoint.sh: 9: /usr/app/entrypoint.sh: ssh-keyscan: not found</span><br></pre></td></tr></table></figure>

<h2 id="å•é¡Œåˆ†æ"><a href="#å•é¡Œåˆ†æ" class="headerlink" title="å•é¡Œåˆ†æ"></a>å•é¡Œåˆ†æ</h2><h3 id="åˆæ­¥æª¢æŸ¥"><a href="#åˆæ­¥æª¢æŸ¥" class="headerlink" title="åˆæ­¥æª¢æŸ¥"></a>åˆæ­¥æª¢æŸ¥</h3><p>æª¢æŸ¥ entrypoint.sh ç¬¬9è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keyscan -t rsa github.com &gt;&gt; /root/.ssh/known_hosts</span><br></pre></td></tr></table></figure>

<p>æª¢æŸ¥ Dockerfile å¥—ä»¶å®‰è£ï¼š</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> node:<span class="number">20</span>-buster-slim</span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install -y git openssh-client</span></span><br></pre></td></tr></table></figure>

<p>æ˜æ˜æœ‰å®‰è£ <code>openssh-client</code>ï¼Œç‚ºä»€éº¼æ‰¾ä¸åˆ° <code>ssh-keyscan</code>ï¼Ÿ</p>
<h3 id="æ ¹æœ¬åŸå› "><a href="#æ ¹æœ¬åŸå› " class="headerlink" title="æ ¹æœ¬åŸå› "></a>æ ¹æœ¬åŸå› </h3><p><strong>Debian Buster ç”Ÿå‘½é€±æœŸçµæŸ</strong></p>
<ul>
<li><code>node:20-buster-slim</code> åŸºæ–¼ Debian 10 (Buster)</li>
<li>Debian 10 æ–¼ 2024å¹´8æœˆé”åˆ° End of Life</li>
<li>å¥—ä»¶åº«ä¸å†ç¶­è­·ï¼Œå¥—ä»¶çµæ§‹å¯èƒ½è®ŠåŒ–</li>
</ul>
<p><strong>OpenSSH å¥—ä»¶é‡çµ„</strong></p>
<ul>
<li>2024å¹´ OpenSSH å¤šå€‹ç‰ˆæœ¬ç™¼å¸ƒ (9.7, 9.9)</li>
<li><code>ssh-keyscan</code> å¯èƒ½å¾ <code>openssh-client</code> ç§»åˆ°å…¶ä»–å¥—ä»¶</li>
</ul>
<p><strong>Docker æ˜ åƒè‡ªå‹•æ›´æ–°</strong></p>
<ul>
<li>Docker Hub æœƒè‡ªå‹•é‡å»ºæ˜ åƒ</li>
<li>æ–°ç‰ˆæœ¬ç§»é™¤ä¸å¿…è¦å·¥å…·ä»¥æ¸›å°‘æ”»æ“Šé¢</li>
</ul>
<h2 id="è§£æ±ºæ–¹æ¡ˆ"><a href="#è§£æ±ºæ–¹æ¡ˆ" class="headerlink" title="è§£æ±ºæ–¹æ¡ˆ"></a>è§£æ±ºæ–¹æ¡ˆ</h2><h3 id="å¿«é€Ÿä¿®å¾©ï¼ˆä¸æ¨è–¦ï¼‰"><a href="#å¿«é€Ÿä¿®å¾©ï¼ˆä¸æ¨è–¦ï¼‰" class="headerlink" title="å¿«é€Ÿä¿®å¾©ï¼ˆä¸æ¨è–¦ï¼‰"></a>å¿«é€Ÿä¿®å¾©ï¼ˆä¸æ¨è–¦ï¼‰</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install -y git openssh-client openssh-server</span></span><br></pre></td></tr></table></figure>

<p>é›–ç„¶å¯è¡Œï¼Œä½†å®‰è£ SSH ä¼ºæœå™¨æœƒå¢åŠ æ”»æ“Šé¢ã€‚</p>
<h3 id="æ­£ç¢ºè§£æ³•"><a href="#æ­£ç¢ºè§£æ³•" class="headerlink" title="æ­£ç¢ºè§£æ³•"></a>æ­£ç¢ºè§£æ³•</h3><p>å‡ç´šåŸºåº•æ˜ åƒåˆ°æ”¯æ´ç‰ˆæœ¬ï¼š</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¾éæœŸç‰ˆæœ¬</span></span><br><span class="line"><span class="keyword">FROM</span> node:<span class="number">20</span>-buster-slim</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡ç´šåˆ°å®‰å…¨ç‰ˆæœ¬  </span></span><br><span class="line"><span class="keyword">FROM</span> node:<span class="number">20</span>-bookworm-slim</span><br></pre></td></tr></table></figure>

<p>å®Œæ•´çš„ Dockerfile ä¿®æ”¹ï¼š</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> node:<span class="number">20</span>-bookworm-slim</span><br><span class="line"></span><br><span class="line"><span class="keyword">LABEL</span><span class="language-bash"> version=<span class="string">&quot;1.0.12&quot;</span></span></span><br><span class="line"><span class="keyword">LABEL</span><span class="language-bash"> repository=<span class="string">&quot;https://github.com/marsen/hexo-action&quot;</span></span></span><br><span class="line"><span class="keyword">LABEL</span><span class="language-bash"> homepage=<span class="string">&quot;https://blog.marsen.me&quot;</span></span></span><br><span class="line"><span class="keyword">LABEL</span><span class="language-bash"> maintainer=<span class="string">&quot;marsen.lin &lt;admin@marsen.me&gt;&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /usr/app</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> entrypoint.sh /usr/app/entrypoint.sh</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> sync_deploy_history.js /usr/app/sync_deploy_history.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰å…¨ä¸”æœ€ä½³åŒ–çš„å¥—ä»¶å®‰è£</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update &gt; /dev/null &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">    apt-get install -y git openssh-client &gt; /dev/null &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">    apt-get clean &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">    <span class="built_in">rm</span> -rf /var/lib/apt/lists/* &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">    <span class="built_in">chmod</span> +x /usr/app/entrypoint.sh</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;/usr/app/entrypoint.sh&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<h2 id="é—œéµæ”¹é€²"><a href="#é—œéµæ”¹é€²" class="headerlink" title="é—œéµæ”¹é€²"></a>é—œéµæ”¹é€²</h2><ol>
<li><p><strong>åŸºåº•æ˜ åƒå‡ç´š</strong>ï¼šbuster-slim â†’ bookworm-slim</p>
<ul>
<li>Debian 12 å–ä»£å·² EOL çš„ Debian 10</li>
<li>æ›´å¥½çš„å®‰å…¨æ€§å’Œé•·æœŸæ”¯æ´</li>
</ul>
</li>
<li><p><strong>æœ€å°æ¬Šé™åŸå‰‡</strong>ï¼šåªå®‰è£ openssh-client</p>
<ul>
<li>åŒ…å«æ‰€éœ€çš„ ssh-keyscan å·¥å…·</li>
<li>ä¸å®‰è£ SSH ä¼ºæœå™¨ï¼Œæ¸›å°‘æ”»æ“Šé¢</li>
</ul>
</li>
<li><p><strong>Docker æœ€ä½³å¯¦è¸</strong>ï¼š</p>
<ul>
<li>æ¸…ç† apt å¿«å–æ¸›å°‘æ˜ åƒå¤§å°</li>
<li>ä½¿ç”¨ &amp;&amp; åˆä½µ RUN æŒ‡ä»¤æ¸›å°‘å±¤æ•¸</li>
</ul>
</li>
</ol>
<h2 id="é é˜²æªæ–½"><a href="#é é˜²æªæ–½" class="headerlink" title="é é˜²æªæ–½"></a>é é˜²æªæ–½</h2><ul>
<li>ä½¿ç”¨å…·é«”ç‰ˆæœ¬æ¨™ç±¤è€Œé latest</li>
<li>å®šæœŸæª¢æŸ¥åŸºåº•æ˜ åƒçš„ç”Ÿå‘½é€±æœŸ</li>
<li>å»ºç«‹è‡ªå‹•åŒ–æ¸¬è©¦é©—è­‰ä¾è³´å¯ç”¨æ€§</li>
</ul>
<h2 id="å°çµ"><a href="#å°çµ" class="headerlink" title="å°çµ"></a>å°çµ</h2><p>é€™æ¬¡å•é¡Œçš„æ ¸å¿ƒæ˜¯åŸºåº•æ˜ åƒéæœŸå°è‡´çš„é€£é–åæ‡‰ã€‚åœ¨å®¹å™¨åŒ–é–‹ç™¼ä¸­ï¼Œå¤–éƒ¨ä¾è³´çš„è®ŠåŒ–å¾€å¾€æœƒå½±éŸ¿æ—¢æœ‰ç³»çµ±ã€‚è§£æ±ºæ–¹æ¡ˆä¸æ˜¯å¿«é€Ÿä¿®å¾©ï¼Œè€Œæ˜¯å¾æ ¹æœ¬ä¸Šå‡ç´šåˆ°å®‰å…¨çš„é•·æœŸæ”¯æ´ç‰ˆæœ¬ã€‚</p>
<p>é™¤éŒ¯é—œéµæ€è·¯ï¼šåˆ†æã€Œç‚ºä»€éº¼ä¹‹å‰å¯ä»¥ï¼Œç¾åœ¨ä¸è¡Œã€ï¼Œå¾€å¾€èƒ½æ‰¾åˆ°å¤–éƒ¨ç’°å¢ƒè®ŠåŒ–çš„ç·šç´¢ã€‚</p>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2025/07/22/2025/ithub-action-ssh-keyscan-not-found-fix/" data-id="cme0z8sdg00ik2sqzc3z3ho4x" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2025/07/22/2025/ithub-action-ssh-keyscan-not-found-fix/#disqus_thread" class="article-comment-link">ç•™è¨€</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%B8%A9%E9%9B%B7%E7%AD%86%E8%A8%98/" rel="tag">è¸©é›·ç­†è¨˜</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2025/ai-ollama-containerized" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/06/22/2025/ai-ollama-containerized/" class="article-date">
  <time datetime="2025-06-22T15:36:35.000Z" itemprop="datePublished">2025-06-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/06/22/2025/ai-ollama-containerized/"> [å¯¦ä½œç­†è¨˜] Ollama å®¹å™¨åŒ–èª¿ç ”ç­†è¨˜</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å‰æƒ…æè¦"><a href="#å‰æƒ…æè¦" class="headerlink" title="å‰æƒ…æè¦"></a>å‰æƒ…æè¦</h2><p>æœ€è¿‘åœ¨æ AI æ¨¡å‹çš„æœ¬åœ°éƒ¨ç½²ï¼Œä¸¦è©¦è‘—å°‡ Ollama å®¹å™¨åŒ–ã€‚<br>ç¶“éä¸€æ®µæ™‚é–“çš„èª¿ç ”å’Œå¯¦æ¸¬ï¼Œæƒ³è¨˜éŒ„ä¸€ä¸‹ç›®å‰çš„é€²åº¦å’Œå°å¹¾å€‹ä¸»æµæ–¹æ¡ˆçš„çœ‹æ³•ã€‚</p>
<h3 id="ç›®æ¨™"><a href="#ç›®æ¨™" class="headerlink" title="ç›®æ¨™"></a>ç›®æ¨™</h3><ul>
<li>æ‰¾åˆ°ç©©å®šçš„ Ollama å®¹å™¨åŒ–æ–¹æ¡ˆ</li>
<li>è©•ä¼°å„ç¨®æ–°èˆˆå·¥å…·çš„å¯ç”¨æ€§</li>
<li>ç‚ºæœªä¾†çš„ç”¢å“é–‹ç™¼åšæŠ€è¡“é ç ”</li>
</ul>
<h3 id="Ollama-ç°¡ä»‹"><a href="#Ollama-ç°¡ä»‹" class="headerlink" title="Ollama ç°¡ä»‹"></a>Ollama ç°¡ä»‹</h3><p>Ollama æ˜¯ä¸€å€‹é–‹æºå·¥å…·ï¼Œè®“ä½ åœ¨æœ¬åœ°é›»è…¦ä¸Šè¼•é¬†é‹è¡Œå¤§å‹èªè¨€æ¨¡å‹ï¼ˆå¦‚ Llamaã€CodeLlamaã€Mistral ç­‰ï¼‰ã€‚<br>å®‰è£ç°¡å–®ï¼Œä¸€è¡ŒæŒ‡ä»¤å°±èƒ½ä¸‹è¼‰å’Œé‹è¡Œå„ç¨® AI æ¨¡å‹ï¼Œç„¡éœ€è¤‡é›œè¨­å®šã€‚æ”¯æ´ macOSã€Linux å’Œ Windowsã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  å®‰è£å¾Œç›´æ¥ç”¨</span></span><br><span class="line">ollama run llama3.2</span><br></pre></td></tr></table></figure>

<p>é¡ä¼¼ Docker çš„æ¦‚å¿µï¼Œä½†å°ˆé–€ç‚º AI æ¨¡å‹è¨­è¨ˆã€‚<br>é‚„æä¾› REST APIï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å•Ÿå‹•å¾Œè‡ªå‹•é–‹å•Ÿ API server (é è¨­ port 11434)</span></span><br><span class="line">curl http://localhost:11434/api/generate \</span><br><span class="line">  -d <span class="string">&#x27;&#123;&quot;model&quot;: &quot;llama3.2&quot;, &quot;prompt&quot;: &quot;Hello&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>æ²’æœ‰ Ollama çš„è©±ï¼Œä½ éœ€è¦ï¼š</p>
<ul>
<li>æ‰‹å‹•ä¸‹è¼‰æ¨¡å‹æª”æ¡ˆï¼ˆé€šå¸¸å¥½å¹¾ GBï¼‰</li>
<li>è™•ç†ä¸åŒæ¨¡å‹æ ¼å¼ï¼ˆGGUFã€GGML ç­‰ï¼‰</li>
<li>è¨­å®š GPU åŠ é€Ÿç’°å¢ƒ</li>
<li>å¯«ä»£ç¢¼è¼‰å…¥æ¨¡å‹åˆ°è¨˜æ†¶é«”</li>
<li>è™•ç† tokenization å’Œ inference</li>
<li>è‡ªå·±åŒ… API server</li>
</ul>
<p>Ollama æŠŠé€™äº›éƒ½å¹«ä½ æå®šäº†ã€‚</p>
<h2 id="é¸æ“‡"><a href="#é¸æ“‡" class="headerlink" title="é¸æ“‡"></a>é¸æ“‡</h2><h3 id="ç›®å‰æ¡ç”¨ï¼šOllama-Container-æŒ‡ä»¤åˆå§‹åŒ–"><a href="#ç›®å‰æ¡ç”¨ï¼šOllama-Container-æŒ‡ä»¤åˆå§‹åŒ–" class="headerlink" title="ç›®å‰æ¡ç”¨ï¼šOllama Container + æŒ‡ä»¤åˆå§‹åŒ–"></a>ç›®å‰æ¡ç”¨ï¼šOllama Container + æŒ‡ä»¤åˆå§‹åŒ–</h3><p>ç¶“éè©•ä¼°ï¼Œé¸æ“‡ ollama container æ–¹æ¡ˆæœ€ç©©å®šä¸”å½ˆæ€§ä¹Ÿæœ€é«˜ï¼Œ</p>
<p>åªè¦éœ€è¦é€éæŒ‡ä»¤çš„æ–¹æ³•ä¾†å°±å¯ä»¥ä¾†å–æ¨¡å‹ã€‚</p>
<p>åŸºæœ¬ç”¨æ³•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å•Ÿå‹• ollama container</span></span><br><span class="line">docker run -d --name ollama -p 11434:11434 ollama/ollama</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è¼‰æ¨¡å‹</span></span><br><span class="line">docker <span class="built_in">exec</span> -it ollama ollama pull llama3.2</span><br></pre></td></tr></table></figure>

<h3 id="Docker-Model-Runnerï¼šå€¼å¾—é—œæ³¨ä½†æš«ä¸æ¡ç”¨"><a href="#Docker-Model-Runnerï¼šå€¼å¾—é—œæ³¨ä½†æš«ä¸æ¡ç”¨" class="headerlink" title="Docker Model Runnerï¼šå€¼å¾—é—œæ³¨ä½†æš«ä¸æ¡ç”¨"></a>Docker Model Runnerï¼šå€¼å¾—é—œæ³¨ä½†æš«ä¸æ¡ç”¨</h3><p>DMR åœ¨ 2025 å¹´ 3æœˆéš¨ Docker Desktop 4.40 æ¨å‡º Beta ç‰ˆï¼Œ</p>
<p>çœ‹èµ·ä¾†å¾ˆæœ‰æ½›åŠ›ï¼Œä½†ç›®å‰ä¸æ‰“ç®—ç”¨åœ¨ç”¢å“ä¸Šã€‚</p>
<p>ä¸»å› å¦‚ä¸‹</p>
<ul>
<li>å¹³å°æ”¯æ´éšæ®µæ€§ï¼šæœ€åˆåªæ”¯æ´ Apple Silicon (M1-M4)ï¼Œ5æœˆçš„ Docker Desktop 4.41 æ‰åŠ å…¥ Windows NVIDIA GPU æ”¯æ´</li>
<li>å¯¦é©—éšæ®µï¼šå·¥å…·è®ŠåŒ–å¿«é€Ÿï¼Œé æœŸæœƒæŒçºŒæ”¹é€²ï¼Œå°ç”¢å“é–‹ç™¼é¢¨éšªè¼ƒé«˜</li>
<li>Linux æ”¯æ´ï¼šç›®å‰åœ¨ Linux (åŒ…å« WSL2) ä¸Šæ”¯æ´ Docker CEï¼Œä½†æ•´é«”ç”Ÿæ…‹é‚„åœ¨ç™¼å±•ä¸­</li>
</ul>
<p>æœƒæŒçºŒè§€å¯Ÿï¼Œæœ€æ–°çš„ Docker Desktop 4.42 ç”šè‡³æ”¯æ´äº† Windows Qualcomm æ™¶ç‰‡ï¼Œç™¼å±•å¾ˆå¿«ã€‚</p>
<h3 id="Podman-AI-Labï¼šæ¦‚å¿µä¸éŒ¯ä½†æœ‰ä½¿ç”¨é™åˆ¶"><a href="#Podman-AI-Labï¼šæ¦‚å¿µä¸éŒ¯ä½†æœ‰ä½¿ç”¨é™åˆ¶" class="headerlink" title="Podman AI Labï¼šæ¦‚å¿µä¸éŒ¯ä½†æœ‰ä½¿ç”¨é™åˆ¶"></a>Podman AI Labï¼šæ¦‚å¿µä¸éŒ¯ä½†æœ‰ä½¿ç”¨é™åˆ¶</h3><p>Podman AI Lab æä¾›ä¸€ä»½ç²¾é¸çš„é–‹æº AI æ¨¡å‹æ¸…å–®ï¼Œæ¦‚å¿µä¸Šè·Ÿ DMR é¡ä¼¼ï¼Œä½†å¯¦éš›ä½¿ç”¨ä¸Šæœ‰äº›è€ƒé‡ã€‚</p>
<p>ç¾æ³ æ”¯æ´ GGUFã€PyTorchã€TensorFlow ç­‰å¸¸è¦‹æ ¼å¼</p>
<p>æä¾›ç²¾é¸çš„ recipe ç›®éŒ„ï¼Œå¹«åŠ©å°èˆª AI ä½¿ç”¨æ¡ˆä¾‹å’Œæ¨¡å‹</p>
<p>æœ€è¿‘èˆ‡ RamaLama æ•´åˆï¼Œç°¡åŒ–æœ¬åœ° AI æ¨¡å‹åŸ·è¡Œ</p>
<p>ä½†æ¡ç”¨ç²¾é¸æ¨¡å‹æ¸…å–®çš„ç­–ç•¥ï¼Œå¯èƒ½ä¸åŒ…å«æ‰€æœ‰æƒ³è¦çš„æ¨¡å‹</p>
<p>ç›¸å°æ–¼ Ollama çš„å»£æ³›æ¨¡å‹æ”¯æ´ï¼Œé¸æ“‡è¼ƒç‚ºæœ‰é™</p>
<p>ä¸ééš¨è‘— RamaLama èƒ½å¾ä»»ä½•ä¾†æºç°¡åŒ– AI æ¨¡å‹çš„æœ¬åœ°æœå‹™ï¼Œæœªä¾†å¯èƒ½æœƒæ›´éˆæ´»ã€‚</p>
<h2 id="ä¸€äº›è¦æ³¨æ„çš„å°å•é¡Œ"><a href="#ä¸€äº›è¦æ³¨æ„çš„å°å•é¡Œ" class="headerlink" title="ä¸€äº›è¦æ³¨æ„çš„å°å•é¡Œ"></a>ä¸€äº›è¦æ³¨æ„çš„å°å•é¡Œ</h2><h3 id="Ollama-Container-å¸¸è¦‹å‘"><a href="#Ollama-Container-å¸¸è¦‹å‘" class="headerlink" title="Ollama Container å¸¸è¦‹å‘"></a>Ollama Container å¸¸è¦‹å‘</h3><ol>
<li><strong>GPU æ”¯æ´</strong>ï¼šè¨˜å¾—åŠ  <code>--gpus all</code> æˆ–ç”¨ docker-compose è¨­å®š</li>
<li><strong>æ¨¡å‹è·¯å¾‘</strong>ï¼šé è¨­åœ¨ <code>/root/.ollama</code>ï¼Œè¦æŒä¹…åŒ–è¨˜å¾— mount volume</li>
<li><strong>ç¶²è·¯è¨­å®š</strong>ï¼šå¦‚æœåœ¨ k8s ç’°å¢ƒï¼Œæ³¨æ„ service çš„ port è¨­å®š</li>
</ol>
<h3 id="Docker-Model-Runner-è©•ä¼°å¿ƒå¾—"><a href="#Docker-Model-Runner-è©•ä¼°å¿ƒå¾—" class="headerlink" title="Docker Model Runner è©•ä¼°å¿ƒå¾—"></a>Docker Model Runner è©•ä¼°å¿ƒå¾—</h3><ul>
<li>ç›®å‰ä¸»è¦åœ¨ macOS Apple Silicon ä¸Šæ¯”è¼ƒç©©å®š</li>
<li>Linux æ”¯æ´é‚„åœ¨å®Œå–„ä¸­</li>
<li>Windows æ”¯æ´æ˜¯æœ€è¿‘æ‰åŠ çš„ï¼Œéœ€è¦æ›´å¤šå¯¦æ¸¬</li>
</ul>
<h2 id="æŠ€è¡“é¸å‹æ€è€ƒ"><a href="#æŠ€è¡“é¸å‹æ€è€ƒ" class="headerlink" title="æŠ€è¡“é¸å‹æ€è€ƒ"></a>æŠ€è¡“é¸å‹æ€è€ƒ</h2><p>é€™æ¬¡èª¿ç ”è®“æˆ‘æƒ³åˆ°å¹¾å€‹é»ï¼š</p>
<ol>
<li><strong>ç©©å®šæ€§ &gt; æ–°åŠŸèƒ½</strong>ï¼šå°ç”¢å“é–‹ç™¼ä¾†èªªï¼Œç©©å®šæ€§æ°¸é æ˜¯ç¬¬ä¸€è€ƒé‡</li>
<li><strong>ç”Ÿæ…‹å®Œæ•´æ€§</strong>ï¼šå–®ä¸€å·¥å…·å†å¥½ï¼Œç”Ÿæ…‹ä¸å®Œå–„å°±æ˜¯ç¡¬å‚·</li>
<li><strong>ç¶­è­·æˆæœ¬</strong>ï¼šæ–°æŠ€è¡“é€šå¸¸éœ€è¦æ›´å¤šç¶­è­·å·¥ä½œ</li>
</ol>
<h2 id="ä¸‹ä¸€æ­¥"><a href="#ä¸‹ä¸€æ­¥" class="headerlink" title="ä¸‹ä¸€æ­¥"></a>ä¸‹ä¸€æ­¥</h2><p>çŸ­æœŸè¨ˆç•«ï¼š</p>
<ol>
<li>æŠŠ Ollama container çš„åˆå§‹åŒ–æµç¨‹è‡ªå‹•åŒ–</li>
<li>æŒçºŒè¿½è¹¤ DMR ç™¼å±•</li>
<li>å»ºç«‹æŠ€è¡“æ–¹æ¡ˆè©•ä¼°æ¨™æº–</li>
</ol>
<p>ä¸­æœŸç›®æ¨™ï¼š</p>
<ul>
<li>ç­‰ DMR ç©©å®šå¾Œå†è©•ä¼°å°å…¥</li>
<li>ç ”ç©¶å…¶ä»–å®¹å™¨åŒ–æ–¹æ¡ˆ</li>
<li>æ•´ç†æœ€ä½³å¯¦è¸æ–‡ä»¶</li>
</ul>
<h2 id="å°çµ"><a href="#å°çµ" class="headerlink" title="å°çµ"></a>å°çµ</h2><p>AI åŸºç¤è¨­æ–½è®ŠåŒ–å¾ˆå¿«ï¼Œå®¹å™¨åŒ–æŠ€è¡“ä¹Ÿåœ¨æ¼”é€²ã€‚ç›®å‰æ²’æœ‰å®Œç¾æ–¹æ¡ˆï¼Œä½†é€™å€‹èª¿ç ”éç¨‹å¾ˆæœ‰åƒ¹å€¼ã€‚</p>
<p>æŠ€è¡“é¸æ“‡æ˜¯å‹•æ…‹å¹³è¡¡çš„éç¨‹ï¼Œè¦åœ¨ç©©å®šæ€§ã€åŠŸèƒ½æ€§ã€ç¶­è­·æˆæœ¬é–“æ‰¾å¹³è¡¡é»ã€‚</p>
<p>æœƒæŒçºŒé—œæ³¨é€™é ˜åŸŸçš„ç™¼å±•ï¼Œæœ‰æ–°ç™¼ç¾å†åˆ†äº«ã€‚</p>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2025/06/22/2025/ai-ollama-containerized/" data-id="cme0z8sd700hl2sqz8btnexdq" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2025/06/22/2025/ai-ollama-containerized/#disqus_thread" class="article-comment-link">ç•™è¨€</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2025/ai-tools" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/06/20/2025/ai-tools/" class="article-date">
  <time datetime="2025-06-20T11:35:51.000Z" itemprop="datePublished">2025-06-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/06/20/2025/ai-tools/"> [ç”Ÿæ´»ç­†è¨˜] 2025 å¸¸ç”¨å·¥å…·æ•´ç† - AI ç¯‡</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å‰æƒ…æè¦"><a href="#å‰æƒ…æè¦" class="headerlink" title="å‰æƒ…æè¦"></a>å‰æƒ…æè¦</h2><p>æœ€è¿‘ AI å·¥å…·å¦‚é›¨å¾Œæ˜¥ç­èˆ¬å†’å‡ºï¼Œæ•´ç†ä¸€äº›ç›®å‰åœ¨ç”¨æˆ–å€¼å¾—é—œæ³¨çš„å·¥å…·ï¼Œä¸»è¦åˆ†ç‚ºå°è©±ã€é–‹ç™¼ã€å°ˆæ¥­æ‡‰ç”¨ä¸‰å¤§é¡ã€‚</p>
<h2 id="å°è©±èˆ‡é€šç”¨-AI"><a href="#å°è©±èˆ‡é€šç”¨-AI" class="headerlink" title="å°è©±èˆ‡é€šç”¨ AI"></a>å°è©±èˆ‡é€šç”¨ AI</h2><h3 id="Claude"><a href="#Claude" class="headerlink" title="Claude"></a>Claude</h3><ul>
<li><a target="_blank" rel="noopener" href="https://claude.ai/chat/"><strong>Claude Chat</strong></a></li>
<li>Anthropic é–‹ç™¼çš„ AI åŠ©æ‰‹ï¼Œæ“…é•·å¯«ä½œã€åˆ†æã€ç¨‹å¼é–‹ç™¼</li>
<li>æ”¯æ´å¤šæ¨¡æ…‹è¼¸å…¥ï¼ˆæ–‡å­—ã€åœ–ç‰‡ã€æ–‡ä»¶ï¼‰</li>
<li>å…è²»ç‰ˆæœ‰ä½¿ç”¨é™åˆ¶ï¼Œä»˜è²»ç‰ˆæ›´ç©©å®š</li>
</ul>
<h3 id="Grok"><a href="#Grok" class="headerlink" title="Grok"></a>Grok</h3><ul>
<li><a target="_blank" rel="noopener" href="https://grok.com/"><strong>Grok</strong></a></li>
<li>xAI æ¨å‡ºçš„å°è©±å¼ AI</li>
<li>é¢¨æ ¼æ¯”è¼ƒç›´æ¥çŠ€åˆ©ï¼Œæœƒåæ§½ï¼ˆç‰¹è‰²ï¼‰</li>
<li>éœ€è¦ X Premium æœƒå“¡æ‰èƒ½ä½¿ç”¨</li>
</ul>
<h3 id="Gemini-Google"><a href="#Gemini-Google" class="headerlink" title="Gemini (Google)"></a>Gemini (Google)</h3><ul>
<li><a target="_blank" rel="noopener" href="https://gemini.google.com/"><strong>Gemini</strong></a></li>
<li>Google æœ€æ–°å¤šæ¨¡æ…‹ AI åŠ©æ‰‹ï¼Œæ”¯æ´æ–‡å­—ã€åœ–ç‰‡ã€ç¨‹å¼ç¢¼ç­‰å¤šç¨®è¼¸å…¥</li>
<li>å·²æ•´åˆé€² Google Workspaceã€Androidã€Chrome ç­‰ç”Ÿæ…‹ç³»</li>
</ul>
<h3 id="Microsoft-Copilot"><a href="#Microsoft-Copilot" class="headerlink" title="Microsoft Copilot"></a>Microsoft Copilot</h3><ul>
<li><a target="_blank" rel="noopener" href="https://copilot.microsoft.com/"><strong>Copilot</strong></a></li>
<li>å¾®è»Ÿå…¨å®¶æ¡¶ AI åŠ©æ‰‹ï¼Œæ•´åˆæ–¼ Windows 11ã€Edgeã€Office 365</li>
<li>æ”¯æ´ Wordã€Excelã€PowerPoint ç›´æ¥ AI å”ä½œ</li>
</ul>
<h3 id="Perplexity-AI"><a href="#Perplexity-AI" class="headerlink" title="Perplexity AI"></a>Perplexity AI</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.perplexity.ai/"><strong>Perplexity</strong></a></li>
<li>å¼·èª¿å³æ™‚ç¶²è·¯æœå°‹èˆ‡å•ç­”ï¼Œæ”¯æ´å¤šèªè¨€ã€å¼•ç”¨ä¾†æº</li>
<li>é©åˆçŸ¥è­˜æŸ¥è©¢ã€ç ”ç©¶è¼”åŠ©</li>
</ul>
<h3 id="Notion-AI"><a href="#Notion-AI" class="headerlink" title="Notion AI"></a>Notion AI</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.notion.so/product/ai"><strong>Notion AI</strong></a></li>
<li>æ•´åˆæ–¼ Notion ç­†è¨˜&#x2F;çŸ¥è­˜ç®¡ç†å¹³å°çš„ AI åŠ©æ‰‹</li>
<li>æ”¯æ´è‡ªå‹•æ‘˜è¦ã€é‡å¯«ã€è…¦åŠ›æ¿€ç›ªç­‰åŠŸèƒ½</li>
</ul>
<h3 id="ChatGPT-OpenAI"><a href="#ChatGPT-OpenAI" class="headerlink" title="ChatGPT (OpenAI)"></a>ChatGPT (OpenAI)</h3><ul>
<li><a target="_blank" rel="noopener" href="https://chat.openai.com/"><strong>ChatGPT</strong></a></li>
<li>OpenAI çš„å°è©±å¼ AIï¼Œæ”¯æ´ GPT-4&#x2F;4oï¼Œæ‡‰ç”¨æ–¼å°è©±ã€ç¨‹å¼ã€è³‡æ–™åˆ†æç­‰</li>
<li>å…è²»&#x2F;ä»˜è²»ç‰ˆçš†æœ‰</li>
</ul>
<h3 id="Kimi-Chatï¼ˆMoonshot-AIï¼‰"><a href="#Kimi-Chatï¼ˆMoonshot-AIï¼‰" class="headerlink" title="Kimi Chatï¼ˆMoonshot AIï¼‰"></a>Kimi Chatï¼ˆMoonshot AIï¼‰</h3><ul>
<li><a target="_blank" rel="noopener" href="https://kimi.moonshot.cn/"><strong>Kimi Chat</strong></a></li>
<li>ä¸­æ–‡ç¤¾ç¾¤è¨è«–åº¦é«˜ï¼Œæ”¯æ´é•·æ–‡é–±è®€ã€PDF åˆ†æ</li>
</ul>
<h3 id="Phind"><a href="#Phind" class="headerlink" title="Phind"></a>Phind</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.phind.com/"><strong>Phind</strong></a></li>
<li>å°ˆç‚ºå·¥ç¨‹å¸«è¨­è¨ˆçš„ AI æœå°‹èˆ‡å•ç­”å¹³å°ï¼Œç¨‹å¼ç¢¼è§£é‡‹ã€æŠ€è¡“æ–‡ä»¶æŸ¥æ‰¾å¾ˆå¼·</li>
</ul>
<hr>
<h2 id="ç¨‹å¼é–‹ç™¼å·¥å…·"><a href="#ç¨‹å¼é–‹ç™¼å·¥å…·" class="headerlink" title="ç¨‹å¼é–‹ç™¼å·¥å…·"></a>ç¨‹å¼é–‹ç™¼å·¥å…·</h2><h3 id="ç¨‹å¼ç¢¼ç”Ÿæˆèˆ‡å”åŠ©"><a href="#ç¨‹å¼ç¢¼ç”Ÿæˆèˆ‡å”åŠ©" class="headerlink" title="ç¨‹å¼ç¢¼ç”Ÿæˆèˆ‡å”åŠ©"></a>ç¨‹å¼ç¢¼ç”Ÿæˆèˆ‡å”åŠ©</h3><ul>
<li><p><a target="_blank" rel="noopener" href="https://openai.com/index/introducing-codex/"><strong>OpenAI Codex</strong></a></p>
<ul>
<li>é›²ç«¯è»Ÿé«”å·¥ç¨‹ä»£ç†ï¼Œå¯åŒæ™‚è™•ç†å¤šé …é–‹ç™¼ä»»å‹™</li>
<li>æ”¯æ´åŠŸèƒ½é–‹ç™¼ã€bug ä¿®å¾©ã€é‡æ§‹ç­‰</li>
</ul>
</li>
<li><p><a target="_blank" rel="noopener" href="https://docs.github.com/en/copilot"><strong>GitHub Copilot</strong></a></p>
<ul>
<li>ç›´æ¥åœ¨ç·¨è¼¯å™¨ä¸­æä¾›ç¨‹å¼ç¢¼å»ºè­°</li>
<li>å¯ç”Ÿæˆæ•´è¡Œæˆ–æ•´å€‹å‡½æ•¸</li>
<li>éœ€ä»˜è²»è¨‚é–±</li>
</ul>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.cursor.com/cn/features"><strong>Cursor</strong></a></p>
<ul>
<li>AI ç¨‹å¼ç¢¼ç·¨è¼¯å™¨</li>
<li>å°ˆæ³¨æ–¼æ™ºèƒ½ç¨‹å¼é–‹ç™¼é«”é©—</li>
<li>æ”¯æ´è‡ªç„¶èªè¨€èˆ‡ç¨‹å¼ç¢¼äº’å‹•</li>
</ul>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.anthropic.com/claude-code"><strong>Claude Code</strong></a></p>
<ul>
<li>å®˜æ–¹æ–‡ä»¶ï¼š<a target="_blank" rel="noopener" href="https://docs.anthropic.com/zh-TW/docs/claude-code/overview">https://docs.anthropic.com/zh-TW/docs/claude-code/overview</a></li>
<li>ç”¢å“é é¢ï¼š</li>
<li>Anthropic çš„å‘½ä»¤åˆ—å·¥å…·</li>
<li>è®“é–‹ç™¼è€…ç›´æ¥å¾çµ‚ç«¯å§”è¨—ç¨‹å¼é–‹ç™¼ä»»å‹™çµ¦ Claude</li>
<li>ç›®å‰é‚„åœ¨ç ”ç©¶é è¦½éšæ®µ</li>
</ul>
</li>
<li><p><a target="_blank" rel="noopener" href="https://augmentcode.com/"><strong>AugmentCode</strong></a></p>
<ul>
<li>AI é©…å‹•çš„ç¨‹å¼ç¢¼æœå°‹èˆ‡ç†è§£å¹³å°</li>
<li>æ”¯æ´è·¨å°ˆæ¡ˆã€è·¨èªè¨€çš„ç¨‹å¼ç¢¼æŸ¥è©¢ã€æ‘˜è¦èˆ‡è‡ªå‹•è§£é‡‹</li>
<li>é©åˆå¤§å‹å°ˆæ¡ˆç¶­è­·ã€å”ä½œèˆ‡çŸ¥è­˜å‚³æ‰¿</li>
</ul>
</li>
</ul>
<h3 id="æ‡‰ç”¨é–‹ç™¼"><a href="#æ‡‰ç”¨é–‹ç™¼" class="headerlink" title="æ‡‰ç”¨é–‹ç™¼"></a>æ‡‰ç”¨é–‹ç™¼</h3><ul>
<li><p><a target="_blank" rel="noopener" href="https://studio.firebase.google.com/"><strong>Firebase Studio</strong></a></p>
<ul>
<li>Google çš„æ‡‰ç”¨é–‹ç™¼å¹³å°</li>
<li>æ•´åˆå¤šç¨®å¾Œç«¯æœå‹™</li>
</ul>
</li>
<li><p><a target="_blank" rel="noopener" href="https://deepwiki.com/"><strong>DeepWiki</strong></a></p>
<ul>
<li>AI é©…å‹•çš„çŸ¥è­˜æœå°‹èˆ‡æ‘˜è¦å·¥å…·</li>
<li>æ”¯æ´å¤šèªè¨€ã€å¿«é€Ÿæ•´ç†ä¸»é¡Œé‡é»ï¼Œé©åˆç ”ç©¶ã€å­¸ç¿’ã€è³‡æ–™å½™æ•´</li>
<li>å¯ç”¨æ–¼æŠ€è¡“ã€å­¸è¡“ã€ç”¢æ¥­ç­‰å¤šç¨®é ˜åŸŸ</li>
</ul>
</li>
</ul>
<h2 id="é›œä¸ƒé›œå…«"><a href="#é›œä¸ƒé›œå…«" class="headerlink" title="é›œä¸ƒé›œå…«"></a>é›œä¸ƒé›œå…«</h2><h3 id="æ³•å¾‹å°ˆæ¥­-â€”-Harvey-AI"><a href="#æ³•å¾‹å°ˆæ¥­-â€”-Harvey-AI" class="headerlink" title="æ³•å¾‹å°ˆæ¥­ â€” Harvey AI"></a>æ³•å¾‹å°ˆæ¥­ â€” <a target="_blank" rel="noopener" href="https://www.harvey.ai/security"><strong>Harvey AI</strong></a></h3><ul>
<li>å°ˆé–€ç‚ºæ³•å¾‹è¡Œæ¥­è¨­è¨ˆçš„ AI åŠ©æ‰‹</li>
<li>å¼·èª¿å®‰å…¨æ€§å’Œåˆè¦æ€§ï¼ˆé‡è¦ï¼‰</li>
</ul>
<h3 id="æ–‡ä»¶ç ”ç©¶-â€”-NotebookLM"><a href="#æ–‡ä»¶ç ”ç©¶-â€”-NotebookLM" class="headerlink" title="æ–‡ä»¶ç ”ç©¶ â€” NotebookLM"></a>æ–‡ä»¶ç ”ç©¶ â€” <a target="_blank" rel="noopener" href="https://notebooklm.google.com/"><strong>NotebookLM</strong></a></h3><ul>
<li>Google çš„ç­†è¨˜å’Œç ”ç©¶å·¥å…·</li>
<li>å¯ä»¥åˆ†æå’Œç¸½çµæ–‡ä»¶</li>
<li>æ”¯æ´å¤šç¨®æ–‡ä»¶æ ¼å¼ä¸Šå‚³</li>
</ul>
<h3 id="NVIDIA-Container-Toolkit"><a href="#NVIDIA-Container-Toolkit" class="headerlink" title="NVIDIA Container Toolkit"></a><a target="_blank" rel="noopener" href="https://github.com/NVIDIA/nvidia-container-toolkit"><strong>NVIDIA Container Toolkit</strong></a></h3><ul>
<li>NVIDIA çš„å®¹å™¨åŒ–å·¥å…·åŒ…</li>
<li>ä¸»è¦ç”¨æ–¼ GPU åŠ é€Ÿçš„å®¹å™¨æ‡‰ç”¨</li>
</ul>
<h2 id="åƒè€ƒ"><a href="#åƒè€ƒ" class="headerlink" title="åƒè€ƒ"></a>åƒè€ƒ</h2><ul>
<li><a target="_blank" rel="noopener" href="https://claude.ai/chat/">https://claude.ai/chat/</a></li>
<li><a target="_blank" rel="noopener" href="https://openai.com/index/introducing-codex/">https://openai.com/index/introducing-codex/</a></li>
<li><a target="_blank" rel="noopener" href="https://hackmd.io/@fL8pq60EQsG3RplVzWfGWA/SkNhLpNGe">https://hackmd.io/@fL8pq60EQsG3RplVzWfGWA/SkNhLpNGe</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.github.com/en/copilot">https://docs.github.com/en/copilot</a></li>
<li><a target="_blank" rel="noopener" href="https://grok.com/">https://grok.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/NVIDIA/nvidia-container-toolkit?tab=security-ov-file">https://github.com/NVIDIA/nvidia-container-toolkit?tab=security-ov-file</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.anthropic.com/zh-TW/docs/claude-code/overview">https://docs.anthropic.com/zh-TW/docs/claude-code/overview</a></li>
<li><a target="_blank" rel="noopener" href="https://www.harvey.ai/security">https://www.harvey.ai/security</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cursor.com/cn/features">https://www.cursor.com/cn/features</a></li>
<li><a target="_blank" rel="noopener" href="https://studio.firebase.google.com/">https://studio.firebase.google.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://notebooklm.google.com/">https://notebooklm.google.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://www.anthropic.com/claude-code">https://www.anthropic.com/claude-code</a></li>
<li><a target="_blank" rel="noopener" href="https://gemini.google.com/">https://gemini.google.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://copilot.microsoft.com/">https://copilot.microsoft.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://www.perplexity.ai/">https://www.perplexity.ai/</a></li>
<li><a target="_blank" rel="noopener" href="https://www.notion.so/product/ai">https://www.notion.so/product/ai</a></li>
<li><a target="_blank" rel="noopener" href="https://chat.openai.com/">https://chat.openai.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://kimi.moonshot.cn/">https://kimi.moonshot.cn/</a></li>
<li><a target="_blank" rel="noopener" href="https://www.phind.com/">https://www.phind.com/</a></li>
</ul>
<h2 id="å°çµ"><a href="#å°çµ" class="headerlink" title="å°çµ"></a>å°çµ</h2><p>ç›®å‰ AI å·¥å…·ç”Ÿæ…‹ç³»çµ±ç™¼å±•è¿…é€Ÿï¼Œå„å®¶éƒ½åœ¨æ¶ä½”ä¸åŒçš„æ‡‰ç”¨å ´æ™¯ã€‚<br>å°è©±é¡å·¥å…·å·²ç¶“ç›¸ç•¶æˆç†Ÿï¼Œç¨‹å¼é–‹ç™¼è¼”åŠ©å·¥å…·ä¹Ÿè¶Šä¾†è¶Šå¯¦ç”¨ï¼Œå°ˆæ¥­é ˜åŸŸçš„ AI æ‡‰ç”¨å‰‡å‰›èµ·æ­¥ä½†æ½›åŠ›å·¨å¤§ã€‚<br>å°æˆ‘å€‹äººè€Œè¨€é‡å»ºè‡ªå·²çš„å·¥ä½œæµç¨‹æ•´åˆ AI å”åŠ©å·²ç¶“åˆ»ä¸å®¹ç·©</p>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2025/06/20/2025/ai-tools/" data-id="cme0z8sd800hq2sqz5yae94of" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2025/06/20/2025/ai-tools/#disqus_thread" class="article-comment-link">ç•™è¨€</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E7%AD%86%E8%A8%98/" rel="tag">ç”Ÿæ´»ç­†è¨˜</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2025/gitlab-cicd-to-registry" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/06/05/2025/gitlab-cicd-to-registry/" class="article-date">
  <time datetime="2025-06-05T11:11:43.000Z" itemprop="datePublished">2025-06-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/06/05/2025/gitlab-cicd-to-registry/"> [å¯¦ä½œç­†è¨˜] ç”¨ GitLab CI/CD å¯¦ç¾è‡ªå‹•æ‰“ Tagã€Build èˆ‡ Push Docker Image åˆ° Registry</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å‰æƒ…æè¦"><a href="#å‰æƒ…æè¦" class="headerlink" title="å‰æƒ…æè¦"></a>å‰æƒ…æè¦</h2><p>åœ¨å°ˆæ¡ˆè‡ªå‹•åŒ–éƒ¨ç½²æµç¨‹ä¸­ï¼Œè®“ CI&#x2F;CD pipeline è‡ªå‹•ç”¢ç”Ÿéå¢ tagã€build Docker image ä¸¦æ¨é€åˆ° GitLab Container Registryï¼Œæ˜¯ç¾ä»£ DevOps çš„å¸¸è¦‹éœ€æ±‚ã€‚</p>
<p>é€™ç¯‡æ–‡ç« è¨˜éŒ„æˆ‘åœ¨ GitLab CI&#x2F;CD ä¸Šå¯¦ä½œé€™ä¸€æµç¨‹çš„ç¶“é©—ã€‚</p>
<h3 id="ç›®æ¨™"><a href="#ç›®æ¨™" class="headerlink" title="ç›®æ¨™"></a>ç›®æ¨™</h3><ul>
<li><strong>è‡ªå‹•ç”¢ç”Ÿéå¢ tag</strong>ï¼ˆå¦‚ ver.1.0.1ï¼‰</li>
<li><strong>è‡ªå‹• build ä¸¦ push Docker image</strong>ï¼Œimage tag èˆ‡ git tag åŒæ­¥</li>
<li><strong>æ”¯æ´å¤šå°ˆæ¡ˆå…±ç”¨åŒä¸€ä»½ CI è¨­å®š</strong></li>
<li><strong>åƒ… main åˆ†æ”¯è§¸ç™¼</strong></li>
</ul>
<h2 id="å¯¦ä½œ"><a href="#å¯¦ä½œ" class="headerlink" title="å¯¦ä½œ"></a>å¯¦ä½œ</h2><ol>
<li><p>è®Šæ•¸æŠ½è±¡åŒ–ï¼Œæ”¯æ´å¤šå°ˆæ¡ˆå…±ç”¨</p>
<p> é¦–å…ˆï¼Œå°‡å°ˆæ¡ˆåç¨±ã€ç¾¤çµ„è·¯å¾‘ç­‰è³‡è¨ŠæŠ½æˆè®Šæ•¸ï¼Œæ–¹ä¾¿ä¸åŒå°ˆæ¡ˆè¤‡ç”¨ï¼š</p>
 <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">variables:</span></span><br><span class="line">  <span class="attr">PROJECT_NAME:</span> <span class="string">my-proj</span></span><br><span class="line">  <span class="attr">GROUP_PATH:</span> <span class="string">my-group</span></span><br><span class="line">  <span class="attr">REGISTRY_PATH:</span> <span class="string">registry.gitlab.com/$GROUP_PATH/$PROJECT_NAME</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å¤šéšæ®µ Dockerfile ç²¾ç°¡ image</p>
<p> ä½¿ç”¨ multi-stage buildï¼Œç¢ºä¿ production image åªåŒ…å«å¿…è¦æª”æ¡ˆèˆ‡ production dependenciesï¼š</p>
 <figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> node:<span class="number">23</span>-alpine AS builder</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> package*.json ./</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> npm install</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . .</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> npm run build</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> node:<span class="number">23</span>-alpine AS production</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> package*.json ./</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> npm install --production</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=builder /app/dist ./dist</span></span><br><span class="line"><span class="keyword">ENV</span> NODE_ENV=production</span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">3000</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;npm&quot;</span>, <span class="string">&quot;start&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<p> å»ºè­°æ­é… .dockerignore é¿å…å¤šé¤˜æª”æ¡ˆé€²å…¥ imageã€‚</p>
</li>
<li><p>GitLab CI&#x2F;CD Pipeline è¨­å®šåªåœ¨ main åˆ†æ”¯åŸ·è¡Œ</p>
 <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">if:</span> <span class="string">&#x27;$CI_COMMIT_BRANCH == &quot;main&quot;&#x27;</span></span><br><span class="line">    <span class="attr">when:</span> <span class="string">always</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">when:</span> <span class="string">never</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>è‡ªå‹•ç”¢ç”Ÿéå¢ tag</p>
<ol>
<li>æ¡ç”¨ major.minor.patch çš„ç‰ˆæœ¬è¦å‰‡ï¼Œå•Ÿå§‹ç‰ˆè™Ÿç‚º ver.1.0.0</li>
<li>å…ˆåŒæ­¥ remote tagï¼Œé¿å…æœ¬åœ°æ®˜ç•™å½±éŸ¿</li>
<li>å–å¾—æœ€å¤§ patch è™Ÿï¼Œè‡ªå‹• +1</li>
<li>æª¢æŸ¥ tag æ˜¯å¦å·²å­˜åœ¨ï¼Œç¢ºä¿å”¯ä¸€</li>
</ol>
 <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">fetch</span> <span class="string">--prune</span> <span class="string">--tags</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">tag</span> <span class="string">-l</span> <span class="string">|</span> <span class="string">xargs</span> <span class="string">-n</span> <span class="number">1</span> <span class="string">git</span> <span class="string">tag</span> <span class="string">-d</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">fetch</span> <span class="string">--tags</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">|</span></span><br><span class="line"><span class="string">    prefix=&quot;ver.&quot;</span></span><br><span class="line"><span class="string">    max_patch=$(git tag -l &quot;$&#123;prefix&#125;[0-9]*.[0-9]*.[0-9]*&quot; | grep -oE &#x27;[0-9]+\.[0-9]+\.[0-9]+&#x27; | sort -t. -k1,1nr -k2,2nr -k3,3nr | head -n1 | awk -F. &#x27;&#123;print $3&#125;&#x27;)</span></span><br><span class="line"><span class="string">    if [ -z &quot;$max_patch&quot; ]; then</span></span><br><span class="line"><span class="string">      new_tag=&quot;$&#123;prefix&#125;1.0.0&quot;</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">      major=$(git tag -l &quot;$&#123;prefix&#125;[0-9]*.[0-9]*.[0-9]*&quot; | grep -oE &#x27;[0-9]+\.[0-9]+\.[0-9]+&#x27; | sort -t. -k1,1nr -k2,2nr -k3,3nr | head -n1 | cut -d. -f1)</span></span><br><span class="line"><span class="string">      minor=$(git tag -l &quot;$&#123;prefix&#125;[0-9]*.[0-9]*.[0-9]*&quot; | grep -oE &#x27;[0-9]+\.[0-9]+\.[0-9]+&#x27; | sort -t. -k1,1nr -k2,2nr -k3,3nr | head -n1 | cut -d. -f2)</span></span><br><span class="line"><span class="string">      patch=$((max_patch + 1))</span></span><br><span class="line"><span class="string">      new_tag=&quot;$&#123;prefix&#125;$&#123;major&#125;.$&#123;minor&#125;.$&#123;patch&#125;&quot;</span></span><br><span class="line"><span class="string">    fi</span></span><br><span class="line"><span class="string">    # ç¢ºä¿ tag å”¯ä¸€</span></span><br><span class="line"><span class="string">    while git rev-parse &quot;$new_tag&quot; &gt;/dev/null 2&gt;&amp;1; do</span></span><br><span class="line"><span class="string">      patch=$((patch + 1))</span></span><br><span class="line"><span class="string">      new_tag=&quot;$&#123;prefix&#125;$&#123;major&#125;.$&#123;minor&#125;.$&#123;patch&#125;&quot;</span></span><br><span class="line"><span class="string">    done</span></span><br><span class="line"><span class="string">    echo &quot;new tag is $new_tag&quot;</span></span><br><span class="line"><span class="string">    echo &quot;NEW_TAG=$new_tag&quot; &gt;&gt; build.env</span></span><br><span class="line"><span class="string"></span>  <span class="bullet">-</span> <span class="string">source</span> <span class="string">build.env</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>è‡ªå‹•æ‰“ tag ä¸¦ push</p>
 <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">&quot;rd@example.com&quot;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">&quot;gitlab-runner&quot;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">git</span> <span class="string">remote</span> <span class="string">set-url</span> <span class="string">origin</span> <span class="string">https://gitlab-runner:$RAG_CICD_TOKEN@gitlab.com/$GITLAB_REPO.git</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">git</span> <span class="string">tag</span> <span class="string">&quot;$NEW_TAG&quot;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">git</span> <span class="string">push</span> <span class="string">origin</span> <span class="string">&quot;$NEW_TAG&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Logingã€Build &amp; Push Docker image</p>
 <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">docker</span> <span class="string">login</span> <span class="string">-u</span> <span class="string">&quot;$CI_REGISTRY_USER&quot;</span> <span class="string">-p</span> <span class="string">&quot;$CI_REGISTRY_PASSWORD&quot;</span> <span class="string">$CI_REGISTRY</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">docker</span> <span class="string">build</span> <span class="string">-t</span> <span class="string">$REGISTRY_PATH:$NEW_TAG</span> <span class="string">.</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">docker</span> <span class="string">push</span> <span class="string">$REGISTRY_PATH:$NEW_TAG</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Docker-in-Docker è¨­å®š</p>
<p> <code>DOCKER_TLS_CERTDIR=&#39;&#39;</code> æ˜¯ç‚ºäº†è®“ dind é—œé–‰ TLSï¼Œè®“ CI job å¯ä»¥ç›´æ¥ç”¨æ˜æ–‡ TCP é€£ç·š docker daemonï¼Œé¿å… TLS æ†‘è­‰éŒ¯èª¤ã€‚</p>
 <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">docker:dind</span></span><br><span class="line"><span class="attr">variables:</span></span><br><span class="line">  <span class="attr">DOCKER_HOST:</span> <span class="string">tcp://docker:2375/</span></span><br><span class="line">  <span class="attr">DOCKER_TLS_CERTDIR:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p> <a target="_blank" rel="noopener" href="https://about.gitlab.com/blog/docker-in-docker-with-docker-19-dot-03/">å¯ä»¥åƒè€ƒæœ¬æ–‡</a></p>
</li>
<li><p>ä¸€äº›è¦æ³¨æ„çš„å°å•é¡Œ</p>
</li>
</ol>
<ul>
<li><p><strong>DOCKER_TLS_CERTDIR ä¸èƒ½ä¸è¨­å®šã€‚</strong></p>
</li>
<li><p><strong>tag è·³è™Ÿæˆ–é‡è¤‡ï¼Ÿ</strong><br>è«‹å‹™å¿…å…ˆåˆªé™¤æœ¬åœ° tag å† fetch remote tagã€‚</p>
</li>
<li><p><strong>ç„¡æ³• push tagï¼Ÿ</strong><br>è«‹ç¢ºèª Deploy Token&#x2F;PAT æ¬Šé™ï¼Œä¸” remote url æ­£ç¢ºã€‚</p>
</li>
<li><p><strong>docker build å¤±æ•—ï¼Œdaemon é€£ä¸åˆ°ï¼Ÿ</strong><br>è«‹æª¢æŸ¥ã€€gitlab runner æ˜¯å¦æœ‰ privileged modeï¼Œä¸” dind æœ‰å•Ÿå‹•ã€‚<br>åœ¨<code>/etc/gitlab-runner/config.toml</code>ä¸­</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[[runners]]</span></span><br><span class="line">  <span class="attr">name</span> = <span class="string">&quot;docker-runner&quot;</span></span><br><span class="line">  <span class="attr">executor</span> = <span class="string">&quot;docker&quot;</span></span><br><span class="line">  <span class="section">[runners.docker]</span></span><br><span class="line">    <span class="attr">privileged</span> = <span class="literal">true</span></span><br><span class="line">    ...</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="å°çµ"><a href="#å°çµ" class="headerlink" title="å°çµ"></a>å°çµ</h2><p>å®Œæ•´ .gitlab-ci.yml ç¯„ä¾‹å¦‚ä¸‹ï¼Œ</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">stages:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">build</span></span><br><span class="line"><span class="attr">variables:</span></span><br><span class="line">  <span class="attr">PROJECT_NAME:</span> <span class="string">my-proj</span></span><br><span class="line">  <span class="attr">GROUP_PATH:</span> <span class="string">my-group</span></span><br><span class="line">  <span class="attr">REGISTRY_PATH:</span> <span class="string">registry.gitlab.com/$GROUP_PATH/$PROJECT_NAME</span></span><br><span class="line"></span><br><span class="line"><span class="attr">build-image:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">docker:latest</span></span><br><span class="line">  <span class="attr">services:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker:dind</span></span><br><span class="line">  <span class="attr">variables:</span></span><br><span class="line">    <span class="attr">DOCKER_HOST:</span> <span class="string">tcp://docker:2375/</span></span><br><span class="line">    <span class="attr">DOCKER_TLS_CERTDIR:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">build</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">if:</span> <span class="string">&#x27;$CI_COMMIT_BRANCH == &quot;main&quot;&#x27;</span></span><br><span class="line">      <span class="attr">when:</span> <span class="string">always</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">when:</span> <span class="string">never</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">git</span> <span class="string">fetch</span> <span class="string">--prune</span> <span class="string">--tags</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">git</span> <span class="string">tag</span> <span class="string">-l</span> <span class="string">|</span> <span class="string">xargs</span> <span class="string">-n</span> <span class="number">1</span> <span class="string">git</span> <span class="string">tag</span> <span class="string">-d</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">git</span> <span class="string">fetch</span> <span class="string">--tags</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">|</span></span><br><span class="line"><span class="string">      prefix=&quot;ver.&quot;</span></span><br><span class="line"><span class="string">      max_patch=$(git tag -l &quot;$&#123;prefix&#125;[0-9]*.[0-9]*.[0-9]*&quot; | grep -oE &#x27;[0-9]+\.[0-9]+\.[0-9]+&#x27; | sort -t. -k1,1nr -k2,2nr -k3,3nr | head -n1 | awk -F. &#x27;&#123;print $3&#125;&#x27;)</span></span><br><span class="line"><span class="string">      if [ -z &quot;$max_patch&quot; ]; then</span></span><br><span class="line"><span class="string">        new_tag=&quot;$&#123;prefix&#125;1.0.0&quot;</span></span><br><span class="line"><span class="string">      else</span></span><br><span class="line"><span class="string">        major=$(git tag -l &quot;$&#123;prefix&#125;[0-9]*.[0-9]*.[0-9]*&quot; | grep -oE &#x27;[0-9]+\.[0-9]+\.[0-9]+&#x27; | sort -t. -k1,1nr -k2,2nr -k3,3nr | head -n1 | cut -d. -f1)</span></span><br><span class="line"><span class="string">        minor=$(git tag -l &quot;$&#123;prefix&#125;[0-9]*.[0-9]*.[0-9]*&quot; | grep -oE &#x27;[0-9]+\.[0-9]+\.[0-9]+&#x27; | sort -t. -k1,1nr -k2,2nr -k3,3nr | head -n1 | cut -d. -f2)</span></span><br><span class="line"><span class="string">        patch=$((max_patch + 1))</span></span><br><span class="line"><span class="string">        new_tag=&quot;$&#123;prefix&#125;$&#123;major&#125;.$&#123;minor&#125;.$&#123;patch&#125;&quot;</span></span><br><span class="line"><span class="string">      fi</span></span><br><span class="line"><span class="string">      while git rev-parse &quot;$new_tag&quot; &gt;/dev/null 2&gt;&amp;1; do</span></span><br><span class="line"><span class="string">        patch=$((patch + 1))</span></span><br><span class="line"><span class="string">        new_tag=&quot;$&#123;prefix&#125;$&#123;major&#125;.$&#123;minor&#125;.$&#123;patch&#125;&quot;</span></span><br><span class="line"><span class="string">      done</span></span><br><span class="line"><span class="string">      echo &quot;new tag is $new_tag&quot;</span></span><br><span class="line"><span class="string">      echo &quot;NEW_TAG=$new_tag&quot; &gt;&gt; build.env</span></span><br><span class="line"><span class="string"></span>    <span class="bullet">-</span> <span class="string">source</span> <span class="string">build.env</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">&quot;rd@example.com&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">&quot;rag-cicd&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">git</span> <span class="string">remote</span> <span class="string">set-url</span> <span class="string">origin</span> <span class="string">https://rag-cicd:$RAG_CICD_TOKEN@gitlab.com/$GITLAB_REPO.git</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">git</span> <span class="string">tag</span> <span class="string">&quot;$NEW_TAG&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">git</span> <span class="string">push</span> <span class="string">origin</span> <span class="string">&quot;$NEW_TAG&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker</span> <span class="string">login</span> <span class="string">-u</span> <span class="string">&quot;$CI_REGISTRY_USER&quot;</span> <span class="string">-p</span> <span class="string">&quot;$CI_REGISTRY_PASSWORD&quot;</span> <span class="string">$CI_REGISTRY</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker</span> <span class="string">build</span> <span class="string">-t</span> <span class="string">$REGISTRY_PATH:$NEW_TAG</span> <span class="string">.</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">docker</span> <span class="string">push</span> <span class="string">$REGISTRY_PATH:$NEW_TAG</span></span><br></pre></td></tr></table></figure>

<p>é€™æ¨£è¨­å®šå¾Œï¼Œæ¯æ¬¡ main åˆ†æ”¯æœ‰ commitï¼ŒCI&#x2F;CD å°±æœƒè‡ªå‹•ç”¢ç”Ÿæ–° tagã€build ä¸¦æ¨é€å°æ‡‰ç‰ˆæœ¬çš„ Docker image è®“å¤§å®¶å…±ç”¨ã€‚</p>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2025/06/05/2025/gitlab-cicd-to-registry/" data-id="cme0z8sdf00ii2sqz66z46jz2" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2025/06/05/2025/gitlab-cicd-to-registry/#disqus_thread" class="article-comment-link">ç•™è¨€</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">å¯¦ä½œç­†è¨˜</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2025/gcp-internal-lb-serivce" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/06/04/2025/gcp-internal-lb-serivce/" class="article-date">
  <time datetime="2025-06-04T03:42:01.000Z" itemprop="datePublished">2025-06-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/06/04/2025/gcp-internal-lb-serivce/"> [å¯¦ä½œç­†è¨˜] GCP Cloud Run ç§æœ‰åŒ–éƒ¨ç½²ï¼šé€é Load Balancer å¯¦ç¾å…§ç¶²å­˜å–èˆ‡ IP é™åˆ¶</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="å‰æƒ…æè¦"><a href="#å‰æƒ…æè¦" class="headerlink" title="å‰æƒ…æè¦"></a>å‰æƒ…æè¦</h2><p>æˆ‘ç”¨ cloud run å»ºç«‹ä¸€å€‹ api ä¸¦ä¸”æœ‰ webhook çš„åŠŸèƒ½<br>ä¸¦ä¸”å¸Œæœ›æä¾›ä¸€å€‹å°å¤–ç¶²å€çµ¦å®¢æˆ¶ï¼Œè€Œä¸æ˜¯ <code>*.run.app</code> çµå°¾çš„ç¶²å€ã€‚  </p>
<p>åœ¨æŸäº›å ´æ™¯ä¸‹ï¼Œæˆ‘å€‘ä¸å¸Œæœ› GCP Cloud Run å°å¤–æš´éœ²ï¼Œ</p>
<p>ä¾‹å¦‚å…§éƒ¨ API Gateway å‘¼å«ã€CI&#x2F;CD ç³»çµ±å…§éƒ¨æµç¨‹ã€æˆ–åƒ…æä¾›çµ¦ VPC å…§ç‰¹å®šæœå‹™å­˜å–çš„å¾®æœå‹™ã€‚</p>
<p>é€™æ¬¡çš„ä¾‹å­æ˜¯å¸Œæœ›åŠ ä¸Š IP çš„é˜²è­·ï¼Œåªå…è¨±ç‰¹å®šçš„ IP å‘¼å«ï¼Œé€™æ™‚å€™å°±æœƒå¸Œæœ›ï¼š</p>
<ul>
<li><p>Cloud Run ä¸å°å¤–å…¬é–‹ï¼ˆPrivateï¼‰</p>
</li>
<li><p>åƒ…å…è¨± å…§ç¶² IP æˆ– Internal Load Balancer å­˜å–</p>
</li>
</ul>
<p>çœ‹ä¼¼ç°¡å–®ï¼Œä½† GCP Cloud Run åŸç”Ÿæ˜¯ç„¡ä¼ºæœå™¨æ¶æ§‹ï¼Œé è¨­å°±æ˜¯ã€Œå…¬é–‹ç¶²å€ã€ï¼Œè¦è®“å®ƒåªå°å…§éƒ¨å¯è¦‹ï¼Œéœ€è¦æ­é…ä¸€äº› GCP ç¶²è·¯å…ƒä»¶æ“ä½œã€‚é€™ç¯‡ç­†è¨˜æœƒå¸¶ä½ é€æ­¥è¨­å®šï¼Œä¸¦é¿é–‹ä¸€äº›å¸¸è¦‹å‘æ´ã€‚</p>
<h2 id="å¯¦ä½œè¨˜éŒ„"><a href="#å¯¦ä½œè¨˜éŒ„" class="headerlink" title="å¯¦ä½œè¨˜éŒ„"></a>å¯¦ä½œè¨˜éŒ„</h2><ol>
<li><p>å°‡ Cloud Run è¨­ç‚ºã€Œä¸å…¬é–‹ã€<br> é è¨­ Cloud Run æ˜¯å…¬é–‹çš„ï¼Œè¦æ”¹ç‚ºã€Œåªæœ‰æˆæ¬Šçš„ä¸»é«”å¯ä»¥å­˜å–ã€ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gcloud run services update YOUR_SERVICE \</span><br><span class="line">  --ingress internal-and-cloud-load-balancing \</span><br><span class="line">  --allow-unauthenticated \</span><br><span class="line">  --region YOUR_REGION \</span><br><span class="line">  --project YOUR_PROJECT</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p> é€™æ¨£åªæœ‰å…§éƒ¨çš„ç¶²è·¯æ‰èƒ½å‘¼å« Cloud Runã€‚</p>
<p> ä¹Ÿå¯ä»¥é€é GUI è¨­å®šï¼Œé¸æ“‡ä½ çš„ Cloud Run &gt;  </p>
<p> Networking &gt; Ingress é¸ internal å‹¾é¸ Allow Traffic from external Application Load Balancers</p>
<p> å¯ä»¥<a target="_blank" rel="noopener" href="https://cloud.google.com/run/docs/securing/ingress#gcloud">åƒè€ƒ</a></p>
</li>
<li><p>å»ºç«‹ Serverless NEGï¼ˆNetwork Endpoint Groupï¼‰<br>å¯ä»¥ç”¨ GUI å»ºç«‹ Loading Blancer &gt;  </p>
<p>Edit &gt; Backend configuration &gt;  </p>
<p>ä¸‹æ‹‰é¸å–®é¸ Create backend service &gt;  </p>
<p>Backend Type é¸ Serverless network endpoint group  </p>
<p><em>å› ç‚ºæ˜¯ Cloud Run</em></p>
</li>
<li><p>è¨­å®š Loading Blancer çš„ Backend Serviceâ€<br>LB &gt; Edit backend service</p>
<p>Regions é¸æ“‡ Cloud Run æ‰€åœ¨çš„ Region</p>
<p>é è¨­æœƒæœ‰ä¸€çµ„ Security Policy</p>
<p>Cloud Armor policies &gt; æ‰¾åˆ°é€™çµ„ Policy å¯ä»¥ä½œæ›´ç´°ç·»çš„è¨­å®šï¼ŒEx:æŒ‡å®š Ip å‘¼å«</p>
</li>
<li><p>Loading Blancer URL Map<br>é€™æ˜¯ä¸€å€‹é¡å¤–çš„è¨­å®šï¼Œæƒ…å¢ƒæ˜¯åŸæœ¬æˆ‘å·²æœ‰ä¸€çµ„ Domain èˆ‡ Backend Service  </p>
<p>ä¸¦ä¸”å·²ç¶“è¨­å®šåœ¨ LB ä¸Šé¢ï¼Œåœ¨æƒ³è¦å…±ç”¨ Domain çš„æƒ…æ³ä¸‹ï¼Œæˆ‘éœ€è¦è¨­å®š URL Map</p>
<p>ä¿ç•™ä¸€çµ„ Path è®“æµé‡æ‰“å‘ Cloud Runï¼Œä½†ä»ä¿ç•™å…¶ä»– API å¯ä»¥ç”¨</p>
<p>LB &gt; Edit &gt; Routing rules &gt; Mode é¸æ“‡ Advanced host and path rule  </p>
<p>æ‰¾åˆ°æŒ‡å®šçš„ Domainï¼Œè¨­å®šåƒè€ƒå¦‚ä¸‹</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">defaultService:</span> <span class="string">projects/my-gcp-proj/global/backendServices/my-api</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">path-matcher-7</span></span><br><span class="line"><span class="attr">pathRules:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">paths:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/api/v1/*</span></span><br><span class="line">    <span class="attr">service:</span> <span class="string">projects/my-gcp-proj/global/backendServices/my-api</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">paths:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/cloud-run-app/*</span></span><br><span class="line">    <span class="attr">service:</span> <span class="string">projects/my-gcp-proj/global/backendServices/my-cloud-run-app</span></span><br><span class="line">    <span class="attr">routeAction:</span></span><br><span class="line">      <span class="attr">urlRewrite:</span></span><br><span class="line">        <span class="attr">pathPrefixRewrite:</span> <span class="string">/</span></span><br></pre></td></tr></table></figure>

<p> ä»¥ä¸Šè¨­å®šç°¡å–®èªªæ˜å¦‚ä¸‹ï¼Œ</p>
<ul>
<li>&#x2F;api&#x2F;v1&#x2F;*ï¼šå°å‘ my-apiï¼Œä¿ç•™åŸå§‹è·¯å¾‘ã€‚</li>
<li>&#x2F;cloud-run-app&#x2F;*ï¼šå°å‘ my-cloud-run-appï¼Œä¸¦å°‡è·¯å¾‘é‡å¯«ç‚ºå»é™¤ &#x2F;cloud-run-app å‰ç¶´ã€‚</li>
<li>å…¶ä»–è·¯å¾‘ï¼šé è¨­å°å‘ my-apiã€‚</li>
</ul>
<p> é€™æ¨£è¨­å®šå¯è®“å¤šå€‹æœå‹™å…±ç”¨åŒä¸€å€‹è² è¼‰å¹³è¡¡å™¨ä¸¦æ”¯æ´ä¹¾æ·¨çš„ URL ç®¡ç†ã€‚</p>
</li>
</ol>
<h2 id="åƒè€ƒ"><a href="#åƒè€ƒ" class="headerlink" title="åƒè€ƒ"></a>åƒè€ƒ</h2><ul>
<li><a target="_blank" rel="noopener" href="https://webhook.site/">å¥½ç”¨æ¸¬è©¦ Callback çš„å·¥å…·</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.google.com/run/docs/securing/ingress#gcloud">Restrict network ingress for Cloud Run</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2025/06/04/2025/gcp-internal-lb-serivce/" data-id="cme0z8sdf00if2sqz24fgf755" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2025/06/04/2025/gcp-internal-lb-serivce/#disqus_thread" class="article-comment-link">ç•™è¨€</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" rel="tag">å­¸ç¿’ç­†è¨˜</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2025/vim_setting" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/05/24/2025/vim_setting/" class="article-date">
  <time datetime="2025-05-24T05:06:05.000Z" itemprop="datePublished">2025-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/05/24/2025/vim_setting/"> [å¯¦ä½œç­†è¨˜] æˆ‘çš„ Vim è¨­å®š</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æˆ‘çš„ Vim å¿«æ·éµè¨­å®šç¸½è¡¨ï¼Œ<strong>IdeaVim èˆ‡ JetBrain</strong>ï¼š</p>
<hr>
<table>
<thead>
<tr>
<th>å¿«æ·éµ</th>
<th>æ¨¡å¼</th>
<th>åŠŸèƒ½èªªæ˜</th>
<th>IdeaVim è¨­å®šå¯«æ³•</th>
</tr>
</thead>
<tbody><tr>
<td>zcc</td>
<td>n</td>
<td>æ¸…é™¤æ‰€æœ‰è‡ªè¨‚æ˜ å°„</td>
<td><code>nmap zcc :mapclear!&lt;CR&gt;</code></td>
</tr>
<tr>
<td>zso</td>
<td>n</td>
<td>é‡æ–°è¼‰å…¥ä¸» vimrc</td>
<td><code>nmap zso :source ~/_ideavimrc&lt;CR&gt;</code></td>
</tr>
<tr>
<td>zf</td>
<td>n&#x2F;i</td>
<td>è·³åˆ°å®šç¾©ï¼ˆGoto Declarationï¼‰</td>
<td><code>nmap zf :action GotoDeclaration&lt;CR&gt;</code><br><code>imap zf &lt;Esc&gt;:action GotoDeclaration&lt;CR&gt;</code></td>
</tr>
<tr>
<td>zrc, zo</td>
<td>n&#x2F;i</td>
<td>æ ¼å¼åŒ–ç¨‹å¼ç¢¼ï¼ˆReformat Codeï¼‰</td>
<td><code>nmap zrc :action ReformatCode&lt;CR&gt;</code><br><code>imap zrc &lt;Esc&gt;:action ReformatCode&lt;CR&gt;</code><br><code>nmap zo :action ReformatCode&lt;CR&gt;</code></td>
</tr>
<tr>
<td>zk</td>
<td>n&#x2F;i</td>
<td>è¿”å›ï¼ˆBackï¼‰</td>
<td><code>nmap zk :action Back&lt;CR&gt;</code><br><code>imap zk &lt;Esc&gt;:action Back&lt;CR&gt;</code></td>
</tr>
<tr>
<td>zj</td>
<td>n&#x2F;i</td>
<td>AceActionï¼ˆè‡ªè¨‚å‹•ä½œï¼‰</td>
<td><code>nmap zj :action AceAction&lt;CR&gt;</code><br><code>imap zj &lt;Esc&gt;:action AceAction&lt;CR&gt;</code></td>
</tr>
<tr>
<td>ztt</td>
<td>n&#x2F;i</td>
<td>è¤‡è£½å€å¡Šä¸¦æ ¼å¼åŒ–ï¼ˆè‡ªè¨‚å·¨é›†ï¼‰</td>
<td><code>nmap ztt y?[F&lt;CR&gt;/&#123;&lt;CR&gt;%o&lt;Esc&gt;p:action ReformatCode&lt;CR&gt;</code><br><code>imap ztt &lt;Esc&gt;y?[F&lt;CR&gt;/&#123;&lt;CR&gt;%o&lt;Esc&gt;p:action ReformatCode&lt;CR&gt;</code></td>
</tr>
<tr>
<td>zn</td>
<td>n&#x2F;i</td>
<td>è·³åˆ°ä¸Šä¸€å€‹éŒ¯èª¤ï¼ˆGoto Previous Errorï¼‰</td>
<td><code>nmap zn :action GotoPreviousError&lt;CR&gt;</code><br><code>imap zn &lt;Esc&gt;:action GotoPreviousError&lt;CR&gt;</code></td>
</tr>
<tr>
<td>zrr</td>
<td>n&#x2F;i</td>
<td>é‡æ–°å‘½åï¼ˆRename Elementï¼‰</td>
<td><code>nmap zrr :action RenameElement&lt;CR&gt;</code><br><code>imap zrr &lt;Esc&gt;:action RenameElement&lt;CR&gt;</code></td>
</tr>
<tr>
<td>zra</td>
<td>n&#x2F;i</td>
<td>åŸ·è¡Œæ‰€æœ‰å–®å…ƒæ¸¬è©¦</td>
<td><code>nmap zra :action RiderUnitTestRunSolutionAction&lt;CR&gt;</code><br><code>imap zra &lt;Esc&gt;:action RiderUnitTestRunSolutionAction&lt;CR&gt;</code></td>
</tr>
<tr>
<td>zrm</td>
<td>n&#x2F;v</td>
<td>èƒå–æ–¹æ³•ï¼ˆExtract Methodï¼‰</td>
<td><code>nmap zrm :action ExtractMethod&lt;CR&gt;</code><br><code>vmap zrm :action ExtractMethod&lt;CR&gt;</code></td>
</tr>
<tr>
<td>zri</td>
<td>n</td>
<td>Inlineï¼ˆå…§è¯è®Šæ•¸&#x2F;æ–¹æ³•ï¼‰</td>
<td><code>map zri :action Inline&lt;CR&gt;&lt;Esc&gt;</code></td>
</tr>
<tr>
<td>zrp</td>
<td>n</td>
<td>Introduce Parameterï¼ˆå¼•å…¥åƒæ•¸ï¼‰</td>
<td><code>map zrp :action IntroduceParameter&lt;CR&gt;</code></td>
</tr>
<tr>
<td>zrv</td>
<td>n</td>
<td>Introduce Variableï¼ˆå¼•å…¥è®Šæ•¸ï¼‰</td>
<td><code>map zrv :action IntroduceVariable&lt;CR&gt;</code></td>
</tr>
<tr>
<td>zrf</td>
<td>n</td>
<td>Introduce Fieldï¼ˆå¼•å…¥æ¬„ä½ï¼‰</td>
<td><code>map zrf :action IntroduceField&lt;CR&gt;</code></td>
</tr>
<tr>
<td>,m</td>
<td>n</td>
<td>é¡¯ç¤ºæª”æ¡ˆçµæ§‹</td>
<td><code>nmap ,m :action FileStructurePopup&lt;CR&gt;</code></td>
</tr>
<tr>
<td>zrt</td>
<td>n</td>
<td>æœ€è¿‘æª”æ¡ˆ</td>
<td><code>nmap zrt :action RecentFiles&lt;CR&gt;</code></td>
</tr>
<tr>
<td>zgc</td>
<td>n</td>
<td>é–‹å•Ÿ Commit å·¥å…·è¦–çª—</td>
<td><code>nmap zgc :action ActivateCommitToolWindow&lt;CR&gt;</code></td>
</tr>
<tr>
<td>zx</td>
<td>n</td>
<td>å¿«é€Ÿé‡æ§‹é¸å–®</td>
<td><code>nmap zx :action Refactorings.QuickListPopupAction &lt;CR&gt;</code></td>
</tr>
<tr>
<td>zae</td>
<td>n&#x2F;i</td>
<td>æ’å…¥ Assert.Equal(,);</td>
<td><code>nmap zae aAssert.Equal(,);&lt;Esc&gt;T(i</code><br><code>imap zae Assert.Equal(,);&lt;Esc&gt;T(i</code></td>
</tr>
<tr>
<td>zrs</td>
<td>n</td>
<td>æ–°å¢ class ä¸¦æ ¼å¼åŒ–ï¼ˆè‡ªè¨‚å·¨é›†ï¼‰</td>
<td><code>nmap zrs &quot;add? class&lt;CR&gt;2w&quot;bywjopublic &lt;Esc&gt;&quot;bpa()&lt;CR&gt;&#123;&lt;Esc&gt;&quot;apo&#125;&lt;Esc&gt;:action ReformatCode&lt;CR&gt;</code></td>
</tr>
<tr>
<td>z;</td>
<td>n&#x2F;i</td>
<td>è¡Œå°¾åŠ åˆ†è™Ÿ</td>
<td><code>nmap z; $a;&lt;Esc&gt;</code><br><code>imap z; &lt;Esc&gt;$a;</code></td>
</tr>
<tr>
<td>,p, ,P</td>
<td>n</td>
<td>é»è²¼æš«å­˜å€ 0 çš„å…§å®¹</td>
<td><code>nmap ,p &quot;0p</code><br><code>nmap ,P &quot;0P</code></td>
</tr>
<tr>
<td>z,p, z,P</td>
<td>i</td>
<td>æ’å…¥æš«å­˜å€ 0 çš„å…§å®¹</td>
<td><code>imap z,p &lt;Esc&gt;&quot;0pa</code><br><code>imap z,P &lt;Esc&gt;&quot;0Pa</code></td>
</tr>
<tr>
<td>z,</td>
<td>n</td>
<td>é¸å–æ‹¬è™Ÿå…§å…§å®¹ï¼ˆvi)ï¼‰</td>
<td><code>:nmap z, vi)</code></td>
</tr>
<tr>
<td>z.</td>
<td>n</td>
<td>é¸å–å¤§æ‹¬è™Ÿå…§å…§å®¹ï¼ˆvi}ï¼‰</td>
<td><code>:nmap z. vi&#125;</code></td>
</tr>
<tr>
<td><Esc></td>
<td>v</td>
<td>é€£çºŒå¤šæ¬¡é›¢é–‹é¸å–æ¨¡å¼</td>
<td><code>:vmap &lt;Esc&gt; &lt;Esc&gt;&lt;Esc&gt;&lt;Esc&gt;</code></td>
</tr>
<tr>
<td>jj</td>
<td>i</td>
<td>é€€å‡ºæ’å…¥æ¨¡å¼</td>
<td><code>:imap jj &lt;Esc&gt;</code></td>
</tr>
<tr>
<td><BS></td>
<td>n</td>
<td>åœ¨æ™®é€šæ¨¡å¼ä¸‹æ’å…¥ Backspace</td>
<td><code>:nmap &lt;BS&gt; a&lt;BS&gt;</code></td>
</tr>
<tr>
<td>zh</td>
<td>n&#x2F;i</td>
<td>è·³åˆ°è¡Œé¦–</td>
<td><code>:nmap zh ^</code><br><code>:imap zh &lt;Esc&gt;^i</code></td>
</tr>
<tr>
<td>zl</td>
<td>n&#x2F;i</td>
<td>è·³åˆ°è¡Œå°¾</td>
<td><code>:nmap zl $</code><br><code>:imap zl &lt;End&gt;</code></td>
</tr>
<tr>
<td>hc</td>
<td>n</td>
<td>Ctrl+C</td>
<td><code>:nmap hc ^C</code></td>
</tr>
<tr>
<td>zb</td>
<td>n&#x2F;v</td>
<td>å–®å­—å–ä»£</td>
<td><code>:nmap zb bcw</code><br><code>:vmap zb &lt;Esc&gt;bcw</code></td>
</tr>
<tr>
<td>zd</td>
<td>i</td>
<td>åˆªé™¤ç•¶å‰è¡Œ</td>
<td><code>:imap zd &lt;Esc&gt;dd</code></td>
</tr>
<tr>
<td>j, k</td>
<td>n</td>
<td>è»Ÿæ›è¡Œç§»å‹•</td>
<td><code>nmap j gj</code><br><code>nmap k gk</code></td>
</tr>
<tr>
<td>qq</td>
<td>n</td>
<td>å¼·åˆ¶é—œé–‰æª”æ¡ˆ</td>
<td><code>nmap qq ZQ</code></td>
</tr>
<tr>
<td>zq</td>
<td>n</td>
<td>å„²å­˜ä¸¦é—œé–‰æª”æ¡ˆ</td>
<td><code>nmap zq :wq&lt;CR&gt;</code></td>
</tr>
<tr>
<td><C-x></td>
<td>i</td>
<td>åˆªé™¤ç•¶å‰è¡Œ</td>
<td><code>:imap &lt;C-x&gt; &lt;Esc&gt;dd</code></td>
</tr>
<tr>
<td><C-a></td>
<td>i</td>
<td>å…¨é¸</td>
<td><code>:imap &lt;C-a&gt; &lt;Esc&gt;ma&lt;CR&gt;ggVG</code></td>
</tr>
<tr>
<td>,i, ,a</td>
<td>n</td>
<td>æ›¿æ›å­—å…ƒ</td>
<td><code>:map ,i &lt;Esc&gt;r</code><br><code>:map ,a &lt;Esc&gt;r</code></td>
</tr>
</tbody></table>
<hr>
<p><strong>èªªæ˜ï¼š</strong>  </p>
<ul>
<li>nï¼šæ™®é€šæ¨¡å¼ï¼ˆnormal modeï¼‰  </li>
<li>iï¼šæ’å…¥æ¨¡å¼ï¼ˆinsert modeï¼‰  </li>
<li>vï¼šè¦–è¦ºæ¨¡å¼ï¼ˆvisual modeï¼‰  </li>
<li><code>&lt;CR&gt;</code> ä»£è¡¨ Enter éµï¼Œ<code>&lt;Esc&gt;</code> ä»£è¡¨ Esc éµ</li>
</ul>
<hr>
<p>ä»¥ä¸‹æ˜¯æˆ‘å°‡ JetBrainsï¼ˆIdeaVimï¼‰Vim å¿«æ·éµç§»æ¤åˆ° VSCodeï¼ˆVSCodeVimï¼‰çš„å°æ‡‰è¡¨ï¼Œ<br>ä¸¦èªªæ˜å“ªäº›å·²æˆåŠŸç§»æ¤ã€å“ªäº›ç„¡æ³•ç§»æ¤åŠåŸå› ï¼š</p>
<hr>
<table>
<thead>
<tr>
<th>JetBrains å¿«æ·éµ</th>
<th>VSCode è¨­å®š (before)</th>
<th>VSCode æŒ‡ä»¤ (commands)</th>
<th>åŠŸèƒ½èªªæ˜</th>
<th>å¯å¦ç§»æ¤</th>
<th>å‚™è¨»&#x2F;åŸå› </th>
</tr>
</thead>
<tbody><tr>
<td>zrr</td>
<td>[â€œzâ€,â€râ€,â€râ€]</td>
<td>editor.action.rename</td>
<td>é‡æ–°å‘½å</td>
<td>âœ…</td>
<td>å®Œå…¨æ”¯æ´</td>
</tr>
<tr>
<td>zf</td>
<td>[â€œzâ€,â€fâ€]</td>
<td>editor.action.revealDefinition</td>
<td>è·³åˆ°å®šç¾©</td>
<td>âœ…</td>
<td>å®Œå…¨æ”¯æ´</td>
</tr>
<tr>
<td>zrc&#x2F;zo</td>
<td>[â€œzâ€,â€râ€,â€câ€]&#x2F;[â€œzâ€,â€oâ€]</td>
<td>editor.action.formatDocument</td>
<td>æ ¼å¼åŒ–ç¨‹å¼ç¢¼</td>
<td>âœ…</td>
<td>å®Œå…¨æ”¯æ´ï¼ˆä½ å·²è¨­ zrcï¼Œzo ä¹Ÿå¯åŠ ï¼‰</td>
</tr>
<tr>
<td>zn</td>
<td>[â€œzâ€,â€nâ€]</td>
<td>editor.action.marker.prev</td>
<td>è·³åˆ°ä¸Šä¸€å€‹éŒ¯èª¤</td>
<td>âœ…</td>
<td>å®Œå…¨æ”¯æ´</td>
</tr>
<tr>
<td>zrt</td>
<td>[â€œzâ€,â€râ€,â€tâ€]</td>
<td>workbench.action.openRecent</td>
<td>æœ€è¿‘æª”æ¡ˆ</td>
<td>âœ…</td>
<td>å®Œå…¨æ”¯æ´</td>
</tr>
<tr>
<td>,m</td>
<td>[â€œ,â€,â€mâ€]</td>
<td>workbench.action.gotoSymbol</td>
<td>æª”æ¡ˆçµæ§‹&#x2F;å¤§ç¶±</td>
<td>âœ…</td>
<td>å®Œå…¨æ”¯æ´</td>
</tr>
<tr>
<td>zx</td>
<td>[â€œzâ€,â€xâ€]</td>
<td>editor.action.refactor</td>
<td>é¡¯ç¤ºé‡æ§‹é¸å–®</td>
<td>âœ…</td>
<td>å®Œå…¨æ”¯æ´</td>
</tr>
<tr>
<td>zgc</td>
<td>[â€œzâ€,â€gâ€,â€câ€]</td>
<td>workbench.view.scm</td>
<td>é–‹å•Ÿ Source Control é¢æ¿</td>
<td>âœ…</td>
<td>å®Œå…¨æ”¯æ´</td>
</tr>
<tr>
<td>zh</td>
<td>[â€œzâ€,â€hâ€]</td>
<td>cursorHome</td>
<td>è·³åˆ°è¡Œé¦–</td>
<td>âœ…</td>
<td>å®Œå…¨æ”¯æ´</td>
</tr>
<tr>
<td>zl</td>
<td>[â€œzâ€,â€lâ€]</td>
<td>cursorEnd</td>
<td>è·³åˆ°è¡Œå°¾</td>
<td>âœ…</td>
<td>å®Œå…¨æ”¯æ´</td>
</tr>
<tr>
<td>zrv</td>
<td>[â€œzâ€,â€râ€,â€vâ€]</td>
<td>editor.action.codeAction.extract.variable</td>
<td>èƒå–è®Šæ•¸</td>
<td>âš ï¸</td>
<td>VSCodeVim æœ‰é¸å–é™åˆ¶ï¼Œéƒ¨åˆ†æƒ…å¢ƒä¸‹ç„¡æ³•è§¸ç™¼</td>
</tr>
<tr>
<td>zrm</td>
<td>[â€œzâ€,â€râ€,â€mâ€]</td>
<td>editor.action.codeAction.extract.method</td>
<td>èƒå–æ–¹æ³•</td>
<td>âš ï¸</td>
<td>VSCodeVim æœ‰é¸å–é™åˆ¶ï¼Œéƒ¨åˆ†æƒ…å¢ƒä¸‹ç„¡æ³•è§¸ç™¼</td>
</tr>
<tr>
<td>zri</td>
<td>-</td>
<td>-</td>
<td>Inlineï¼ˆå…§è¯è®Šæ•¸&#x2F;æ–¹æ³•ï¼‰</td>
<td>âŒ</td>
<td>VSCode æ²’æœ‰å…¬é–‹æŒ‡ä»¤ IDï¼Œç„¡æ³• keybinding</td>
</tr>
<tr>
<td>zrp</td>
<td>-</td>
<td>-</td>
<td>Introduce Parameter</td>
<td>âŒ</td>
<td>VSCode æ²’æœ‰å…¬é–‹æŒ‡ä»¤ IDï¼Œç„¡æ³• keybinding</td>
</tr>
<tr>
<td>zrf</td>
<td>-</td>
<td>-</td>
<td>Introduce Field</td>
<td>âŒ</td>
<td>VSCode æ²’æœ‰å…¬é–‹æŒ‡ä»¤ IDï¼Œç„¡æ³• keybinding</td>
</tr>
<tr>
<td>ztt</td>
<td>-</td>
<td>-</td>
<td>å·¨é›†&#x2F;å¤šæ­¥é©Ÿè‡ªå‹•åŒ–</td>
<td>âŒ</td>
<td>VSCode ä¸æ”¯æ´ Vim å·¨é›†æˆ–å¤šæ­¥é©Ÿè‡ªå‹•åŒ–</td>
</tr>
<tr>
<td>zso</td>
<td>-</td>
<td>-</td>
<td>é‡æ–°è¼‰å…¥ vimrc</td>
<td>âŒ</td>
<td>VSCodeVim ä¸æ”¯æ´ :source æˆ–é‡æ–°è¼‰å…¥ vimrc</td>
</tr>
<tr>
<td>zra</td>
<td>[â€œzâ€,â€râ€,â€aâ€]</td>
<td>testing.runAll</td>
<td>åŸ·è¡Œæ‰€æœ‰å–®å…ƒæ¸¬è©¦</td>
<td>âœ…</td>
<td>éœ€å®‰è£ VSCode å®˜æ–¹ Testing åŠŸèƒ½ï¼Œå·²å¯ keybinding</td>
</tr>
</tbody></table>
<hr>
<h3 id="è£œå……èªªæ˜"><a href="#è£œå……èªªæ˜" class="headerlink" title="è£œå……èªªæ˜"></a>è£œå……èªªæ˜</h3><ul>
<li>âœ…ï¼šå®Œå…¨æ”¯æ´ï¼Œå·²å¯ç”¨æ–¼ VSCodeVimã€‚</li>
<li>âš ï¸ï¼šVSCodeVim æœ‰æŠ€è¡“é™åˆ¶ï¼ˆå¦‚éœ€é¸å–å…§å®¹ï¼Œè§¸ç™¼ä¸ä¸€å®šæˆåŠŸï¼‰ã€‚</li>
<li>âŒï¼šVSCode&#x2F;VSCodeVim ç„¡å°æ‡‰æŒ‡ä»¤æˆ–åŠŸèƒ½ï¼Œç„¡æ³•ç§»æ¤ã€‚</li>
<li>ä½ å¯ä»¥æŒçºŒç”¨ VSCode å…§å»ºçš„ <code>Cmd+.</code> æˆ–å³éµé¸å–®è£œè¶³ç„¡æ³• keybinding çš„é‡æ§‹åŠŸèƒ½ã€‚</li>
<li><strong>zra</strong>ï¼šVSCode 1.59 ä»¥ä¸Šå…§å»º Testing åŠŸèƒ½ï¼ŒæŒ‡ä»¤ç‚º <code>testing.runAll</code>ï¼Œå¯ç›´æ¥ keybindingï¼Œç„¡éœ€é¡å¤–å¤–æ›ã€‚</li>
</ul>
<hr>
<p><strong>ç¸½çµï¼š</strong><br>æˆ‘å·²æˆåŠŸå°‡å¤§éƒ¨åˆ†å¸¸ç”¨ JetBrains Vim å¿«æ·éµç§»æ¤åˆ° VSCodeï¼Œ<br>åƒ…å°‘æ•¸ JetBrains å°ˆå±¬é‡æ§‹ã€å·¨é›†ã€vimrc ç›¸é—œåŠŸèƒ½å›  VSCode é™åˆ¶ç„¡æ³•ç§»æ¤ã€‚  </p>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2025/05/24/2025/vim_setting/" data-id="cme0z8sdk00iz2sqz2dyhdsw2" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2025/05/24/2025/vim_setting/#disqus_thread" class="article-comment-link">ç•™è¨€</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">å¯¦ä½œç­†è¨˜</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" href="/page/2/">ä¸‹ä¸€é  â†’</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/08/07/2025/race-condition-in-file-storage/"> [å­¸ç¿’ç­†è¨˜] Node.js æª”æ¡ˆæ“ä½œ mkdir çš„æ­£ç¢ºå§¿å‹¢</a>
          </li>
        
          <li>
            <a href="/2025/07/31/2025/ai_google_search_api/"> [å¯¦ä½œç­†è¨˜] AI Agent å¯¦ä½œ Web Search APIï¼šå¾è¨­è¨ˆåˆ°éƒ¨ç½²çš„å®Œæ•´è¨˜éŒ„</a>
          </li>
        
          <li>
            <a href="/2025/07/29/2025/ai-eai-browser-install-flatpak-solution/"> [å¯¦ä½œç­†è¨˜] EAI æ©Ÿå™¨ç€è¦½å™¨å®‰è£å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ</a>
          </li>
        
          <li>
            <a href="/2025/07/25/2025/express-res-locals-auth-best-practice/"> [å­¸ç¿’ç­†è¨˜] Express.js middleware auth çš„æ¥­ç•Œæ¨™æº–(res.locals)</a>
          </li>
        
          <li>
            <a href="/2025/07/22/2025/ithub-action-ssh-keyscan-not-found-fix/">[è¸©é›·ç­†è¨˜] GitHub Action ssh-keyscan not found å•é¡Œä¿®å¾©</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å½™æ•´</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/08/">å…«æœˆ 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/07/">ä¸ƒæœˆ 2025</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/06/">å…­æœˆ 2025</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/05/">äº”æœˆ 2025</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/04/">å››æœˆ 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">ä¸‰æœˆ 2025</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/02/">äºŒæœˆ 2025</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/01/">ä¸€æœˆ 2025</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">åäºŒæœˆ 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">åä¸€æœˆ 2024</a><span class="archive-list-count">3</span></li><span id='list_archives2' style='display:none'><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">åæœˆ 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">ä¹æœˆ 2024</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">å…«æœˆ 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">ä¸ƒæœˆ 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">å…­æœˆ 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">äº”æœˆ 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">å››æœˆ 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">ä¸‰æœˆ 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">äºŒæœˆ 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">ä¸€æœˆ 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">åäºŒæœˆ 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">åä¸€æœˆ 2023</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">åæœˆ 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">ä¹æœˆ 2023</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">å…«æœˆ 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">ä¸ƒæœˆ 2023</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">å…­æœˆ 2023</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">äº”æœˆ 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">å››æœˆ 2023</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">ä¸‰æœˆ 2023</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">äºŒæœˆ 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">ä¸€æœˆ 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">åäºŒæœˆ 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">åæœˆ 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">ä¹æœˆ 2022</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">å…«æœˆ 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">ä¸ƒæœˆ 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">å…­æœˆ 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">äº”æœˆ 2022</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">å››æœˆ 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">ä¸‰æœˆ 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">äºŒæœˆ 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">ä¸€æœˆ 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">åäºŒæœˆ 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">åä¸€æœˆ 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">åæœˆ 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">ä¹æœˆ 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">å…«æœˆ 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">ä¸ƒæœˆ 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">å…­æœˆ 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">äº”æœˆ 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">å››æœˆ 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">ä¸‰æœˆ 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">äºŒæœˆ 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">ä¸€æœˆ 2021</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">åäºŒæœˆ 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">åä¸€æœˆ 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">åæœˆ 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">ä¹æœˆ 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">å…«æœˆ 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">ä¸ƒæœˆ 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">å…­æœˆ 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">äº”æœˆ 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">å››æœˆ 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">ä¸‰æœˆ 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">äºŒæœˆ 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">ä¸€æœˆ 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">åäºŒæœˆ 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">åä¸€æœˆ 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">åæœˆ 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">ä¹æœˆ 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">å…«æœˆ 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">ä¸ƒæœˆ 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">å…­æœˆ 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">äº”æœˆ 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">å››æœˆ 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">ä¸‰æœˆ 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">äºŒæœˆ 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">ä¸€æœˆ 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">åäºŒæœˆ 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">åä¸€æœˆ 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">åæœˆ 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">ä¹æœˆ 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">å…«æœˆ 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">ä¸ƒæœˆ 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">å…­æœˆ 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">äº”æœˆ 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">å››æœˆ 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">ä¸‰æœˆ 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">äºŒæœˆ 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">ä¸€æœˆ 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">åäºŒæœˆ 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">åæœˆ 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">ä¹æœˆ 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">å…«æœˆ 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">ä¸ƒæœˆ 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">äº”æœˆ 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">å››æœˆ 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">ä¸‰æœˆ 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">äºŒæœˆ 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">ä¸€æœˆ 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">åäºŒæœˆ 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">åä¸€æœˆ 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">åæœˆ 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">ä¹æœˆ 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">å…«æœˆ 2016</a><span class="archive-list-count">6</span></li></span><span id=''></span><span onclick="var d=document.getElementById('list_archives2'); d.style.display===''?d.style='display:none':d.style=''">toggle...</span></ul>
    </div>
  </div>


  
    <a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-nd/3.0/tw/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/3.0/tw/88x31.png" />
</a>
  <br />
This work is licensed under a 
<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-nd/3.0/tw/">Creative Commons Attribution-NonCommercial-NoDerivs 3.0 Taiwan License</a>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ¨™ç±¤é›²</h3>
    <div class="widget tagcloud">
      <a href="/tags/Net-Framework/" style="font-size: 14.67px;">.Net Framework</a> <a href="/tags/API/" style="font-size: 11.33px;">API</a> <a href="/tags/AWS/" style="font-size: 13.33px;">AWS</a> <a href="/tags/Agile/" style="font-size: 17.33px;">Agile</a> <a href="/tags/CI-CD/" style="font-size: 19.33px;">CI/CD</a> <a href="/tags/Cache/" style="font-size: 10px;">Cache</a> <a href="/tags/Coding-Standard/" style="font-size: 10px;">Coding Standard</a> <a href="/tags/Container/" style="font-size: 12px;">Container</a> <a href="/tags/Database/" style="font-size: 12.67px;">Database</a> <a href="/tags/Design-Pattern/" style="font-size: 10.67px;">Design Pattern</a> <a href="/tags/Docker/" style="font-size: 12px;">Docker</a> <a href="/tags/Entity-Framework/" style="font-size: 10.67px;">Entity Framework</a> <a href="/tags/Firebase/" style="font-size: 10px;">Firebase</a> <a href="/tags/Git/" style="font-size: 10.67px;">Git</a> <a href="/tags/Golang/" style="font-size: 11.33px;">Golang</a> <a href="/tags/Google/" style="font-size: 11.33px;">Google</a> <a href="/tags/GulpJs/" style="font-size: 10.67px;">GulpJs</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/Hexo/" style="font-size: 15.33px;">Hexo</a> <a href="/tags/IIS/" style="font-size: 10px;">IIS</a> <a href="/tags/IO/" style="font-size: 10px;">IO</a> <a href="/tags/Integrated-Testing/" style="font-size: 10px;">Integrated Testing</a> <a href="/tags/Jenkins/" style="font-size: 12px;">Jenkins</a> <a href="/tags/Kubernetes/" style="font-size: 10px;">Kubernetes</a> <a href="/tags/Linux/" style="font-size: 10.67px;">Linux</a> <a href="/tags/Mongodb/" style="font-size: 10px;">Mongodb</a> <a href="/tags/MsSQL/" style="font-size: 11.33px;">MsSQL</a> <a href="/tags/MsTest/" style="font-size: 10px;">MsTest</a> <a href="/tags/Mutation-Testing/" style="font-size: 10px;">Mutation Testing</a> <a href="/tags/Nodejs/" style="font-size: 15.33px;">Nodejs</a> <a href="/tags/OAuth/" style="font-size: 10px;">OAuth</a> <a href="/tags/OOP/" style="font-size: 11.33px;">OOP</a> <a href="/tags/Openshift/" style="font-size: 10.67px;">Openshift</a> <a href="/tags/PowerShell/" style="font-size: 11.33px;">PowerShell</a> <a href="/tags/React/" style="font-size: 12px;">React</a> <a href="/tags/Redis/" style="font-size: 10.67px;">Redis</a> <a href="/tags/SQL/" style="font-size: 12px;">SQL</a> <a href="/tags/Scrum/" style="font-size: 16.67px;">Scrum</a> <a href="/tags/Shell/" style="font-size: 10.67px;">Shell</a> <a href="/tags/Specflow/" style="font-size: 10px;">Specflow</a> <a href="/tags/StyleCop/" style="font-size: 10px;">StyleCop</a> <a href="/tags/TDD/" style="font-size: 16px;">TDD</a> <a href="/tags/Testing/" style="font-size: 14px;">Testing</a> <a href="/tags/Thread/" style="font-size: 10.67px;">Thread</a> <a href="/tags/Trello/" style="font-size: 10px;">Trello</a> <a href="/tags/TypeScript/" style="font-size: 13.33px;">TypeScript</a> <a href="/tags/Unit-Testing/" style="font-size: 18.67px;">Unit Testing</a> <a href="/tags/Unix/" style="font-size: 10.67px;">Unix</a> <a href="/tags/Vim/" style="font-size: 10px;">Vim</a> <a href="/tags/Visual-Studio/" style="font-size: 10px;">Visual Studio</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/post/" style="font-size: 10px;">post</a> <a href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" style="font-size: 16.67px;">å­¸ç¿’ç­†è¨˜</a> <a href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" style="font-size: 20px;">å¯¦ä½œç­†è¨˜</a> <a href="/tags/%E6%99%82%E9%96%93%E7%AE%A1%E7%90%86/" style="font-size: 10.67px;">æ™‚é–“ç®¡ç†</a> <a href="/tags/%E6%B4%BB%E5%8B%95%E7%AD%86%E8%A8%98/" style="font-size: 12.67px;">æ´»å‹•ç­†è¨˜</a> <a href="/tags/%E7%94%9F%E6%B4%BB%E7%AD%86%E8%A8%98/" style="font-size: 16.67px;">ç”Ÿæ´»ç­†è¨˜</a> <a href="/tags/%E8%A8%98%E9%8C%84/" style="font-size: 11.33px;">è¨˜éŒ„</a> <a href="/tags/%E8%B8%A9%E9%9B%B7%E7%AD%86%E8%A8%98/" style="font-size: 16px;">è¸©é›·ç­†è¨˜</a> <a href="/tags/%E9%87%8D%E6%A7%8B/" style="font-size: 12px;">é‡æ§‹</a> <a href="/tags/%E9%96%B1%E8%AE%80%E7%AD%86%E8%A8%98/" style="font-size: 18px;">é–±è®€ç­†è¨˜</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ¨™ç±¤</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Net-Framework/" rel="tag">.Net Framework</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/API/" rel="tag">API</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AWS/" rel="tag">AWS</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Agile/" rel="tag">Agile</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI-CD/" rel="tag">CI&#x2F;CD</a><span class="tag-list-count">24</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cache/" rel="tag">Cache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Coding-Standard/" rel="tag">Coding Standard</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Container/" rel="tag">Container</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/" rel="tag">Database</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design-Pattern/" rel="tag">Design Pattern</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Entity-Framework/" rel="tag">Entity Framework</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Firebase/" rel="tag">Firebase</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Golang/" rel="tag">Golang</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Google/" rel="tag">Google</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GulpJs/" rel="tag">GulpJs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IIS/" rel="tag">IIS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO/" rel="tag">IO</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Integrated-Testing/" rel="tag">Integrated Testing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jenkins/" rel="tag">Jenkins</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kubernetes/" rel="tag">Kubernetes</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mongodb/" rel="tag">Mongodb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MsSQL/" rel="tag">MsSQL</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MsTest/" rel="tag">MsTest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mutation-Testing/" rel="tag">Mutation Testing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nodejs/" rel="tag">Nodejs</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OAuth/" rel="tag">OAuth</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OOP/" rel="tag">OOP</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Openshift/" rel="tag">Openshift</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PowerShell/" rel="tag">PowerShell</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/" rel="tag">SQL</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scrum/" rel="tag">Scrum</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/" rel="tag">Shell</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Specflow/" rel="tag">Specflow</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/StyleCop/" rel="tag">StyleCop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TDD/" rel="tag">TDD</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Testing/" rel="tag">Testing</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thread/" rel="tag">Thread</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Trello/" rel="tag">Trello</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unit-Testing/" rel="tag">Unit Testing</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unix/" rel="tag">Unix</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vim/" rel="tag">Vim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Visual-Studio/" rel="tag">Visual Studio</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/" rel="tag">html</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/post/" rel="tag">post</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" rel="tag">å­¸ç¿’ç­†è¨˜</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">å¯¦ä½œç­†è¨˜</a><span class="tag-list-count">126</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%99%82%E9%96%93%E7%AE%A1%E7%90%86/" rel="tag">æ™‚é–“ç®¡ç†</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B4%BB%E5%8B%95%E7%AD%86%E8%A8%98/" rel="tag">æ´»å‹•ç­†è¨˜</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E7%AD%86%E8%A8%98/" rel="tag">ç”Ÿæ´»ç­†è¨˜</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A8%98%E9%8C%84/" rel="tag">è¨˜éŒ„</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B8%A9%E9%9B%B7%E7%AD%86%E8%A8%98/" rel="tag">è¸©é›·ç­†è¨˜</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%87%8D%E6%A7%8B/" rel="tag">é‡æ§‹</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%96%B1%E8%AE%80%E7%AD%86%E8%A8%98/" rel="tag">é–±è®€ç­†è¨˜</a><span class="tag-list-count">15</span></li></ul>
    </div>
  </div>


  
    

  
    <div class="widget-wrap">
    <h3 class="widget-title">å¤šèªç³»</h3>
    <div class="widget">
        <div id="ytWidget"></div>
    </div>
</div>
<script src="https://translate.yandex.net/website-widget/v1/widget.js?widgetId=ytWidget&pageLang=zh&widgetTheme=dark&autoMode=false" type="text/javascript"></script>
  
    <div class="widget-wrap">
    <h3 class="widget-title">BADGES</h3>
    <div class="widget">
        <a target="_blank" rel="noopener" href="https://bcert.me/bc/html/show-badge.html?b=uufxvngl">
            <img src="/images/2018/csm/seal-csm.png" alt="Certified ScrumMasterÂ®">
        </a>
    </div>
</div>
  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2025 Marsen L.<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

  
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css">

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>



<script src="/js/sayings.js?v=0.js"></script>
  

<script src="/js/script.js?v=0.js"></script>

<div id="likecoin">
  <script type="text/javascript">
    document.write(
      "<iframe scrolling='no' frameborder='0' sandbox='allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-storage-access-by-user-activation' style='height: 212px; width: 100%;' src='https://button.like.co/in/embed/marsenlin/button?referrer=" +
      encodeURIComponent(location.href.split("?")[0].split("#")[0]) + "'></iframe>");
  </script>
</div>
<script>

  var disqus_shortname = 'marsenlin';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();

</script>

  </div>
    
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NTDGNJZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

</body>
</html>