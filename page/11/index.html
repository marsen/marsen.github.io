<!DOCTYPE html>
<html>
<head>
  
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NTDGNJZ');</script>
<!-- End Google Tag Manager -->

  
<!-- Google Analytics -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RF47NNRE5G"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RF47NNRE5G');
</script>
<!-- End Google Analytics -->

  
<!-- Google AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1885096025224905"
     crossorigin="anonymous"></script>
<!-- End Google AdSense -->



  <meta charset="utf-8">
  
  <title>Marsen&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Marsen&#39;s Blog">
<meta property="og:url" content="https://blog.marsen.me/page/11/index.html">
<meta property="og:site_name" content="Marsen&#39;s Blog">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Marsen L.">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Marsen&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
      
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300&display=swap" rel="stylesheet">
  
  
<link rel="stylesheet" href="/css/style.css">

  <meta property ="og:image" content="https://avatars1.githubusercontent.com/u/4269720?s=460&v=4" /> 
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="blog-banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Marsen&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle"></a>
          <div>
          <span style="width: 20px; height: 10px; background: linear-gradient(to bottom, #005BBB 50%, #FFD700 50%); text-align: center; color: white; font-size: 6px; font-weight: bold; line-height: 100px;">
            #StandWithUkraine
          </span>
          </div>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜尋"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.marsen.me"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2022/contributed_MSDN" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/05/26/2022/contributed_MSDN/" class="article-date">
  <time datetime="2022-05-26T12:51:33.000Z" itemprop="datePublished">2022-05-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/05/26/2022/contributed_MSDN/"> [實作筆記] 貢獻微軟文件 MSDN 記錄</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h2><p>專案上我使用 .net core 並且有需要使用到 Config 相關的設定，<br>在看文件時不小心，查錯了文件(查到了<a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/dotnet/api/system.configuration.contextinformation.getsection?view=dotnet-plat-ext-6.0">這一篇 ContextInformation.GetSection(String) Method</a>)。</p>
<p>這裡寫到 configuration section 是區分大小寫的(case-sensitive)</p>
<blockquote>
<h2 id="Remarks"><a href="#Remarks" class="headerlink" title="Remarks"></a>Remarks</h2><p>When specifying a section within the configuration,<br>note that the name of the configuration section is <strong>case-sensitive</strong>.</p>
</blockquote>
<p>而我實測時，才發現並沒有區分大小寫，才注意到我<strong>查錯了文件</strong>。</p>
<h2 id="起念"><a href="#起念" class="headerlink" title="起念"></a>起念</h2><p>進一步我去微軟 MSDN 找到正確的文件查詢 <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/dotnet/api/microsoft.extensions.configuration.configurationmanager.getsection?view=dotnet-plat-ext-6.0"><code>ConfigurationManager.GetSection</code></a>，發現並沒有註明是否區分大小寫。</p>
<p>所以我就想<del>解</del>貢獻一下<del>成就</del>一之已力，<br>幫微軟加上說明，並好奇多久可以將修改的文件上線</p>
<h2 id="歷程"><a href="#歷程" class="headerlink" title="歷程"></a>歷程</h2><p>首先只要點選右上角的鉛筆圖示，就可以連線至 <a target="_blank" rel="noopener" href="https://github.com/dotnet/dotnet-api-docs/blob/main/xml/Microsoft.Extensions.Configuration/ConfigurationManager.xml">Github</a> 頁面，<br>很快的我完成了修改並且發出了 <a target="_blank" rel="noopener" href="https://github.com/dotnet/dotnet-api-docs/pull/8064">Pull Request</a> 。<br>發出後很快就有自動化的機器人 dotnet-issue-labeler 與 opbld33 進行審查。</p>
<p>接下來有人工審核，<a target="_blank" rel="noopener" href="https://github.com/gewarren">Gewarren</a> 很友善的給我一些建議，<br>大概就在我發出 PR 的幾個小時內，不過我自已的動作沒那麼快，<br>我過了 5 天才發現，並依照建議完成了修改(我想他們應該有一些文件修改的 Guide Line)，<br>修改完後送出，一樣會有自動化審核，Gewarren approve 後，再有 3 個自動化的檢查，</p>
<ul>
<li>snippets-build</li>
<li>OpenPublishing.Build Validation status: passed</li>
<li>license&#x2F;cla All CLA requirements met.</li>
</ul>
<p>接下來就 merged，這是 2022&#x2F;05&#x2F;17 ，不知道多久才會更新文件。</p>
<h2 id="結尾"><a href="#結尾" class="headerlink" title="結尾"></a>結尾</h2><p>2022&#x2F;05&#x2F;23 我已經在微軟官方文件見到更新，小小成就達成 🎉</p>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/05/26/2022/contributed_MSDN/" data-id="cm844qkkm00a72smx42qxd1as" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/05/26/2022/contributed_MSDN/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2022/penetration_test" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/05/24/2022/penetration_test/" class="article-date">
  <time datetime="2022-05-24T03:33:04.000Z" itemprop="datePublished">2022-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/05/24/2022/penetration_test/"> [實作筆記] 滲透測試報告、原因與調整方針</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要，測試報告"><a href="#前情提要，測試報告" class="headerlink" title="前情提要，測試報告"></a>前情提要，測試報告</h2><p>測試廠商使用 Acunetix 掃描與 Burp Suite 攔截封包進行測試:<br>報告為以下幾個 Header 未加而使網站存在風險</p>
<ol>
<li>X-Frame-Options</li>
<li>X-XSS-Protection</li>
<li>X-Content-Type-Options</li>
<li>Strict-Transport-Security</li>
<li>Content-Security-Policy</li>
</ol>
<p>除了第五項，以下將會介紹各個 Header 賦於瀏覽器的行為，以及防範何種可能的攻擊</p>
<h2 id="Header-的用意"><a href="#Header-的用意" class="headerlink" title="Header 的用意"></a>Header 的用意</h2><h3 id="X-Frame-Options"><a href="#X-Frame-Options" class="headerlink" title="X-Frame-Options"></a>X-Frame-Options</h3><ul>
<li>新版的瀏覽器使用 <code>frame-ancestors</code></li>
<li>用意：防範 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/Security/Types_of_attacks#click-jacking">ClickJack</a> 攻擊<blockquote>
<p>Click Jacking 直譯為點擊劫持，常見的攻擊手段為，<br>攻擊者透過 frame 嵌入受害網站;當受害者誤入攻擊者網站時(常用社交攻擊)，<br>會誤以為是正常網站。<br>接下來就可以誘騙受害者，ex:輸入帳密，或是點擊特定連結或下載惡意軟體。</p>
</blockquote>
</li>
</ul>
<h4 id="選項"><a href="#選項" class="headerlink" title="選項"></a>選項</h4><ul>
<li><code>DENY</code></li>
<li><code>SAMEORIGIN</code></li>
<li><code>ALLOW-FROM &lt;uri&gt;</code></li>
</ul>
<h3 id="X-XSS-Protection"><a href="#X-XSS-Protection" class="headerlink" title="X-XSS-Protection"></a>X-XSS-Protection</h3><ul>
<li>新版的瀏覽器透過 <code>CSP (Content-Security-Policy)</code> 來防止 XSS 攻擊</li>
<li>用意:為提供舊版的瀏覽器防範 XSS 網站攻擊，這不屬於任何正式的規格書或草案之中<blockquote>
<p>XSS(Cross-Site Scripting)，直接跨站腳本攻擊，手段非常的多樣，<br>大多是在受害網站注入腳本語法(javascript)，使用者瀏覽時就會遭受攻擊。</p>
<p>ex:在留言區留下無限 loop 的 alert ，如果對方的網站沒有防範，<br>使用者瀏覽留言區的時候，就會彈出關不完的 alter 視窗。<br>(真正惡意的攻擊會更神不知鬼不覺)<br>參考</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://tech-blog.cymetrics.io/posts/huli/xss-attack-and-defense/">1</a></li>
<li><a target="_blank" rel="noopener" href="https://tech-blog.cymetrics.io/posts/jo/zerobased-cross-site-scripting/">2</a></li>
</ul>
</blockquote>
</li>
</ul>
<h4 id="選項-1"><a href="#選項-1" class="headerlink" title="選項"></a>選項</h4><ul>
<li><code>0</code><br>禁止 XSS 過濾。</li>
<li><code>1</code><br>啟用 XSS 過濾（通常瀏覽器是默認的）。如果檢測到跨站腳本攻擊，瀏覽器將清除頁面（刪除不安全的部分）。</li>
<li><code>1;mode=block</code><br>啟用 XSS 過濾。如果檢測到攻擊，瀏覽器將不會清除頁面，而是阻止頁面加載。</li>
<li><code>1; report=&lt;reporting-URI&gt;</code> (Chromium only)<br>啟用 XSS 過濾。如果檢測到跨站腳本攻擊，瀏覽器將清除頁面並使用 CSP report-uri (en-US)指令的功能發送違規報告。</li>
</ul>
<h3 id="X-Content-Type-Options"><a href="#X-Content-Type-Options" class="headerlink" title="X-Content-Type-Options"></a>X-Content-Type-Options</h3><ul>
<li>通知瀏覽器，不要自行猜測(MIME type sniffing)Content Type</li>
</ul>
<blockquote>
<p>原先 MIME type sniffing 是上古時代被設計來避免開發人員誤設 Content Type，<br>比如說明明是 javascript 檔， content Type 卻被設定 text&#x2F;plain，<br>這時瀏覽器 sniff 判斷為 javascript 後，可以執行該 js 檔<br>但是被用來惡意攻擊，比如說連結 <code>src/fake.jpg</code> 看起來像一張圖片<br>實際上 Response 卻回傳可執行的 javascript (內含惡意的程式)，<br>瀏覽器的 sniffing 行為會自行解析為腳本(javascript)並執行攻擊</p>
</blockquote>
<h4 id="選項-2"><a href="#選項-2" class="headerlink" title="選項"></a>選項</h4><ul>
<li><code>nosniff</code></li>
</ul>
<h3 id="Strict-Transport-Security"><a href="#Strict-Transport-Security" class="headerlink" title="Strict-Transport-Security"></a>Strict-Transport-Security</h3><p><code>HTTP Strict-Transport-Security</code> 回應標頭（簡稱為 HSTS (en-US)）告知瀏覽器應強制使用 HTTPS 以取代 HTTP。<br>現代的瀏覽器優先使用 HTTPS 已是共識，不加這個 Header 也會出現不安全的警告</p>
<h4 id="選項-3"><a href="#選項-3" class="headerlink" title="選項"></a>選項</h4><ul>
<li><code>max-age</code> 指定秒數</li>
<li><code>includeSubDomains</code> 包含子網域</li>
</ul>
<h3 id="Content-Security-Policy"><a href="#Content-Security-Policy" class="headerlink" title="Content-Security-Policy"></a>Content-Security-Policy</h3><p>這個坑很深，我另外再撰文說明，<br>可以透過另一個 Header <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy-Report-Only">Content-Security-Policy-Report-Only</a>，<br>產生報告逐一修正 Policy。</p>
<h2 id="補充"><a href="#補充" class="headerlink" title="補充"></a>補充</h2><h3 id="如何使用-How-to-use-testssl"><a href="#如何使用-How-to-use-testssl" class="headerlink" title="如何使用 How to use testssl"></a>如何使用 How to use testssl</h3><p>testssl.sh 是一個免費的 command tool，<br>它檢查任何端口上的服務器服務是否支持 TLS&#x2F;SSL 、<br>協議以及最近的密碼缺陷等。</p>
<p>安裝</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install testssl</span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">testssl.sh &#123;uri&#125;</span><br></pre></td></tr></table></figure>

<h3 id="如何在-GCP-Bucket-加上-header"><a href="#如何在-GCP-Bucket-加上-header" class="headerlink" title="如何在 GCP Bucket 加上 header"></a>如何在 GCP Bucket 加上 header</h3><p>GCP &gt; Network Services &gt; Load Balancing</p>
<ul>
<li>Edit</li>
<li>Backend Configuration</li>
<li>找到特定的 Bucket 點擊鉛筆符號</li>
<li>Edit backend bucket</li>
<li>展開 ADVANCED CONFIGURATIONS (RESPONSE HEADERS)</li>
<li>Custom response headers &gt; ADD HEADER</li>
<li>輸入 Header Key 與 Value<ul>
<li>X-Frame-Options: DENY</li>
<li>X-XSS-Protection: 1;mode&#x3D;block</li>
<li>X-Content-Type-Options: nosniff</li>
</ul>
</li>
</ul>
<h2 id="補充-如何使用-Burp-Suite-觀察"><a href="#補充-如何使用-Burp-Suite-觀察" class="headerlink" title="補充: 如何使用 Burp Suite 觀察"></a>補充: 如何使用 Burp Suite 觀察</h2><p>概念說明：<br>Burp 可以在你的本機建立一個 Proxy Server,<br>並透過它提供的瀏覽器(Chromium)連線到你指定的 uri 並進行欄截。</p>
<blockquote>
<p>You ←→ Burp(Proxy) ←→ Internet。</p>
</blockquote>
<p><strong>注意</strong>: 網路上大多數的文章都會有 Proxy 的設定，其實這是可以省略的，<br>新版本的 Burp 用提供的瀏覽器就會連結 Burp Proxy。</p>
<ol>
<li>下載並安裝 <a target="_blank" rel="noopener" href="https://portswigger.net/burp/communitydownload">Burp Suite</a>，Burp Suite Community Edition 版本即可</li>
<li>選擇 Temporary project &gt; Next</li>
<li>選擇 Use Burp defaults &gt; Start Burp</li>
<li>開啟攔截器: Proxy &gt; Intercept is on</li>
<li>開啟網站: Proxy &gt; Open Browser(Chromium) &gt; Key In &lt;target site URL&gt;</li>
<li>決定欄截或丟棄 Proxy &gt; Forward &#x2F; Drop</li>
<li>查看歷史記錄 Proxy &gt; HTTP &#x2F; WebSockets history</li>
</ol>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><p>CSP 相關(留作下篇文章的養份)</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP">https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP</a></li>
<li><a target="_blank" rel="noopener" href="https://csper.io/blog/csp-report-filtering">https://csper.io/blog/csp-report-filtering</a></li>
<li><a target="_blank" rel="noopener" href="https://content-security-policy.com/">https://content-security-policy.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://devco.re/blog/2014/04/08/security-issues-of-http-headers-2-content-security-policy/">https://devco.re/blog/2014/04/08/security-issues-of-http-headers-2-content-security-policy/</a></li>
<li><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10272394">https://ithelp.ithome.com.tw/articles/10272394</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/WebAssembly/content-security-policy/blob/main/proposals/CSP.md">https://github.com/WebAssembly/content-security-policy/blob/main/proposals/CSP.md</a></li>
<li><a target="_blank" rel="noopener" href="https://hackmd.io/@Eotones/BkOX6u5kX">https://hackmd.io/@Eotones/BkOX6u5kX</a></li>
<li><a target="_blank" rel="noopener" href="https://runebook.dev/zh-CN/docs/http/headers/content-security-policy">https://runebook.dev/zh-CN/docs/http/headers/content-security-policy</a></li>
<li><a target="_blank" rel="noopener" href="https://mmazzarolo.com/blog/2021-12-14-lessons-learned-publishing-a-content-security-policy/">https://mmazzarolo.com/blog/2021-12-14-lessons-learned-publishing-a-content-security-policy/</a></li>
<li><a target="_blank" rel="noopener" href="https://www.appsecmonkey.com/blog/content-security-policy">https://www.appsecmonkey.com/blog/content-security-policy</a></li>
<li><a target="_blank" rel="noopener" href="https://bugs.chromium.org/p/chromium/issues/detail?id=915648">https://bugs.chromium.org/p/chromium/issues/detail?id=915648</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy</a></li>
</ul>
</li>
<li><p><a target="_blank" rel="noopener" href="https://hackercat.org/burp-suite-tutorial/web-pentesting-burp-suite-total-tutorial">https://hackercat.org/burp-suite-tutorial/web-pentesting-burp-suite-total-tutorial</a></p>
</li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/05/24/2022/penetration_test/" data-id="cm844qkky00bg2smxbx7046gr" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/05/24/2022/penetration_test/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2022/about_covid_19_in_taiwan" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/05/20/2022/about_covid_19_in_taiwan/" class="article-date">
  <time datetime="2022-05-20T06:04:08.000Z" itemprop="datePublished">2022-05-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/05/20/2022/about_covid_19_in_taiwan/"> [生活筆記] 2022 新冠(武漢)肺炎疫情</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="進況"><a href="#進況" class="headerlink" title="進況"></a>進況</h2><p>2021 年 5 月 ~ 7 月進入 3 級後，理論上都是在 2 級的狀態，<br>入境人數每日約有 50~100 名確診者入境，<br>到了 2022 年 4 月以來，疫情指數成長<br><img src="/../../images/2022/covid-19-1.png" alt="爆"><br>近日單日確診已破 90000 例。</p>
<h3 id="重複發生的事"><a href="#重複發生的事" class="headerlink" title="重複發生的事"></a>重複發生的事</h3><ul>
<li>2020 搶&#x2F;吵口罩</li>
<li>2021 搶&#x2F;吵疫苗</li>
<li>2022 搶&#x2F;吵快篩</li>
</ul>
<h3 id="該作的事"><a href="#該作的事" class="headerlink" title="該作的事"></a>該作的事</h3><ul>
<li>載口罩</li>
<li>勤洗手</li>
<li>少去人多的地方</li>
<li>注意自身生心理的變化</li>
</ul>
<h3 id="現況的因應方針"><a href="#現況的因應方針" class="headerlink" title="現況的因應方針"></a>現況的因應方針</h3><p>準備適量的快篩，以 2 人的小家庭其實 1 盒(5 劑)已經夠用，<br>買不到就作好該作的事，台灣的狀況是可以在幾周到幾個月內調整到位的。<br>(參考口罩、疫苗與雞蛋的狀況)<br>無症狀就正常生活，保持樂觀，不要過度被搧動性的<code>偽新聞</code>、<code>網軍</code>、<code>談話節目</code>影響，<br>如果真的要看，請深入研究各方的說詞，不要因喜好而偏重某些節目。</p>
<p>自覺有症狀先快篩，<br>陰性就保持正常生活，擔心的話請就醫。<br>陽性參考 CDC 指示，自我隔離或就醫，並聽從醫囑。</p>
<p>有症狀而無法篩檢的就可以先自我隔離，<br>所幸我的工作模式可以遠端處理大部份事宜，<br>家中也沒有老小，並且都接種過三劑疫苗。<br>正面面對目前的疫情，並不想介入過多的口水，<br>看數據作事，或許有點無情但是大局來說才是正確的方向。</p>
<h3 id="分不清的名詞"><a href="#分不清的名詞" class="headerlink" title="分不清的名詞"></a>分不清的名詞</h3><p>角色有確診者、密切接觸者、其它<br>方針居家檢疫、居家隔離&#96;、居家照護、<br>隔離、自主健康管理、自主防疫、<br>自我健康監測 ??、自主應變 ??</p>
<p>總覺得每天都在產生新名詞呢</p>
<h3 id="資訊的取得"><a href="#資訊的取得" class="headerlink" title="資訊的取得"></a>資訊的取得</h3><ul>
<li>參考國外數據</li>
<li>聽取 CDC&#x2F;(所在)縣市記者會</li>
<li>多方參考海外新聞、數據報表</li>
<li>盡可能獲取一些科普、醫療相關的知識，但是要注意背後的科學支持是否可信</li>
</ul>
<p>心態上不要盲信，也不需要被風向帶到彼此敵視</p>
<h2 id="未來的方向"><a href="#未來的方向" class="headerlink" title="未來的方向"></a>未來的方向</h2><p>長期來說，只能試著與病毒共存，<br>讓整體的生活恢復正常，問題是這個過程是要付出多少的代價 ?</p>
<p>第一個全面接種疫苗，<br>我們的第一劑覆蓋率只有 85% ，第二劑 80% ，第三劑  69%（資料來源 <a target="_blank" rel="noopener" href="https://support.google.com/websearch/answer/10339795?hl=zh-Hant&visit_id=637887157557033154-233604798&p=cvd19_vaccine_stats&rd=1">202205021，GOOGLE</a>）<br>對比世界其它國家不算低，但是疫苗的效力會隨時間下滑，所以定期要打加強劑，<br>此外仍有特定族群無法接種疫苗，特別為小孩與慢性病者，應儘快加速孩童疫苗的進口與接種.<br>而之前打氣下滑導致疫苗過期而被丟棄，實在十分浪費。</p>
<blockquote>
<p>指揮中心發言人莊人祥 3 月底曾表示，莫德納及 BNT 約有 26.4 萬劑、AZ 則約 30 萬劑，<br>共計 56.4 萬劑疫苗因到期得銷毀。根據疾管署最新統計，<br>台灣 COVID-19 疫苗接種人口涵蓋率第 1 劑 84.57%、第 2 劑 79.84%、追加劑接種率 58.24%。</p>
<p>ETtoday &lt;&lt;3 天 1.6 萬例！瘋搶疫苗 醫嘆：丟掉你罵浪費，現在罵打不到？&gt;&gt; 記者陳俊宏／綜合報導</p>
</blockquote>
<p>第二個，在不破壞醫療量能前提下，儘可能讓抵抗力高的人感染而達成自然免疫。<br>不論如何會有人因此死亡，特別是未接種者，<br>雖然接種疫苗中壯年在數據上中重率不高，<br>但是對於個體而言，代表的是一個活生生的生命。<br>沒有人想當那個 0.03 %。<br>不要過渡消耗醫療量能，<br>目前快篩的排隊或是 PCR 的排隊，有些人是為了領取保險金，取得確診証明。<br>無症或輕症者，其實正在壓縮真正需要就醫的人的生命，<br>讓醫護人員花費大量時間在作文書與檢驗作業。</p>
<p>無症或輕症者，雖是下策，可以透過線上或是購買成藥等方式來撐過疫情。<br>如果藥物足夠的話，快篩陽且有診狀，醫師就該判斷是否進行投藥，避免後續重症的發生。</p>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/05/20/2022/about_covid_19_in_taiwan/" data-id="cm844qkkl00a22smxd1pcaojo" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/05/20/2022/about_covid_19_in_taiwan/#disqus_thread" class="article-comment-link">留言</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2022/typescript_tips" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/05/15/2022/typescript_tips/" class="article-date">
  <time datetime="2022-05-15T02:00:57.000Z" itemprop="datePublished">2022-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/05/15/2022/typescript_tips/"> [活動筆記] 線上活動 TypeScript tips and Tricks with Matt</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>YouTube 頻道<a target="_blank" rel="noopener" href="https://www.youtube.com/channel/UCs5Y5_7XK8HLDX0SLNwkd3w">Visual Studio Code</a><br>前陣子推出了由大神 Matt 所介紹有關 TypeScript 奇技淫巧<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=hBk4nV7q6-w">影片</a><br>相當燒腦，特別作此記錄。</p>
<h2 id="5-06-generic-table-component"><a href="#5-06-generic-table-component" class="headerlink" title="5:06 generic-table-component"></a>5:06 <a target="_blank" rel="noopener" href="https://aka.ms/typescript/1">generic-table-component</a></h2><p>難度:★★☆☆☆</p>
<p>這題需要有一些 React 的基礎概念，<br>首先我們有一些 React Component(以下簡稱 RC)，<br>並且用 interface 建立相對應 props。</p>
<p>問題是如果要讓我們的 RC 更泛用應該怎麼作，<br>在這個例子中，我們建立了一個 Table RC(以下簡稱 Table) ，並且在 props 中傳入一些參數，<br>這個參數的型別，直接與 Table 產生了耦合，我們可用泛型(Generic)處理。</p>
<h3 id="Before"><a href="#Before" class="headerlink" title="Before"></a>Before</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface <span class="title class_">TableProps</span> &#123;</span><br><span class="line">  <span class="attr">items</span>: &#123; <span class="attr">id</span>: string &#125;[];</span><br><span class="line">  <span class="attr">renderItem</span>: <span class="function">(<span class="params">item: &#123; id: string &#125;</span>) =&gt;</span> <span class="title class_">React</span>.<span class="property">ReactNode</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">Table</span> = (<span class="params">props: TableProps</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="After"><a href="#After" class="headerlink" title="After"></a>After</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">TableProps</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="attr">items</span>: T[];</span><br><span class="line">  <span class="attr">renderItem</span>: <span class="function">(<span class="params">item: T</span>) =&gt;</span> <span class="title class_">React</span>.<span class="property">ReactNode</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">Table</span> = &lt;T,&gt;<span class="function">(<span class="params">props: TableProps&lt;T&gt;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>這裡是很簡單的泛型觀念，如果有寫過具備泛型的語言(ex:C#)應該不難理解，<br>另外需要注意的一個有關 React 的小小 Tricky<br>注意到 <code>&lt;T,&gt;</code> 這裡有一個小小的逗號，其實是不必要的，<br>但是在 React 的開發環境之中，角括號<code>&lt;&gt;</code>會被視為未封閉的 RC;<br>封閉的例子，ex:<code>&lt;myComponent&gt;&lt;/myComponent&gt;</code> 或是 <code>&lt;myComponent /&gt;</code><br>未了必免編輯器的警告，需要加上一個逗號<code>,</code></p>
<p>另外這裡在寫 React Component 時，使用了 arrow function，<br>我們也可以換成一般的 function 寫法,這種寫法就可以省略 <code>&lt;T,&gt;</code> 這樣 tricky 的寫法</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">Table</span> = <span class="keyword">function</span> &lt;T&gt;(<span class="attr">props</span>: <span class="title class_">TableProps</span>&lt;T&gt;) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>泛型不難理解，但是考量到需要具備的 React 知識，難度我給他兩顆星</p>
<h2 id="11-19-get-deep-value"><a href="#11-19-get-deep-value" class="headerlink" title="11:19 get-deep-value"></a>11:19 <a target="_blank" rel="noopener" href="https://aka.ms/typescript/2">get-deep-value</a></h2><p>難度:★★★☆☆</p>
<p>這題要動態的取出物件深層的屬性的型別，<br>具體好處是可以讓編輯型別檢查</p>
<p>看一下影片中的範例 <code>getDeepValue</code> 是一個函數，可以用來取物件深層屬性的值<br>這裡我們看到 <code>obj:any</code> Matt 說道可以視作一個壞味道(不知道他對 unknown 的看法)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getDeepValue</span> = (<span class="params">obj: any, firstKey: string, secondKey: string</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> obj[firstKey][secondKey];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>看一下原始範例如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">foo</span>: &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">b</span>: <span class="number">2</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">bar</span>: &#123;</span><br><span class="line">    <span class="attr">c</span>: <span class="string">&quot;12&quot;</span>,</span><br><span class="line">    <span class="attr">d</span>: <span class="number">18</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="我的作法"><a href="#我的作法" class="headerlink" title="我的作法"></a>我的作法</h3><p>如果比較直觀的寫法可以考慮寫個 ObjectType,</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// this one is NOT from the sample</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">obj</span>: <span class="title class_">ObjType</span> = &#123;</span><br><span class="line">  <span class="attr">foo</span>: &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">b</span>: <span class="number">2</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">bar</span>: &#123;</span><br><span class="line">    <span class="attr">c</span>: <span class="string">&quot;12&quot;</span>,</span><br><span class="line">    <span class="attr">d</span>: <span class="number">18</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">FirstKeyType</span> = <span class="string">&quot;foo&quot;</span> | <span class="string">&quot;bar&quot;</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">SecondKeyType</span> = <span class="string">&quot;a&quot;</span> | <span class="string">&quot;b&quot;</span> | <span class="string">&quot;c&quot;</span> | <span class="string">&quot;d&quot;</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ObjType</span> = &#123;</span><br><span class="line">  [key <span class="keyword">in</span> <span class="title class_">FirstKeyType</span>]: &#123; <span class="attr">a</span>: <span class="built_in">boolean</span>; <span class="attr">b</span>: <span class="built_in">number</span> &#125; | &#123; <span class="attr">c</span>: <span class="built_in">string</span>; <span class="attr">d</span>: <span class="built_in">number</span> &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getDeepValue = (<span class="attr">obj</span>: <span class="title class_">ObjType</span> <span class="comment">//...</span></span><br></pre></td></tr></table></figure>

<p>註:這裡有用到 <a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/2/objects.html#index-signatures">index-signatures</a> 的概念<br>看看官方文件的說法:</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Sometimes you don’t know all the names of a type’s properties ahead of time, but you do know the shape of the values.</span><br><span class="line"></span><br><span class="line">In those cases you can use an index signature to describe the types of possible values</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> value = <span class="title function_">getDeepValue</span>(obj, <span class="string">&quot;foo&quot;</span>, <span class="string">&quot;a&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="Matt-在影片中的作法"><a href="#Matt-在影片中的作法" class="headerlink" title="Matt 在影片中的作法"></a>Matt 在影片中的作法</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getDeepValue = &lt;</span><br><span class="line">  <span class="title class_">TObj</span>,</span><br><span class="line">  <span class="title class_">TFirstKey</span> <span class="keyword">extends</span> keyof <span class="title class_">TObj</span>,</span><br><span class="line">  <span class="title class_">TSecondKey</span> <span class="keyword">extends</span> keyof <span class="title class_">TObj</span>[<span class="title class_">TFirstKey</span>]</span><br><span class="line">&gt;<span class="function">(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">  obj: TObj,</span></span></span><br><span class="line"><span class="params"><span class="function">  firstKey: TFirstKey,</span></span></span><br><span class="line"><span class="params"><span class="function">  secondKey: TSecondKey</span></span></span><br><span class="line"><span class="params"><span class="function"></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> obj[firstKey][secondKey];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/2/keyof-types.html#handbook-content">keyof 關鍵字可以直接參考官方文件</a></p>
<h3 id="比較兩者的作法"><a href="#比較兩者的作法" class="headerlink" title="比較兩者的作法"></a>比較兩者的作法</h3><p>我們加上了 Type，就是要為程式碼加上保護<br>我跟 Matt 的作法，下面的程式碼都會提出警告</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> error_value = <span class="title function_">getDeepValue</span>(obj, <span class="string">&quot;error&quot;</span>, <span class="string">&quot;wrong&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>但是無法避免以下的錯誤</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> error_value = <span class="title function_">getDeepValue</span>(obj, <span class="string">&quot;foo&quot;</span>, <span class="string">&quot;c&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><code>obj.foo</code> 是不存在 <code>c</code> 屬性，這樣我們就需要動態判斷型別<br>看看 Matt 使用 <code>keyof</code> 作法。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getDeepValue = &lt;<span class="title class_">TObj</span>, <span class="title class_">TFirstKey</span> <span class="keyword">extends</span> keyof <span class="title class_">TObj</span>&gt;<span class="function">(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">  obj: TObj,</span></span></span><br><span class="line"><span class="params"><span class="function">  firstKey: TFirstKey,</span></span></span><br><span class="line"><span class="params"><span class="function">  secondKey: keyof TObj[TFirstKey]</span></span></span><br><span class="line"><span class="params"><span class="function"></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> obj[firstKey][secondKey];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>這裡有點不可思議，首先是 ts 的動態型別推導，<br>在呼叫方法 getDeepValue 的第 1 個參數會動態推導出 TObj 的型別<br>大概等價以下的型別</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">TObj</span> = &#123;</span><br><span class="line">  <span class="attr">foo</span>: &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="built_in">boolean</span>;</span><br><span class="line">    <span class="attr">b</span>: <span class="built_in">number</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="attr">bar</span>: &#123;</span><br><span class="line">    <span class="attr">c</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">d</span>: <span class="built_in">number</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><code>keyof TObj</code> 的值會是 <code>foo | bar</code><br>而 TFirstKey 的型別，在第 2 個參數傳入之時決定是 <code>foo</code> 或 <code>bar</code>，<br>不是上述兩種的參數傳入時，編輯會拋出錯誤警告，非常好用。<br>下一個燒腦的部份，第 3 個參數 <code>secondKey: keyof TObj[TFirstKey]</code>，<br>透過類似陣列取值的手法，我們可以在傳入第 2 個參數時決定第 3 個參數的值，並且讓編輯器提供保護。<br>例如，第 2 個參數為 <code>foo</code> 時，第 3 個參數會限定只能傳入 <code>&quot;a&quot;|&quot;b&quot;</code></p>
<p>這裡需要思考一下，並不難理解，所以給 3 顆星。</p>
<p>如果能應用得好的話，對於開發 ts Library 會相當有幫助<br>不過我覺得自已無法用得很得心應手，比如說，如果物件深度不固定，應該如處理？<br>又或者如果不用 <code>keyof</code> 的技巧，對一個已知的物件，我能不能作到類似的效果(編輯器動態檢查)?</p>
<h2 id="28-54-conditional-types"><a href="#28-54-conditional-types" class="headerlink" title="28:54 conditional-types"></a>28:54 <a target="_blank" rel="noopener" href="https://aka.ms/typescript/3">conditional-types</a></h2><p>難度:★★★☆☆</p>
<p>這其實是 TypeScript 一個基本的概念與技巧，<br>可以在<a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/2/conditional-types.html">官方文件</a>看到更多資訊</p>
<p>一個標準的寫法如下</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">SomeType</span> <span class="keyword">extends</span> <span class="title class_">OtherType</span> ? <span class="title class_">TrueType</span> : <span class="title class_">FalseType</span>;</span><br></pre></td></tr></table></figure>

<p>記得這裡最終只會回傳 TrueType 或是 FalseType，而 SomeType 只是作為條件檢查。<br>當然也可以作多重的條件檢查</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">SomeType</span> <span class="keyword">extends</span> <span class="title class_">OtherType</span> ?</span><br><span class="line">  <span class="title class_">TrueType</span> :</span><br><span class="line">  <span class="title class_">SomeType</span> <span class="keyword">extends</span> <span class="title class_">OtherConditionType</span>?</span><br><span class="line">  <span class="title class_">OtherThing</span> :</span><br><span class="line">  <span class="title class_">FalseType</span>;</span><br></pre></td></tr></table></figure>

<h3 id="35-20-更進一步"><a href="#35-20-更進一步" class="headerlink" title="35:20 更進一步"></a>35:20 更進一步</h3><p>我們看一下怎麼應用 Condition Type 這個技巧?<br>參考<a target="_blank" rel="noopener" href="https://aka.ms/typescript/9">error-messages-in-ts</a>這個教案<br>在 deepEqualCompare 這個方法之中，陣列比較需要例外處理，<br>因為陣列比較永遠會回傳 false<br>原本的作法，會在程式的 runtime 作型別檢查並拋出例外</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> deepEqualCompare = &lt;<span class="title class_">Arg</span>&gt;(<span class="attr">a</span>: <span class="title class_">Arg</span>, <span class="attr">b</span>: <span class="title class_">Arg</span>): <span class="function"><span class="params">boolean</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// runtime handle</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(a) || <span class="title class_">Array</span>.<span class="title function_">isArray</span>(b)) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;You cannot compare two arrays using deepEqualCompare&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> a === b;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>而透過 condition type，可以讓編輯器在開發時直接檢查，看起來更加的優雅</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> deepEqualCompare = &lt;<span class="title class_">Arg</span>&gt;(</span><br><span class="line">  <span class="attr">a</span>: <span class="title class_">Arg</span> <span class="keyword">extends</span> <span class="built_in">any</span>[] ? <span class="string">&quot;not allow array&quot;</span> : <span class="title class_">Arg</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="title class_">Arg</span> <span class="keyword">extends</span> <span class="built_in">any</span>[] ? <span class="string">&quot;not allow array&quot;</span> : <span class="title class_">Arg</span></span><br><span class="line">): <span class="function"><span class="params">boolean</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a === b;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>這應該算是 TypeScript 的基本工，也有在官方文件上有很清楚的講解，<br>對我來說，第一次看到仍然相當驚訝，我給他三顆星<br>另外，我有兩個延申問題，</p>
<ol>
<li>程式碼中有 any 算不算壞味道? 我是不是應該用 <code>unknown[]</code> 取代 <code>any[]</code></li>
<li><code>Arg extends any[] ? &quot;not allow array&quot; : Arg</code> 明顯出現了重複，我有沒有什麼技巧可以消除這樣的重複?</li>
</ol>
<h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><p>整個影片還有許多燒腦的部分，<br>Q&amp;A 或是最後的挑戰都有相當多有趣的東西的可挖掘，<br>有機會我再補上。</p>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/type-challenges/type-challenges/tree/main/questions">Type-Challenges</a></li>
<li>Matt’s Tips &amp; Tricks<ul>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/1">generic-table-component</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/2">get-deep-value</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/3">conditional-types</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/4">loose-autocomplete</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/5">compose</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/6">conditional-function-args</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/7">distributive-conditional-types</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/8">object-values</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/9">error-messages-in-ts</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/10">search-params-decoding</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://dev.to/samwightt/today-in-typescript-the-keyof-operator-445b">Today in TypeScript: the keyof operator</a></li>
<li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/zod">zod</a></li>
<li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/ts-toolbelt">ts-toolbelt</a></li>
<li><a target="_blank" rel="noopener" href="https://stately.ai/">Matt 目前的專案 stately</a></li>
<li><a target="_blank" rel="noopener" href="https://twitter.com/mpocock1">Matt 的推特</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/05/15/2022/typescript_tips/" data-id="cm844qkl000bs2smx20tyf7sb" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/05/15/2022/typescript_tips/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2022/hexo_customerize_helper" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/05/10/2022/hexo_customerize_helper/" class="article-date">
  <time datetime="2022-05-10T02:17:05.000Z" itemprop="datePublished">2022-05-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/05/10/2022/hexo_customerize_helper/"> [實作筆記] 自定義 Hexo Helper</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>我的 Blog 目前是使用 Hexo 搭建的,<br>使用的主題是 <code>landscape</code> 。<br>隨著時光推移, Hexo 漸漸從人們的目光淡出,<br>主功能、文件、翻譯或是外掛、主題等…, 更新速度變慢很多</p>
<p>我想改寫主題當中的某個輔助函數（Helper), 稍微記錄一下作法。</p>
<h2 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h2><p>首先是檔案位置，一個是在根目錄底下建立 <code>scripts</code> 資料夾，<br>或者你正在使用主題(Theme)底下。<br>以我的例子來說，我會放在 <code>themes/landscape/scripts</code> 底下</p>
<p>參考下面的圖示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">├── scripts</span><br><span class="line">│   ├── index.js</span><br><span class="line">│   └── your_helper_here.js</span><br><span class="line">├── themes</span><br><span class="line">│   └── the_theme_you_are_using</span><br><span class="line">│       └── scripts</span><br><span class="line">│           ├── index.js</span><br><span class="line">│           └── your_helper_here.js</span><br></pre></td></tr></table></figure>

<p>下一步，你需要建立 <code>index.js</code>,並在其入註冊你的函數,</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//hexo.extend.helper.register(name, function)</span></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">helper</span>.<span class="title function_">register</span>(<span class="string">&quot;helper_name&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;&lt;div&gt;your helper function &lt;/div&gt;&quot;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>通常 helper 不會是一個簡單的函數，且會有 UI 相關的程式，<br>有為了方便管理，我會拆檔，再用 <code>require</code> 來引入函數</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo.<span class="property">extend</span>.<span class="property">helper</span>.<span class="title function_">register</span>(<span class="string">&quot;helper_name&quot;</span>, <span class="built_in">require</span>(<span class="string">&quot;./helper_file_name&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>最後，在 *.ejs 檔案中使用 helper</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- <span class="title function_">helper_name</span>() %&gt;</span><br></pre></td></tr></table></figure>

<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://hexo.bootcss.com/api/helper.html">Hexo 輔助函數</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.haysc.tech/custom-helper-hexo/">詳解 Hexo 輔助函數</a></li>
<li><a target="_blank" rel="noopener" href="https://titangene.github.io/article/hexo-markdown-it.html">將 Hexo 的 Markdown 渲染引擎換成 markdown-it</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/05/10/2022/hexo_customerize_helper/" data-id="cm844qkkr00au2smxags36jdn" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/05/10/2022/hexo_customerize_helper/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2022/dotnet_namespace" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/05/03/2022/dotnet_namespace/" class="article-date">
  <time datetime="2022-05-03T07:13:12.000Z" itemprop="datePublished">2022-05-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/05/03/2022/dotnet_namespace/"> [實作筆記] Dotnet Core 實作隨筆</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Web-Api-專案統一錯誤處理"><a href="#Web-Api-專案統一錯誤處理" class="headerlink" title="Web&#x2F;Api 專案統一錯誤處理"></a>Web&#x2F;Api 專案統一錯誤處理</h2><p>首先建立一個新的類別 <code>ErrorHandlingFilter</code><br>繼承 <code>ExceptionFilterAttribute</code> 並複寫 <code>OnException</code> 函數</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ErrorHandlingFilter</span> : <span class="title">ExceptionFilterAttribute</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnException</span>(<span class="params">ExceptionContext context</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//do your logical here</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 Program.cs 中注入</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">builder.Services.AddControllers(options =&gt; &#123; options.Filters.Add(<span class="keyword">new</span> ErrorHandlingFilter()); &#125;);</span><br></pre></td></tr></table></figure>

<h2 id="專案更改-Root-Namespace"><a href="#專案更改-Root-Namespace" class="headerlink" title="專案更改 Root Namespace"></a>專案更改 Root Namespace</h2><p>預設會使用專案名稱作為整個專案的 Root Namespace，<br>但是我們可以在 csproj 檔中設定 <code>RootNamespace</code> 讓它與專案名稱有所差異</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Project Sdk=<span class="string">&quot;Microsoft.NET.Sdk.Web&quot;</span>&gt;</span><br><span class="line">  &lt;PropertyGroup&gt;</span><br><span class="line">    &lt;TargetFramework&gt;net6<span class="number">.0</span>&lt;/TargetFramework&gt;</span><br><span class="line">    &lt;RootNamespace&gt;MyNameSpace&lt;/RootNamespace&gt;</span><br><span class="line">  &lt;/PropertyGroup&gt;</span><br><span class="line">&lt;/Project&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Nuget"><a href="#Nuget" class="headerlink" title="Nuget"></a>Nuget</h2><h3 id="add-nuget-registry"><a href="#add-nuget-registry" class="headerlink" title="add nuget registry"></a>add nuget registry</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet nuget add <span class="built_in">source</span> &lt;registry url&gt; -n SourceName -u UserName -p Password --store-password-in-clear-text</span><br></pre></td></tr></table></figure>

<h3 id="pack"><a href="#pack" class="headerlink" title="pack"></a>pack</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet pack -o &lt;output folder&gt; -c NUGET --no-dependencies --force  -p:PackageVersion=&lt;version&gt;</span><br></pre></td></tr></table></figure>

<h3 id="push"><a href="#push" class="headerlink" title="push"></a>push</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet nuget push -s SourceName &lt;Packed Version&gt;</span><br></pre></td></tr></table></figure>

<h2 id="建立共用的-HttpClient"><a href="#建立共用的-HttpClient" class="headerlink" title="建立共用的 HttpClient"></a>建立共用的 HttpClient</h2><p>在 Program.cs 中註冊</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">builder.Services.AddHttpClient(<span class="string">&quot;ThirdService&quot;</span>, (provider, client) =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> o = provider.GetRequiredService&lt;IOptions&lt;ThirdServiceOptions&gt;&gt;();</span><br><span class="line">    client.BaseAddress = <span class="keyword">new</span> Uri(<span class="string">$&quot;<span class="subst">&#123;o.Value.Url&#125;</span>/&quot;</span>);</span><br><span class="line">    client.DefaultRequestHeaders.Accept.Add(<span class="keyword">new</span> MediaTypeWithQualityHeaderValue(<span class="string">&quot;application/json&quot;</span>));</span><br><span class="line">    client.DefaultRequestHeaders.Authorization = <span class="keyword">new</span> AuthenticationHeaderValue(<span class="string">&quot;Bearer&quot;</span>, o.Value.Token);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>再透過 HttpClientFactory 具名取用</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyService</span>(<span class="params">IHttpClientFactory httpClientFactory</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">  HttpClient _httpClient = httpClientFactory.CreateClient(<span class="string">&quot;ThirdService&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最小化-Docker-Image"><a href="#最小化-Docker-Image" class="headerlink" title="最小化 Docker Image"></a>最小化 Docker Image</h2><p>這一種被稱為 Multiple Stage Builds 的 Docker 技巧，<br>主要的概念是將建置(Build)與部署(Deploy)的步驟分開，<br>最終只部署出營運所需的映象檔(Image)。</p>
<p>比如說下面的 <code>Docker File</code> 就是將 dotnet 專案作了兩步驟的處理</p>
<p>此外，如果我們更換適當的 Image，<br>比如說，在 Create Runtime Image Step，<br>將 <code>mcr.microsoft.com/dotnet/aspnet:6.0</code> 改為 <code>mcr.microsoft.com/dotnet/aspnet:6.0-alpine</code><br>映象檔的 Size 將減少 46.6% (216.11 MB → 115.4 MB)</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Build Step</span></span><br><span class="line"><span class="keyword">FROM</span> mcr.microsoft.com/dotnet/sdk:<span class="number">6.0</span> AS build</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /source</span></span><br><span class="line"><span class="comment"># copy everything else and build app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> /src/WebAPI/. ./WebApi/</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /source/WebApi</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> dotnet restore <span class="string">&#x27;WebApi.csproj&#x27;</span></span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> dotnet build <span class="string">&#x27;WebApi.csproj&#x27;</span> -c release -o /app --no-restore</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> dotnet publish <span class="string">&#x27;WebApi.csproj&#x27;</span> -c release -o /app --no-restore</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create Runtime Image Step</span></span><br><span class="line"><span class="keyword">FROM</span> mcr.microsoft.com/dotnet/aspnet:<span class="number">6.0</span>-alpine</span><br><span class="line"><span class="keyword">ENV</span> ASPNETCORE_URLS=http://+:<span class="number">5110</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=build /app ./</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">5110</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;dotnet&quot;</span>, <span class="string">&quot;WebApi.dll&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-tw/aspnet/core/fundamentals/http-requests?view=aspnetcore-6.0">在 ASP.NET Core 中使用 IHttpClientFactory 發出 HTTP 要求</a></li>
<li><a target="_blank" rel="noopener" href="https://jiepeng.me/2018/06/09/use-docker-multiple-stage-builds">透過 Multiple Stage Builds 編譯出最小的 Docker Image</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/05/03/2022/dotnet_namespace/" data-id="cm844qkkn00ac2smxc91l9z37" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/05/03/2022/dotnet_namespace/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2022/dotnet_configuration" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/05/01/2022/dotnet_configuration/" class="article-date">
  <time datetime="2022-05-01T18:05:12.000Z" itemprop="datePublished">2022-05-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/05/01/2022/dotnet_configuration/"> [實作筆記] ASP.Net Core Config 的隨筆</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="提要"><a href="#提要" class="headerlink" title="提要"></a>提要</h2><ul>
<li>DI Configuration</li>
<li>組態的層次</li>
<li>Options Pattern</li>
</ul>
<h3 id="DI-Configuration"><a href="#DI-Configuration" class="headerlink" title="DI Configuration"></a>DI Configuration</h3><p>dotnet webapi 專案預設會注入 IConfiguration ，<br>在專案中的程式建構子放入 <code>IConfiguration</code> 就可以直接取得組態設定</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">readonly</span> IConfiguration _config;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">WeatherForecastController</span>(<span class="params">IConfiguration config</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    _config = config;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[<span class="meta">HttpGet(Name = <span class="string">&quot;GetWeatherForecast&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">Get</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> _config[<span class="string">&quot;ASPNETCORE_ENVIRONMENT&quot;</span>]!;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>你可以將組態設定在 <code>appsettings.json</code> 之中<br>或是透過環境變數，使用環境變數有幾種作法</p>
<ul>
<li>設定在機器上</li>
<li>設定在 Cloud Service 所提供的組態管理工具之中</li>
<li>使用 <code>launchSettings.json</code></li>
</ul>
<p>在開發環境我會使用 <code>launchSettings</code> 好處是可以不需要真的在開發機的環境中設定環境變數，<br>對同時擁有多個專案的開發者而言，可以有效隔離不同的專案變數，避免彼此影響污染</p>
<h3 id="組態的層次"><a href="#組態的層次" class="headerlink" title="組態的層次"></a>組態的層次</h3><p>為了方便管理，我們可以透過組態的層次來加以分門別類。<br>比如說:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;Level&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;First&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1st Value&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;Second&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2nd Value&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<p>一般的 JSON 或 XML 要作到這樣的層次結構都相當的簡單，<br>而要取用組態的方式如下:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> key = _config[<span class="string">&quot;Level:First:Key&quot;</span>];</span><br></pre></td></tr></table></figure>

<p>不過我們要注意環境變數並無法使用<code>:</code>字符，也沒有 JSON 或是 XML 所能提供的結構，<br>這裡要注意可以用 __(雙底線(Double underscore))來建立層次。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$Level__First__Key</span><br><span class="line">$Level__Second__Key</span><br></pre></td></tr></table></figure>

<h3 id="Options-Pattern"><a href="#Options-Pattern" class="headerlink" title="Options Pattern"></a><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-tw/aspnet/core/fundamentals/configuration/options?view=aspnetcore-6.0">Options Pattern</a></h3><p>Options Pattern 可以提供一種更物件導向的組態配置解決方案，<br>你只需要兩個步驟，即可實作 Options Pattern</p>
<ol>
<li><p>建立 Option 物件<br>我在這裡提供二種不同的方法，後面會再說明</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法一 Dictionary</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">LevelOptions</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">string</span> Level = <span class="string">&quot;Level&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Dictionary&lt;<span class="built_in">string</span>,<span class="built_in">string</span>&gt; First &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法二 Object</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">LevelOption</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">string</span> Level = <span class="string">&quot;Level&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> FirstOptions First &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FirstOptions</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Key &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125; = <span class="built_in">string</span>.Empty;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>註冊 Option 物件</p>
</li>
</ol>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">builder.Services.Configure&lt;LevelOptions&gt;(LevelOption.Level)</span><br></pre></td></tr></table></figure>

<p>最後是讀取組態，在方法一(使用 Dictionary)的方法讀取</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> key = _options.Value.First[<span class="string">&quot;Key&quot;</span>];</span><br></pre></td></tr></table></figure>

<p>或是方法二(使用 Object)的方法讀取</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> key = _options.Value.First.Key;</span><br></pre></td></tr></table></figure>

<p>兩種方法都可以，物件化的方法需要建立多個物件，<br>但是在取用組態的過程就不會有 hard coding string;<br>反之 Dictionary 的方法可以少寫很多物件。</p>
<p>對我而言我比較偏向使用 Object 的方法去處理，只要適當的分類，<br>物件多並不是問題，而且通常一次不會增加太多的組態，可以迭代增量。</p>
<p>順代一提，如果組態檔層次太多，會是另一個困擾 ? 我的建議是，如果組態的深度到達 3 時，<br>需要考慮這是不是一個壞味道，是不是過度優化了 ?<br>實務上來說，我會避免建立超過 3 層，也很難會有一定要超過 3 層的情境，<br>如果你有什麼情境上需要超過 3 層，可以留言給我，我們可以一起討論。</p>
<h3 id="在-Program-cs-使用"><a href="#在-Program-cs-使用" class="headerlink" title="在 Program.cs 使用"></a>在 Program.cs 使用</h3><p>如果在 <code>Program.cs</code> 的注入階段，如果要取得組態，<br>可以用<br><code>(new ConfigurationManager()).GetSection(&quot;First&quot;)[&quot;Key&quot;]</code><br>或是 <code>Environment.GetEnvironmentVariable(&quot;Level__First__Key&quot;);</code> 等方法取得組態。<br>但是我更推薦 ServiceProvider 的 GetRequiredService 取得 Options</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注入在前</span></span><br><span class="line">builder.Services.Configure&lt;LevelOption&gt;(builder.Configuration.GetSection(LevelOption.Level));</span><br><span class="line">builder.Services.AddHttpClient(<span class="string">&quot;OtherService&quot;</span>, (provider, client) =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//透過 provider 取得 config</span></span><br><span class="line">    <span class="keyword">var</span> o = provider.GetRequiredService&lt;IOptions&lt;LevelOptions&gt;&gt;();</span><br><span class="line">    client.BaseAddress = <span class="keyword">new</span> Uri(<span class="string">$&quot;<span class="subst">&#123;o.Value.Url&#125;</span>/&quot;</span>);</span><br><span class="line">    client.DefaultRequestHeaders.Accept.Add(<span class="keyword">new</span> MediaTypeWithQualityHeaderValue(<span class="string">&quot;application/json&quot;</span>));</span><br><span class="line">    client.DefaultRequestHeaders.Authorization = <span class="keyword">new</span> AuthenticationHeaderValue(<span class="string">&quot;Bearer&quot;</span>, o.Value.Token);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>這樣就可以用一致的方法取得組態了。</p>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-tw/aspnet/core/fundamentals/configuration/?view=aspnetcore-6.0">ASP.NET Core 的設定</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-tw/aspnet/core/fundamentals/configuration/options?view=aspnetcore-6.0">ASP.NET Core 中的選項模式</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-tw/dotnet/core/extensions/options">.NET 中的選項模式</a></li>
<li><a target="_blank" rel="noopener" href="https://andrewlock.net/exploring-dotnet-6-part-1-looking-inside-configurationmanager-in-dotnet-6/">Looking inside ConfigurationManager in .NET 6</a></li>
<li><a target="_blank" rel="noopener" href="https://www.evernote.com/shard/s36/sh/20abd4ce-f7e2-47ef-9bc6-36971709348a/d0d0525f9b4b7e5dcf1493eca0b8c232">你可能不知道的.Net Core Configuration(Evernote 備份)</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/05/01/2022/dotnet_configuration/" data-id="cm844qkkn00aa2smx8gv77i3x" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/05/01/2022/dotnet_configuration/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2022/google_analytics" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/26/2022/google_analytics/" class="article-date">
  <time datetime="2022-04-26T12:12:53.000Z" itemprop="datePublished">2022-04-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/26/2022/google_analytics/"> [實作筆記] Hexo 更新 Google Analytics 4</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>幾天前收到來自 Google Analytics 的這樣一封信</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Google Analytics (分析) 4 即將取代通用 Analytics (分析)</span><br><span class="line"></span><br><span class="line">我們即將以新一代的成效評估解決方案 Google Analytics (分析) 4，</span><br><span class="line">取代通用 Analytics (分析)。從 2023 年 7 月 1 日起，通用 Analytics (分析) 資源將停止處理新的命中資料；</span><br><span class="line">如果通用 Analytics (分析) 仍是您常用的工具，建議您採行相應措施，準備好改用 Google Analytics (分析) 4</span><br></pre></td></tr></table></figure>

<h2 id="實作步驟"><a href="#實作步驟" class="headerlink" title="實作步驟"></a>實作步驟</h2><p>參考以前我寫的這篇–<a href="https://blog.marsen.me/2016/08/25/2016/add_google_analytics_to_hexo_blog_1/">如何讓 Google Analytics 追踪你的 Hexo Blog</a>，<br>我們知道在 hexo 的佈景主題 <code>landscape</code> 有提供舊版 GA 的設定，<br>我們只需要修改 <code>theme/layout/_partial/google-analytics.ejs</code> 即可<br>程式參考如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (theme.<span class="property">google_analytics</span>)&#123; %&gt;</span><br><span class="line">&lt;!-- <span class="title class_">Google</span> <span class="title class_">Analytics</span> --&gt;</span><br><span class="line">&lt;!-- <span class="title class_">Global</span> site tag (gtag.<span class="property">js</span>) - <span class="title class_">Google</span> <span class="title class_">Analytics</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">&quot;https://www.googletagmanager.com/gtag/js?id=&lt;%= theme.google_analytics %&gt;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">window</span>.<span class="property">dataLayer</span> = <span class="variable language_">window</span>.<span class="property">dataLayer</span> || [];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">function</span> <span class="title function_">gtag</span>(<span class="params"></span>)&#123;dataLayer.<span class="title function_">push</span>(<span class="variable language_">arguments</span>);&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">gtag</span>(<span class="string">&#x27;js&#x27;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>());</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">gtag</span>(<span class="string">&#x27;config&#x27;</span>, <span class="string">&#x27;&lt;%= theme.google_analytics %&gt;&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;!-- <span class="title class_">End</span> <span class="title class_">Google</span> <span class="title class_">Analytics</span> --&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>

<p>由於通用 GA 在 2023 年後就不再支援，所以我就不特地處理相容，直接切換到 GA4</p>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo-theme-landscape">Hexo Theme Landscape</a></li>
<li><a href="https://blog.marsen.me/2016/08/25/2016/add_google_analytics_to_hexo_blog_1/">如何讓 Google Analytics 追踪你的 Hexo Blog</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/04/26/2022/google_analytics/" data-id="cm844qkkq00ap2smxhpl3b6wo" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/04/26/2022/google_analytics/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2022/mock_typescript_interface" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/07/2022/mock_typescript_interface/" class="article-date">
  <time datetime="2022-04-07T18:20:08.000Z" itemprop="datePublished">2022-04-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/07/2022/mock_typescript_interface/"> [實作筆記] 簡單的方法 Mock TypeScript Interface</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>我目前在實作一個 React 的專案，並結合 Storybook 來實現 CDD(component driven development)，<br>我很喜歡 CDD 的概念，這裡解決 TDD 對 View 難以趨動開發的痛點，<br>但是又維持了 Unit Test 的基本精神，進一步結合 Chromatic 可以提供視覺化的檢核頁面，<br>作為與 PO&#x2F;PM&#x2F;UX&#x2F;UI&#x2F;DESIGNER 之間的溝通工具非常好用。</p>
<h2 id="問題"><a href="#問題" class="headerlink" title="問題"></a>問題</h2><p>我作了一個簡單的 Header 組件，<br>這通常是網站或 APP 上方的區塊，通常會提供一些額外的資訊或功能，<br>例如: 登入&#x2F;登出，而這裡我使用 Firebase 作為實作登入&#x2F;登出的功能，<br>作為主要的邏輯判斷，firebase 的 Auth 物件會被傳入</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Header</span> = <span class="function">(<span class="params">props: &#123; sighOut: () =&gt; <span class="built_in">void</span>; auth?: Auth &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>這裡我們先不討論 Auth 的邏輯是否應該與 Header 相依(嗯，這裡看起來是個壞味道)，<br><strong>而是在我們的 Storybook 撰寫測試案例時，應該如何 mock Auth 物件。</strong><br>我的程式都是用 TypeScript 與 tsx 寫的，<br>所以如果不符合型別，IDE 會直接報錯，程式跟本無法執行</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Template</span>: <span class="title class_">ComponentStory</span>&lt;<span class="keyword">typeof</span> <span class="title class_">Header</span>&gt; = <span class="function">() =&gt;</span> (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Header</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">sighOut</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">      alert(&quot;mocked Signout&quot;);</span></span><br><span class="line"><span class="language-xml">    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    auth=&#123;mockAuth&#125;</span></span><br><span class="line"><span class="language-xml">  /&gt;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="試過的方法"><a href="#試過的方法" class="headerlink" title="試過的方法"></a>試過的方法</h3><ul>
<li>jest Mock</li>
<li>ts-mockito</li>
<li>ts-auto-mock</li>
</ul>
<p>以上的方法有的成功，有的失敗，最大的問題是在配置與撰寫其實很麻煩，<br>甚至會有同事說為什麼要用 TypeScript 自找麻煩呢 ?</p>
<p>逐一 mock 所有 interface 的屬性，對於一個像 Auth 這樣複雜的介面實作上相當麻煩，<br>而且大多 mock 的屬性都用不到</p>
<p>我的想法是，應該是我對 TypeScript 與其生態圈不夠了解，寫起來才會覺得綁手綁腳的，<br>不能推缷給程式語言，同時 TypeScript 強型別的好處，其實也幫了我不少。<br>仔細研究後，我找到一個簡單方法如下:</p>
<h2 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h2><p>不需要 mock Library ， 不需要麻煩的設定或是第三方套件，<br>最簡單的寫法 <code>as</code> 就可以將物件 mock 成為你想要的 Interface</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mockAuth = &#123;</span><br><span class="line">  <span class="attr">currentUser</span>: &#123; <span class="attr">email</span>: <span class="string">&quot;marsen@test.me&quot;</span> &#125;,</span><br><span class="line">&#125; <span class="keyword">as</span> <span class="title class_">Auth</span>;</span><br></pre></td></tr></table></figure>

<p>這樣的寫法除了可以只 mock 必要的屬性外，<br>如果你物件中包含了不屬於介面應有的屬性，<br>TypeScript 將會提出警告，非常好用。</p>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/04/07/2022/mock_typescript_interface/" data-id="cm844qkkx00bb2smx0fla0dgx" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/04/07/2022/mock_typescript_interface/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2022/update_react_18_with_typescript" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/07/2022/update_react_18_with_typescript/" class="article-date">
  <time datetime="2022-04-07T18:20:08.000Z" itemprop="datePublished">2022-04-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/07/2022/update_react_18_with_typescript/"> [實作筆記] 升級現有基於 TypeScript 的 React 17 專案到 React 18</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>升級 React 在官方的文件之中，似乎是一件極為簡單的事，<br>但是如果你的專案是基於 TypeScript 開發，<br>在前幾周應該無法順利升級，主要的原因是相對應的 @types 套件並未同時更新，<br>幸運的是，現在看到文章的你，已經可以順利更新了，請參考以下的步驟。</p>
<h2 id="記錄"><a href="#記錄" class="headerlink" title="記錄"></a>記錄</h2><p>安裝 react、react-dom、@types&#x2F;react、＠types&#x2F;react-dom</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i react@18 react-dom@18 @types/react@18 @types/react-dom@18</span><br></pre></td></tr></table></figure>

<p>更改 <code>ReactDOM.render</code> 的寫法</p>
<p>原本的寫法</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>後來的寫法</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&quot;react-dom/client&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ele = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;root&quot;</span>) <span class="keyword">as</span> <span class="title class_">Element</span>;</span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(ele);</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure>

<p>特別注意要處理 <code>Element</code> 的型別</p>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=N0DhCV_-Qbg">https://www.youtube.com/watch?v=N0DhCV_-Qbg</a></li>
<li><a target="_blank" rel="noopener" href="https://reactjs.org/blog/2022/03/08/react-18-upgrade-guide.html">How to Upgrade to React 18</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/04/07/2022/update_react_18_with_typescript/" data-id="cm844qkl100bv2smxfofzanbb" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/04/07/2022/update_react_18_with_typescript/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/10/">← 上一頁</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/30/">30</a><a class="extend next" rel="next" href="/page/12/">下一頁 →</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/02/20/2025/ai-deepseek/"> [實作筆記] 試玩 DeepSeek 與避免思想審查</a>
          </li>
        
          <li>
            <a href="/2025/02/17/2025/ai-breezyvoice/"> [實作筆記] 試用 Breezy Voice</a>
          </li>
        
          <li>
            <a href="/2025/02/14/2025/ai-ollama/"> [實作筆記] 在 MacBook 上安裝與使用 Ollama</a>
          </li>
        
          <li>
            <a href="/2025/01/21/2025/fast_lunach_mysql/"> [實作筆記] 使用 Docker 一鍵生成 Sample 資料庫</a>
          </li>
        
          <li>
            <a href="/2025/01/02/2025/fastapi_middleware/"> [實作筆記] FastAPI 的　middleware</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">彙整</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/02/">二月 2025</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/01/">一月 2025</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">十二月 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">十一月 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">十月 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">九月 2024</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">八月 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">七月 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">六月 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">五月 2024</a><span class="archive-list-count">1</span></li><span id='list_archives2' style='display:none'><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">四月 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">三月 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">二月 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">一月 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">十二月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">十一月 2023</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">十月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">九月 2023</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">八月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">七月 2023</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">六月 2023</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">五月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">四月 2023</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">三月 2023</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">二月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">一月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">九月 2022</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">八月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">六月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">五月 2022</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">三月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">二月 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">6</span></li></span><span id=''></span><span onclick="var d=document.getElementById('list_archives2'); d.style.display===''?d.style='display:none':d.style=''">toggle...</span></ul>
    </div>
  </div>


  
    <a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-nd/3.0/tw/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/3.0/tw/88x31.png" />
</a>
  <br />
This work is licensed under a 
<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-nd/3.0/tw/">Creative Commons Attribution-NonCommercial-NoDerivs 3.0 Taiwan License</a>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤雲</h3>
    <div class="widget tagcloud">
      <a href="/tags/Net-Framework/" style="font-size: 14.67px;">.Net Framework</a> <a href="/tags/API/" style="font-size: 11.33px;">API</a> <a href="/tags/AWS/" style="font-size: 13.33px;">AWS</a> <a href="/tags/Agile/" style="font-size: 17.33px;">Agile</a> <a href="/tags/CI-CD/" style="font-size: 19.33px;">CI/CD</a> <a href="/tags/Cache/" style="font-size: 10px;">Cache</a> <a href="/tags/Coding-Standard/" style="font-size: 10px;">Coding Standard</a> <a href="/tags/Container/" style="font-size: 12px;">Container</a> <a href="/tags/Database/" style="font-size: 12.67px;">Database</a> <a href="/tags/Design-Pattern/" style="font-size: 10.67px;">Design Pattern</a> <a href="/tags/Docker/" style="font-size: 12px;">Docker</a> <a href="/tags/Entity-Framework/" style="font-size: 10.67px;">Entity Framework</a> <a href="/tags/Firebase/" style="font-size: 10px;">Firebase</a> <a href="/tags/Git/" style="font-size: 10.67px;">Git</a> <a href="/tags/Golang/" style="font-size: 11.33px;">Golang</a> <a href="/tags/Google/" style="font-size: 11.33px;">Google</a> <a href="/tags/GulpJs/" style="font-size: 10.67px;">GulpJs</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/Hexo/" style="font-size: 15.33px;">Hexo</a> <a href="/tags/IIS/" style="font-size: 10px;">IIS</a> <a href="/tags/IO/" style="font-size: 10px;">IO</a> <a href="/tags/Integrated-Testing/" style="font-size: 10px;">Integrated Testing</a> <a href="/tags/Jenkins/" style="font-size: 12px;">Jenkins</a> <a href="/tags/Kubernetes/" style="font-size: 10px;">Kubernetes</a> <a href="/tags/Linux/" style="font-size: 10.67px;">Linux</a> <a href="/tags/Mongodb/" style="font-size: 10px;">Mongodb</a> <a href="/tags/MsSQL/" style="font-size: 11.33px;">MsSQL</a> <a href="/tags/MsTest/" style="font-size: 10px;">MsTest</a> <a href="/tags/Mutation-Testing/" style="font-size: 10px;">Mutation Testing</a> <a href="/tags/Nodejs/" style="font-size: 15.33px;">Nodejs</a> <a href="/tags/OAuth/" style="font-size: 10px;">OAuth</a> <a href="/tags/OOP/" style="font-size: 11.33px;">OOP</a> <a href="/tags/Openshift/" style="font-size: 10.67px;">Openshift</a> <a href="/tags/PowerShell/" style="font-size: 11.33px;">PowerShell</a> <a href="/tags/React/" style="font-size: 12px;">React</a> <a href="/tags/Redis/" style="font-size: 10.67px;">Redis</a> <a href="/tags/SQL/" style="font-size: 12px;">SQL</a> <a href="/tags/Scrum/" style="font-size: 16.67px;">Scrum</a> <a href="/tags/Shell/" style="font-size: 10.67px;">Shell</a> <a href="/tags/Specflow/" style="font-size: 10px;">Specflow</a> <a href="/tags/StyleCop/" style="font-size: 10px;">StyleCop</a> <a href="/tags/TDD/" style="font-size: 16px;">TDD</a> <a href="/tags/Testing/" style="font-size: 14px;">Testing</a> <a href="/tags/Thread/" style="font-size: 10.67px;">Thread</a> <a href="/tags/Trello/" style="font-size: 10px;">Trello</a> <a href="/tags/TypeScript/" style="font-size: 13.33px;">TypeScript</a> <a href="/tags/Unit-Testing/" style="font-size: 18.67px;">Unit Testing</a> <a href="/tags/Unix/" style="font-size: 10.67px;">Unix</a> <a href="/tags/Vim/" style="font-size: 10px;">Vim</a> <a href="/tags/Visual-Studio/" style="font-size: 10px;">Visual Studio</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/post/" style="font-size: 10px;">post</a> <a href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" style="font-size: 14px;">學習筆記</a> <a href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" style="font-size: 20px;">實作筆記</a> <a href="/tags/%E6%99%82%E9%96%93%E7%AE%A1%E7%90%86/" style="font-size: 10.67px;">時間管理</a> <a href="/tags/%E6%B4%BB%E5%8B%95%E7%AD%86%E8%A8%98/" style="font-size: 12.67px;">活動筆記</a> <a href="/tags/%E7%94%9F%E6%B4%BB%E7%AD%86%E8%A8%98/" style="font-size: 16px;">生活筆記</a> <a href="/tags/%E8%A8%98%E9%8C%84/" style="font-size: 11.33px;">記錄</a> <a href="/tags/%E8%B8%A9%E9%9B%B7%E7%AD%86%E8%A8%98/" style="font-size: 14.67px;">踩雷筆記</a> <a href="/tags/%E9%87%8D%E6%A7%8B/" style="font-size: 12px;">重構</a> <a href="/tags/%E9%96%B1%E8%AE%80%E7%AD%86%E8%A8%98/" style="font-size: 18px;">閱讀筆記</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Net-Framework/" rel="tag">.Net Framework</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/API/" rel="tag">API</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AWS/" rel="tag">AWS</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Agile/" rel="tag">Agile</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI-CD/" rel="tag">CI&#x2F;CD</a><span class="tag-list-count">24</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cache/" rel="tag">Cache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Coding-Standard/" rel="tag">Coding Standard</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Container/" rel="tag">Container</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/" rel="tag">Database</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design-Pattern/" rel="tag">Design Pattern</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Entity-Framework/" rel="tag">Entity Framework</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Firebase/" rel="tag">Firebase</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Golang/" rel="tag">Golang</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Google/" rel="tag">Google</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GulpJs/" rel="tag">GulpJs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IIS/" rel="tag">IIS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO/" rel="tag">IO</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Integrated-Testing/" rel="tag">Integrated Testing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jenkins/" rel="tag">Jenkins</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kubernetes/" rel="tag">Kubernetes</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mongodb/" rel="tag">Mongodb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MsSQL/" rel="tag">MsSQL</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MsTest/" rel="tag">MsTest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mutation-Testing/" rel="tag">Mutation Testing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nodejs/" rel="tag">Nodejs</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OAuth/" rel="tag">OAuth</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OOP/" rel="tag">OOP</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Openshift/" rel="tag">Openshift</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PowerShell/" rel="tag">PowerShell</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/" rel="tag">SQL</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scrum/" rel="tag">Scrum</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/" rel="tag">Shell</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Specflow/" rel="tag">Specflow</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/StyleCop/" rel="tag">StyleCop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TDD/" rel="tag">TDD</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Testing/" rel="tag">Testing</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thread/" rel="tag">Thread</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Trello/" rel="tag">Trello</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unit-Testing/" rel="tag">Unit Testing</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unix/" rel="tag">Unix</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vim/" rel="tag">Vim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Visual-Studio/" rel="tag">Visual Studio</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/" rel="tag">html</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/post/" rel="tag">post</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" rel="tag">學習筆記</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a><span class="tag-list-count">120</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%99%82%E9%96%93%E7%AE%A1%E7%90%86/" rel="tag">時間管理</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B4%BB%E5%8B%95%E7%AD%86%E8%A8%98/" rel="tag">活動筆記</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E7%AD%86%E8%A8%98/" rel="tag">生活筆記</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A8%98%E9%8C%84/" rel="tag">記錄</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B8%A9%E9%9B%B7%E7%AD%86%E8%A8%98/" rel="tag">踩雷筆記</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%87%8D%E6%A7%8B/" rel="tag">重構</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%96%B1%E8%AE%80%E7%AD%86%E8%A8%98/" rel="tag">閱讀筆記</a><span class="tag-list-count">15</span></li></ul>
    </div>
  </div>


  
    

  
    <div class="widget-wrap">
    <h3 class="widget-title">多語系</h3>
    <div class="widget">
        <div id="ytWidget"></div>
    </div>
</div>
<script src="https://translate.yandex.net/website-widget/v1/widget.js?widgetId=ytWidget&pageLang=zh&widgetTheme=dark&autoMode=false" type="text/javascript"></script>
  
    <div class="widget-wrap">
    <h3 class="widget-title">BADGES</h3>
    <div class="widget">
        <a target="_blank" rel="noopener" href="https://bcert.me/bc/html/show-badge.html?b=uufxvngl">
            <img src="/images/2018/csm/seal-csm.png" alt="Certified ScrumMaster®">
        </a>
    </div>
</div>
  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2025 Marsen L.<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

  
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css">

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>



<script src="/js/sayings.js?v=0.js"></script>
  

<script src="/js/script.js?v=0.js"></script>

<div id="likecoin">
  <script type="text/javascript">
    document.write(
      "<iframe scrolling='no' frameborder='0' sandbox='allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-storage-access-by-user-activation' style='height: 212px; width: 100%;' src='https://button.like.co/in/embed/marsenlin/button?referrer=" +
      encodeURIComponent(location.href.split("?")[0].split("#")[0]) + "'></iframe>");
  </script>
</div>
<script>

  var disqus_shortname = 'marsenlin';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();

</script>

  </div>
    
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NTDGNJZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

</body>
</html>