<!DOCTYPE html>
<html>
<head>
  
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NTDGNJZ');</script>
<!-- End Google Tag Manager -->

  
<!-- Google Analytics -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RF47NNRE5G"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RF47NNRE5G');
</script>
<!-- End Google Analytics -->

  
<!-- Google AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1885096025224905"
     crossorigin="anonymous"></script>
<!-- End Google AdSense -->



  <meta charset="utf-8">
  
  <title>Marsen&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Marsen&#39;s Blog">
<meta property="og:url" content="https://blog.marsen.me/page/3/index.html">
<meta property="og:site_name" content="Marsen&#39;s Blog">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Marsen L.">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Marsen&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
      
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300&display=swap" rel="stylesheet">
  
  
<link rel="stylesheet" href="/css/style.css">

  <meta property ="og:image" content="https://avatars1.githubusercontent.com/u/4269720?s=460&v=4" /> 
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="blog-banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Marsen&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle"></a>
          <div>
          <span style="width: 20px; height: 10px; background: linear-gradient(to bottom, #005BBB 50%, #FFD700 50%); text-align: center; color: white; font-size: 6px; font-weight: bold; line-height: 100px;">
            #StandWithUkraine
          </span>
          </div>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜尋"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.marsen.me"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2024/gcp_healthcheck_firewall" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/12/04/2024/gcp_healthcheck_firewall/" class="article-date">
  <time datetime="2024-12-04T08:16:13.000Z" itemprop="datePublished">2024-12-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/12/04/2024/gcp_healthcheck_firewall/"> [實作筆記] GCP 防火牆設定與 Health Check</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>GCP 防火牆（Firewall）用來控制進出 Google Cloud 資源的網路流量，確保服務的安全性。<br>而 Health Check 則是用來監控後端服務的健康狀態，透過 GCP 負載平衡器（Load Balancer）進行流量分配。<br>我將介紹如何在 GCP 設定防火牆規則以支持 Health Check 的運作。</p>
<h2 id="情境"><a href="#情境" class="headerlink" title="情境"></a>情境</h2><p>instance 有一個 Allow Load Balancer Health checks 選項，<br>被勾起來後　Network tags 會加上<code>lb-health-check</code><br>但是不知為什麼狀態仍然會顯示為 Off　？</p>
<p>所以我們必須多作一些步驟</p>
<p>我有許多服務都掛在負載平衡器之後，並且使用 Backend Service 來管理這些流量。<br>一個 LB 會有多個 Backend Service (本文先不涉及 Backend Bucket)<br>由於成本考量，為了提高資源利用率，一台機器可能會承載多個 Web 服務。<br>這樣做可以節省硬體和虛擬機的成本，但同時也需要確保每個 Web 服務能夠獨立且穩定地運行。</p>
<p>在這樣的架構中，LB 會依 Path Rules 將流量分配到多個實例組（Instance Group）中，<br>每個實例中可能運行著多個 Web 服務。<br>透過這些實例和 Backend Service 的組合，負載平衡器能夠有效地將流量分配到不同的服務上。<br>然而，為了確保服務的穩定性，我們必須配置健康檢查（Health Check）來監控每個 Web 服務的運行狀態。  </p>
<p>在 GCP 中，當我們使用負載平衡器（<code>Load Balancer</code>）時，會涉及以下資源：</p>
<ul>
<li><code>Backend Service</code>：負責接收來自負載平衡器的流量，並將流量分發給後端的實例。</li>
<li><code>Health Check</code>：用來檢查後端服務是否健康，負載平衡器會依據這些檢查結果決定是否將流量導向特定實例。</li>
<li><code>Instance Group</code>：一組相同配置的虛擬機（VM），負責運行服務，並自動進行縮放。</li>
<li><code>Instance</code>：每個實際的虛擬機，執行後端服務。</li>
</ul>
<p>這些資源之間的關係是，Backend Service 根據 Health Check 監控的結果選擇健康的 Instance，<br>並將流量分發給 Instance Group 中的實例。<br>當負載平衡器根據路徑規則（LB Path Rule）將流量導向某個服務時，這些流量會被引導到 Instance 中運行的 Web 服務。</p>
<p>我們會在一台 Instance 上使用多個 web 服務，使用不同的 Port 來區分，範圍是 6000~6100。<br>而我們需要對這些所有的服務設定 Health Check</p>
<h2 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h2><p>每個實例有一個 <strong>“Allow Load Balancer Health checks”</strong> 的選項，<br>勾選後會自動加上 <code>lb-health-check</code> 的網路標籤(Network Tag)。<br>不過不知道為什麼狀態仍會顯示為 Off。<br>也就是說單純打勾是不夠的我們仍需要額外的設定，我們可以利用這個 <code>lb-health-check</code> 來作一些事</p>
<p>我們可以利用 Network Tag:<code>lb-health-check</code> 來建立相應的防火牆規則，<br>確保來自負載平衡器的流量能夠順利進行健康檢查。  </p>
<p>接下來，我們可以創建一個防火牆規則，限制僅允許 6000~6100 端口的 TCP 流量。<br>這樣做的原因是，健康檢查會直接使用 TCP 進行連接檢查，而不是 HTTP 協定，<br>這樣可以避免 HTTP 協定中請求和響應的延遲，並且減少負載平衡器在檢查健康狀態時的處理開銷。</p>
<p>在 GCP Console 中創建防火牆規則，指定源 IP 或範圍（例如內部網路的 IP 範圍）。<br>Google 的 Health Check 源自 <code>35.191.0.0/16</code> 與 <code>130.211.0.0/22</code>，<br>設定在 Source filters &gt; IP ranges 上<br>Targets ＞ Target tags 請設定為 <code>lb-health-check</code><br>設定 Protocols and ports &gt; Specified protocols and ports 選擇 TCP 協定 Ports 限制在 6000-6100。<br>在 Health checks 中，Protocol 也設定 TCP，Port 要設定為真實的 Web 服務使用的 Port<br>在 VM 的 instance 上，本來需要設定 Network Tag，但是我們可以勾選 “Allow Load Balancer Health checks” 的選項,<br>就會自動加上 Tag 囉。</p>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://cloud.google.com/load-balancing/docs/health-check-concepts">GCP HEALTH CHECK CONCEPT</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.google.com/load-balancing/docs/health-checks">Use health checks</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.google.com/vpc/docs/using-firewalls">Use VPC firewall rules</a></li>
<li><a target="_blank" rel="noopener" href="https://hkmci.com/zh-hant/learning-column/google-cloud-zh-hant/gcp-kol-x-master-concept-the-overall-architecture-and-procedure-for-establishing-a-load-balancer/">建立 Load Balancer 的整體架構和步驟</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/12/04/2024/gcp_healthcheck_firewall/" data-id="cmc82jkrj00fo2smq4koph1sp" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/12/04/2024/gcp_healthcheck_firewall/#disqus_thread" class="article-comment-link">留言</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2024/gcp_nat" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/12/03/2024/gcp_nat/" class="article-date">
  <time datetime="2024-12-03T06:26:00.000Z" itemprop="datePublished">2024-12-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/12/03/2024/gcp_nat/"> [實作筆記] Google NAT 簡介與實作</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>在打造安全的 VM 環境時，常常會遇到一個經典的矛盾點：<br>我們希望 VM 保持隱蔽，避免直接暴露於網際網路以減少安全風險，但同時又需要對外存取資源。<br>例如在開發或維運階段，像是執行 npm install、apt-get update，甚至提供給合作第三方的白名單 IP 等需求，往往都依賴外部下載與連線。  </p>
<p>因此，我們的需求很明確：  </p>
<ul>
<li>VM 非必要時，不提供 Public IP。  </li>
<li>VM 在發出 Request 時，需要擁有一個固定的對外 IP 地址。</li>
</ul>
<h2 id="傳統機房的解決方案"><a href="#傳統機房的解決方案" class="headerlink" title="傳統機房的解決方案"></a>傳統機房的解決方案</h2><p>在傳統機房環境中，透過 NAT (Network Address Translation) 伺服器或防火牆設備，就能實現內部網路的安全管理。  </p>
<p>內部流量管理: 內部 VM 使用私有 IP 位址，對外流量透過 NAT 進行轉換。<br>控制風險: 透過 NAT，內部伺服器可以訪問外部網路，但外部無法直接存取內部資源。<br>然而，傳統機房的設定通常需要額外的硬體設備，並增加了維護成本。  </p>
<h2 id="GCP-的解決方案-NAT"><a href="#GCP-的解決方案-NAT" class="headerlink" title="GCP 的解決方案　NAT"></a>GCP 的解決方案　NAT</h2><p>在 GCP 上，這個問題有一個優雅的解法：Cloud NAT。  </p>
<p>無須公有 IP: Cloud NAT 允許私有 VM 不需配置公有 IP，就能存取外部網路。<br>集中管理: 透過 VPC 網路層級的 NAT 設定，簡化整體網路架構。<br>彈性擴展: Cloud NAT 可以根據流量自動擴展，減少單點故障風險。  </p>
<p><img src="/../../images/2024/nat.svg" alt="NAT"></p>
<h2 id="實作筆記"><a href="#實作筆記" class="headerlink" title="實作筆記"></a>實作筆記</h2><h3 id="步驟-1-建立-VPC-網路"><a href="#步驟-1-建立-VPC-網路" class="headerlink" title="步驟 1: 建立 VPC 網路"></a>步驟 1: 建立 VPC 網路</h3><p>在 GCP 控制台中，前往 VPC 網路，選擇 建立 VPC 網路。<br>設定一個新的 VPC 網路，並確保 VM 的子網路設為 私有（Private）。這樣做可以保護 VM 不被直接暴露於公共網路。<br>實務上我選擇 default  </p>
<h3 id="步驟-2-配置-Cloud-NAT"><a href="#步驟-2-配置-Cloud-NAT" class="headerlink" title="步驟 2: 配置 Cloud NAT"></a>步驟 2: 配置 Cloud NAT</h3><p>前往 VPC 網路 &gt; Cloud NAT，並選擇 建立 NAT 網關。<br>在設置過程中，選擇對應的子網路和<code>路由(Route)</code>設定。這樣可以確保 VM 在沒有 Public IP 的情況下仍能夠透過 NAT 網關訪問外部網路。<br>配置完成後，Cloud NAT 將會自動幫助 VM 處理對外的連線請求，而不需要直接公開 VM 的 IP。  </p>
<h3 id="步驟-3-配置-Public-IP（如果需要）"><a href="#步驟-3-配置-Public-IP（如果需要）" class="headerlink" title="步驟 3: 配置 Public IP（如果需要）"></a>步驟 3: 配置 Public IP（如果需要）</h3><p>若要讓 VM 直接對外發送請求或開放服務，可以在創建 VM 時為其配置 Public IP。<br>在 Google Cloud Console 中創建虛擬機時，選擇 外部 IP 設為 靜態（static），這樣可以確保 Public IP 地址不會變動。<br>當 VM 配置了 Public IP，所有對外的請求將會直接通過這個 IP 進行。  </p>
<h2 id="心得"><a href="#心得" class="headerlink" title="心得"></a>心得</h2><p>Cloud NAT 的設計，讓我們可以兼顧安全性與便利性。<br>關鍵優勢:</p>
<p>簡單配置: 不需像傳統 NAT 那樣繁複的硬體設置。<br>靈活性高: 無論是開發環境還是正式部署，都能輕鬆應對。<br>成本效益: 減少了維運成本，同時保護了內部資源。</p>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://cloud.google.com/nat/docs/overview">https://cloud.google.com/nat/docs/overview</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/12/03/2024/gcp_nat/" data-id="cmc82jkrk00fr2smq4u4pdqhg" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/12/03/2024/gcp_nat/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2024/understanding_lsp_with_examples" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/11/25/2024/understanding_lsp_with_examples/" class="article-date">
  <time datetime="2024-11-25T03:39:00.000Z" itemprop="datePublished">2024-11-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/11/25/2024/understanding_lsp_with_examples/">[學習筆記] 里氏替換原則(Liskov Substitution Principle, LSP)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>OOP 中的五大原則之一—里氏替換原則,開發 OOP 的工程師應該或多或少都有聽過,<br>最近與同事討論後有新的體悟,特別記錄一下  </p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">若對某個型別 T 的物件 𝑥 能證明具有某個性質 𝑞(𝑥),那麼對於 T 的子型別 S 的物件 𝑦 同樣應該滿足 𝑞(𝑦)。</span><br></pre></td></tr></table></figure>

<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">If a property 𝑞(𝑥) can be proven for objects 𝑥 of type 𝑇,</span><br><span class="line">then 𝑞(𝑦) should also hold true for objects 𝑦 of type 𝑆, where 𝑆 is a subtype of 𝑇.</span><br></pre></td></tr></table></figure>

<p>里氏替換原則(Liskov Substitution Principle, LSP)詳解<br>定義：<br>里氏替換原則由 Barbara Liskov 在 1987 年提出,<br>是 SOLID 原則中的 “L”。它強調 子類(Subclass) 應該能夠替換其 父類(Base Class) 而不影響程式的正確性或行為。  </p>
<p>核心概念：<br>“任何使用父類的地方,都應該能夠使用其子類,而不會影響系統的功能。”  </p>
<h2 id="主要原則"><a href="#主要原則" class="headerlink" title="主要原則"></a>主要原則</h2><p>子類應該擁有父類的所有行為特性。<br><strong>子類不應改變父類方法的預期行為。</strong><br>子類可以擴展父類的功能,但不能削弱或改變父類的功能。  </p>
<p>違反 LSP 的常見問題：<br>替換後引發錯誤： 子類<strong>重寫</strong>某個方法,導致使用者無法正常使用原本的功能。<br>返回值不一致： 子類方法返回值與父類期望的類型不同。<br>拋出未預期的異常： 子類新增或拋出父類未預期的異常。  </p>
<h2 id="舉例說明-錯誤示例"><a href="#舉例說明-錯誤示例" class="headerlink" title="舉例說明,錯誤示例"></a>舉例說明,錯誤示例</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Bird</span> &#123;</span><br><span class="line">  <span class="title function_">fly</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Flying...&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Penguin</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Bird</span> &#123;</span><br><span class="line">  <span class="comment">// Penguins can&#x27;t fly!</span></span><br><span class="line">  <span class="title function_">fly</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Penguins can&#x27;t fly!&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">makeBirdFly</span>(<span class="params">bird: Bird</span>) &#123;</span><br><span class="line">  bird.<span class="title function_">fly</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 當傳入 Penguin 時,會引發錯誤</span></span><br><span class="line"><span class="keyword">const</span> penguin = <span class="keyword">new</span> <span class="title class_">Penguin</span>();</span><br><span class="line"><span class="title function_">makeBirdFly</span>(penguin);  <span class="comment">// Throws an error!</span></span><br></pre></td></tr></table></figure>

<p>違反原因：  </p>
<p>在 makeBirdFly 函數中,傳入 Penguin 子類後,原本預期的行為(鳥會飛）被破壞,導致異常發生,違反 LSP。  </p>
<p>正確示例：  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Bird</span> &#123;</span><br><span class="line">  <span class="title function_">move</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Moving...&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FlyingBird</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Bird</span> &#123;</span><br><span class="line">  <span class="title function_">fly</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Flying...&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Penguin</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Bird</span> &#123;</span><br><span class="line">  <span class="title function_">swim</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Swimming...&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">makeBirdMove</span>(<span class="params">bird: Bird</span>) &#123;</span><br><span class="line">  bird.<span class="title function_">move</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> penguin = <span class="keyword">new</span> <span class="title class_">Penguin</span>();</span><br><span class="line"><span class="title function_">makeBirdMove</span>(penguin);  <span class="comment">// 正常運行,無異常</span></span><br></pre></td></tr></table></figure>

<h2 id="修正方式"><a href="#修正方式" class="headerlink" title="修正方式"></a>修正方式</h2><p>將 Bird 分解為更細的抽象類別(如 FlyingBird)。<br>確保所有子類的行為符合其父類的行為約束。<br>實踐 LSP 的要點：</p>
<ul>
<li>正確使用繼承： 只有在 “是某種(is a)” 的關係中使用繼承;例如:Dog 是 Animal 的一種(我們都不認為這是一個好例子)。</li>
<li>避免強制行為： 子類不應強迫覆蓋父類的方法,除非行為一致。</li>
<li>使用介面： 如果子類具有不同行為,可使用多個接口來定義不同能力。</li>
</ul>
<p>總結：<br>LSP 促使開發者在繼承和多型設計中保持一致性和正確性,保證系統的可擴展性和穩定性。<br>遵循 LSP 可以避免許多因繼承導致的潛在問題,使代碼更健壯且易於維護。</p>
<h2 id="我們的一些關鍵-Q-A"><a href="#我們的一些關鍵-Q-A" class="headerlink" title="我們的一些關鍵 Q&amp;A"></a>我們的一些關鍵 Q&amp;A</h2><p>Q.LSP 的意思是不要用 override ?<br>A.<br>不是的,LSP(里氏替換原則)並不是要求完全避免使用 override,<br>而是要正確使用 override。核心在於: <strong>子類覆寫父類方法時,不能破壞父類的行為預期。</strong></p>
<p>Q. 要正確使用 override 的原則是什麼？<br>A. 子類應維持父類方法的語義一致性<br>覆寫後的行為應與父類保持一致,並且在替換後不會引發錯誤。</p>
<p>Q. 有更具體的說明嗎 ?<br>A. 不要改變方法的輸入輸出參數規格<br>遵循開放封閉原則(Open&#x2F;Closed Principle),開放擴展,封閉修改。<br>方法的參數類型不能比父類方法的參數更具限制性。<br>方法的返回類型不能比父類方法的返回類型更具擴展性。  </p>
<p>Q.<br>以你的例子來說Penguin 的確不會 fly , 所以應該拋出錯誤<br>但是這樣就違反了 LSP ,所以我們的建議是將 fly 再抽出成為介面?<br>A.<br>沒錯!這是關鍵點了。解決這種情況的最佳方式是使用介面(Interface)來抽象行為,而不是在基類中定義所有可能不適用於子類的行為。</p>
<p>子類應擴展父類的功能,而不是修改父類的行為。</p>
<h3 id="正確的覆寫示例"><a href="#正確的覆寫示例" class="headerlink" title="正確的覆寫示例"></a>正確的覆寫示例</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">  <span class="title function_">makeSound</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Some sound&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="title function_">makeSound</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Bark&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">playSound</span>(<span class="params">animal: Animal</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(animal.<span class="title function_">makeSound</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dog = <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line"><span class="title function_">playSound</span>(dog);  <span class="comment">// Output: &quot;Bark&quot; (符合父類預期)</span></span><br></pre></td></tr></table></figure>

<p>說明：<br>Dog 覆寫了 makeSound(),但返回類型和行為保持一致,替換 Animal 後,系統的正確性不受影響。</p>
<h3 id="違反-LSP-的覆寫示例"><a href="#違反-LSP-的覆寫示例" class="headerlink" title="違反 LSP 的覆寫示例"></a>違反 LSP 的覆寫示例</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">protected</span> width: <span class="built_in">number</span>, <span class="keyword">protected</span> height: <span class="built_in">number</span></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setWidth</span>(<span class="params">width: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">width</span> = width;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setHeight</span>(<span class="params">height: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">height</span> = height;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getArea</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">width</span> * <span class="variable language_">this</span>.<span class="property">height</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Square</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Rectangle</span> &#123;</span><br><span class="line">  <span class="comment">// 覆寫後改變了行為,違反 LSP</span></span><br><span class="line">  <span class="title function_">setWidth</span>(<span class="params">width: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">width</span> = width;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">height</span> = width;  <span class="comment">// 強制將高度設為相等</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setHeight</span>(<span class="params">height: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">height</span> = height;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">width</span> = height;  <span class="comment">// 強制將寬度設為相等</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">testRectangle</span>(<span class="params">rect: Rectangle</span>) &#123;</span><br><span class="line">  rect.<span class="title function_">setWidth</span>(<span class="number">5</span>);</span><br><span class="line">  rect.<span class="title function_">setHeight</span>(<span class="number">10</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(rect.<span class="title function_">getArea</span>());  <span class="comment">// 預期：50</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> square = <span class="keyword">new</span> <span class="title class_">Square</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"><span class="title function_">testRectangle</span>(square);  <span class="comment">// Output: 100 (違反父類預期)</span></span><br></pre></td></tr></table></figure>

<p>說明：<br>Square 覆寫了 setWidth 和 setHeight 方法,但改變了 Rectangle 的行為。<br>傳入 Square 後,計算面積的結果與 Rectangle 的預期不同,這破壞了 LSP。  </p>
<p>兩個例子的差異在於<br>Dog 的覆寫行為符合父類預期,Square 改變父類邏輯(強制高寬相等）,破壞原有功能,違反 LSP。</p>
<h2 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h2><p>可以使用 override,但要謹慎處理。<br>確保子類的行為符合父類的預期,不會引入不一致或異常行為。<br>遵守 LSP 能保證系統在多型使用時的穩定性和可預測性。</p>
<p>對「少用繼承多用組合」的體悟多了一層，如果發現繼承了父類的方法，<br>但是修改了行為(拋錯誤、改變本來沒有改動到的屬性、長出新的邏輯分更支…)，這就是一種壞味道。　　<br>大部份應該都可以透過介面排除這個問題。</p>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/11/25/2024/understanding_lsp_with_examples/" data-id="cmc82jkrw00h22smq7tla2l3l" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/11/25/2024/understanding_lsp_with_examples/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" rel="tag">學習筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2024/mac_dotnet_8_update_9" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/11/14/2024/mac_dotnet_8_update_9/" class="article-date">
  <time datetime="2024-11-14T08:06:48.000Z" itemprop="datePublished">2024-11-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/11/14/2024/mac_dotnet_8_update_9/"> [實作筆記] Macbook dotnet 8 升級 dotnet 9</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>dotnet 9 <a target="_blank" rel="noopener" href="https://devblogs.microsoft.com/dotnet/announcing-dotnet-9/">官宣囉</a> ! 雖然不是 lts 版本，但是仍然有許多有趣的新東西，先昇級並記錄一下。</p>
<h2 id="小常識"><a href="#小常識" class="headerlink" title="小常識"></a>小常識</h2><p>.NET Runtime 和 .NET SDK 主要的差別在於它們的用途和所包含的工具：  </p>
<p>.NET Runtime：  </p>
<p>僅包含運行 .NET 應用所需的基本庫和執行環境。<br>適合只需要執行已編譯應用程序的情況，像是使用者在安裝應用後直接執行時。<br>不包含編譯、打包或開發所需的工具和命令。<br>.NET SDK (Software Development Kit)：  </p>
<p>包含 .NET Runtime，以及用來開發、編譯、測試和打包 .NET 應用的工具和命令。<br>包括開發者常用的命令，如 dotnet build（編譯）、dotnet publish（發布）、dotnet test（測試）等。<br>必須安裝 SDK 才能進行應用程式的開發，而不僅僅是執行。  </p>
<p>簡單來說：</p>
<p><strong>如果你只是想執行 .NET 應用，安裝 Runtime 即可。如果你要開發或修改 .NET 應用，則需要 SDK。</strong></p>
<h2 id="安裝步驟"><a href="#安裝步驟" class="headerlink" title="安裝步驟"></a>安裝步驟</h2><p><a target="_blank" rel="noopener" href="https://dotnet.microsoft.com/en-us/download/dotnet/9.0">https://dotnet.microsoft.com/en-us/download/dotnet/9.0</a><br>選擇 SDK 9.0.100 (左側) &gt; macOS Installers &gt; Arm64</p>
<blockquote>
<p>我曾經裝到 X64，安裝過程沒有失敗，但是 dotnet version 仍為 8.0.100</p>
</blockquote>
<p>檢查</p>
<blockquote>
<p>❯ dotnet –version<br>9.0.100<br>❯ dotnet –list-sdks<br>8.0.100 [&#x2F;usr&#x2F;local&#x2F;share&#x2F;dotnet&#x2F;sdk]<br>8.0.101 [&#x2F;usr&#x2F;local&#x2F;share&#x2F;dotnet&#x2F;sdk]<br>9.0.100 [&#x2F;usr&#x2F;local&#x2F;share&#x2F;dotnet&#x2F;sdk]</p>
</blockquote>
<h2 id="專案升級"><a href="#專案升級" class="headerlink" title="專案升級"></a>專案升級</h2><p>專案有許多套件有 Warning 先進行 <code>restore</code></p>
<p>❯ dotnet restore Marsen.NetCore.Dojo.Integration.Test.sln</p>
<blockquote>
<p>❯ dotnet restore Marsen.NetCore.Dojo.Integration.Test.sln<br>(中略)<br>在 24.4 秒內還原 成功但有 9 個警告</p>
</blockquote>
<p>IDE 我是使用 Rider</p>
<blockquote>
<p>Tools → NuGet → Manage NuGet Packages for Solution…</p>
</blockquote>
<p>把能昇級的都昇一昇，再執行測試</p>
<blockquote>
<p>測試摘要: 總計: 467, 失敗: 0, 成功: 466, 已跳過: 1, 持續時間: 4.7 秒<br>在 6.5 秒內建置 成功但有 9 個警告</p>
</blockquote>
<blockquote>
<p>Tools → NuGet → Upgrade Packages in Solution…</p>
</blockquote>
<p>再執行測試</p>
<blockquote>
<p>測試摘要: 總計: 467, 失敗: 0, 成功: 466, 已跳過: 1, 持續時間: 4.7 秒<br>在 6.5 秒內建置 成功但有 9 個警告</p>
</blockquote>
<p>警告如下</p>
<p>warning NU1903: 套件 ‘System.Text.RegularExpressions’ 4.3.0 具有已知的 高 嚴重性弱點<br>warning NU1903: 套件 ‘Newtonsoft.Json’ 9.0.1 具有已知的 高 嚴重性弱點<br>warning CS0618: ‘SqlConnection’ 已經過時: ‘Use the Microsoft.Data.SqlClient package instead.’<br>warning SYSLIB0051: ‘Exception.Exception(SerializationInfo, StreamingContext)’ 已經過時</p>
<p>高風險可以透過 Nuget 確認有沒有新版本的或 patch</p>
<p><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-gb/dotnet/fundamentals/syslib-diagnostics/syslib0051">SYSLIB0051: Legacy serialization support APIs are obsolete</a> 基本上都是在繼承舊版 Exception 時建立的方法<br>可以刪除，但這次先標已過時標籤後並保留，相關程式都沒有呼叫這些方法，所以不會引發新的警告。  </p>
<p><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/dotnet/api/system.data.sqlclient.sqlconnection.-ctor?view=netframework-4.8.1&viewFallbackFrom=net-8.0">warning CS0618: ‘SqlConnection’ 已經過時: ‘Use the Microsoft.Data.SqlClient package instead.’</a><br>很簡單，依據他的建議，改用 <code>using Microsoft.Data.SqlClient;</code> 即可。<br>當然要先從 Nuget 安裝 package</p>
<p>處理完警告後，修改所有<code>csproj</code>內的 TargetFramework 標籤內容如下:  </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TargetFramework</span>&gt;</span>net9.0<span class="tag">&lt;/<span class="name">TargetFramework</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>CICD 相關的設定也要改為 dotnet 9.0</p>
<p>像是 <code>.github/workflows</code> 腳本中的 dotnet-version</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">steps:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">.NET</span> <span class="string">Core</span></span><br><span class="line">   <span class="attr">uses:</span> <span class="string">actions/setup-dotnet@v1</span></span><br><span class="line">   <span class="attr">with:</span></span><br><span class="line">     <span class="attr">dotnet-version:</span> <span class="string">&#x27;9.0.x&#x27;</span></span><br></pre></td></tr></table></figure>

<p>或是 sonarscan-dotnet 中使用的版本(這部份如果原始 repo 尚未更新，可以試著自已更新看看)</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">SonarCloud</span> <span class="string">Scan</span></span><br><span class="line">  <span class="comment"># support dotnet9.0</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">marsen/sonarscan-dotnet@v2.4.1</span></span><br></pre></td></tr></table></figure>

<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/11/14/2024/mac_dotnet_8_update_9/" data-id="cmc82jkrn00g12smqhgqp5wvn" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/11/14/2024/mac_dotnet_8_update_9/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2024/star_career_feedback" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/11/04/2024/star_career_feedback/" class="article-date">
  <time datetime="2024-11-04T01:22:58.000Z" itemprop="datePublished">2024-11-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/11/04/2024/star_career_feedback/"> [實作筆記] 個人經歷 STAR 試寫</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>STAR 是一種行之有效的行為面試方法，全名為 Situation（情境）、Task（任務）、Action（行動） 和 Result（結果）。<br>這個框架幫助應徵者組織答案，描述過去經驗時更有條理，清楚展示個人在特定情境下的行動力及成效。<br>具體來說：  </p>
<ul>
<li>Situation（情境）：描述事情發生的背景或狀況，讓聽者了解事件的前因後果。</li>
<li>Task（任務）：指出自己在該情境中所負責的任務或需完成的目標。</li>
<li>Action（行動）：詳細說明為了完成任務所採取的具體步驟和行動。</li>
<li>Result（結果）：描述行動的成果，最好是能量化的結果或正面的</li>
</ul>
<p>透過 STAR 方法，可以清晰地展示個人職涯解決問題的能力及帶來的正面影響。</p>
<h2 id="個人經歷-STAR-試寫"><a href="#個人經歷-STAR-試寫" class="headerlink" title="個人經歷 STAR 試寫"></a>個人經歷 STAR 試寫</h2><table>
<thead>
<tr>
<th>公司名</th>
<th>情境</th>
<th>任務</th>
<th>行動</th>
<th>結果</th>
</tr>
</thead>
<tbody><tr>
<td><strong>N 社.</strong></td>
<td>團隊負責開發維護跨國電商系統，面臨整合不同市場需求的挑戰。</td>
<td>確保開發過程的順利，協調跨團隊成員，並確保系統的本地化符合各地要求。並最需要回歸到 ONE CODE BASE</td>
<td>實施敏捷方法，善用分支策略，進行代碼審查和測試，引入 TDD 和 CI&#x2F;CD 流程，提升開發效率。</td>
<td>成功推動三個國家的服務上線，縮短開發時間 30%，獲得客戶的積極反饋，促進未來業務擴展和合作機會。在全公司中是最少發生合併衝突的開發團隊。</td>
</tr>
<tr>
<td><strong>N 社.</strong></td>
<td>產品 24&#x2F;7 監控系統的實施，以確保服務的穩定性和可用性。</td>
<td>設計並實施監控解決方案，確保系統在出現故障時能迅速響應，並減少停機時間。</td>
<td>分析系統需求並適當排序，建置監控工具，警報系統與流程。並依序修復異常</td>
<td>成功降低系統故障響應時間 90%，顯著提高服務可靠性，提升客戶滿意度。</td>
</tr>
<tr>
<td><strong>N 社 &amp; B 社產學合作</strong></td>
<td>與中華大學及建中學校進行產學合作項目，推動學生的實踐經驗和技術分享。</td>
<td>指導 B 社學生，確保項目能按時完成，達到教育和實踐的雙重目標。</td>
<td>舉辦技術工作坊，提供指導並進行項目評估，促進學生在實際環境中的學習。</td>
<td>學生在項目中獲得寶貴經驗，成功展示成果並就業，促進學校與業界的合作關係。</td>
</tr>
<tr>
<td><strong>N 社</strong></td>
<td>在 2018 年成為團隊技術領導，面對管理與技術職能切換的挑戰。</td>
<td>與跨部門成員重組成跨國團隊</td>
<td>組織讀書會工作坊，促進團隊成員達成共識，並引入相關的軟體開發工具和流程。</td>
<td>成功建立了一支開發團隊，如期如質的交付產品。</td>
</tr>
<tr>
<td><strong>C 社</strong></td>
<td>擔任開發工程師，負責0到1設計和開發金融相關的應用程式和服務。</td>
<td>建立多產品線與後台以功能符合內外用戶需求並持續改進。</td>
<td>利用用戶反饋進行產品迭代，並推動新功能的開發，使用敏捷開發方法提升效率。導入版本控制以解決多人協作問題。</td>
<td>成功推出了數個新的功能，顯著提高了用戶滿意度和產品的使用率。整體營收提昇 20 倍以上（2000%↑）</td>
</tr>
</tbody></table>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/11/04/2024/star_career_feedback/" data-id="cmc82jkrq00gd2smqhvvvc5ys" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/11/04/2024/star_career_feedback/#disqus_thread" class="article-comment-link">留言</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2024/typescript_tsconfig_cheat_sheet" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/10/08/2024/typescript_tsconfig_cheat_sheet/" class="article-date">
  <time datetime="2024-10-08T15:28:35.000Z" itemprop="datePublished">2024-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/10/08/2024/typescript_tsconfig_cheat_sheet/"> [學習筆記] TypeScript tsconfig 設定備忘錄</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>tsconfig.json 文件是一個 TypeScript 專案的配置文件, 它位於根目錄中, 並定義了專案的編譯器選項。<br>提供給開發人員輕鬆配置 TypeScript 編譯器, 並確保專案的程式碼在不同的環境中始終保持一致。<br>你可以使用 <code>tsc --init</code> 指令自動產生。<br>也可以參考 Matt Pocock 的 <a target="_blank" rel="noopener" href="https://www.totaltypescript.com/tsconfig-cheat-sheet">TSConfig Cheat Sheet</a></p>
<p>TSConfig 有上百個配置, 本文將用來重點記錄一些相關的配置  </p>
<h2 id="本文"><a href="#本文" class="headerlink" title="本文"></a>本文</h2><h3 id="2024-10-Matt-Pocock-的建議配置"><a href="#2024-10-Matt-Pocock-的建議配置" class="headerlink" title="2024&#x2F;10 Matt Pocock 的建議配置"></a>2024&#x2F;10 Matt Pocock 的建議配置</h3><p>相關說明請參考<a target="_blank" rel="noopener" href="https://www.totaltypescript.com/tsconfig-cheat-sheet">原文</a></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">/* Base Options: */</span></span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;es2022&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;allowJs&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;resolveJsonModule&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;moduleDetection&quot;</span><span class="punctuation">:</span> <span class="string">&quot;force&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;isolatedModules&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;verbatimModuleSyntax&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Strictness */</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;noUncheckedIndexedAccess&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;noImplicitOverride&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* If transpiling with TypeScript: */</span></span><br><span class="line">    <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;NodeNext&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;outDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dist&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;sourceMap&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* AND if you&#x27;re building for a library: */</span></span><br><span class="line">    <span class="attr">&quot;declaration&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* AND if you&#x27;re building for a library in a monorepo: */</span></span><br><span class="line">    <span class="attr">&quot;composite&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;declarationMap&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* If NOT transpiling with TypeScript: */</span></span><br><span class="line">    <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;preserve&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;noEmit&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* If your code runs in the DOM: */</span></span><br><span class="line">    <span class="attr">&quot;lib&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;es2022&quot;</span><span class="punctuation">,</span> <span class="string">&quot;dom&quot;</span><span class="punctuation">,</span> <span class="string">&quot;dom.iterable&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* If your code doesn&#x27;t run in the DOM: */</span></span><br><span class="line">    <span class="attr">&quot;lib&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;es2022&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="files"><a href="#files" class="headerlink" title="files"></a>files</h3><p>預設值為 <code>false</code>, 如果只有少量的 ts 檔, 很適合設定這個<code>files</code><br>但實務上更常用 <code>include</code> 與 <code>exclude</code> 搭配,<br>兩者都可使用 wildcard , exclude 擁有較高的優先級,<br>例如下面的設定 <code>src/.test</code> 底下的檔案將不會被編譯:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/**/*&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/test/**/*&quot;</span><span class="punctuation">]</span></span><br><span class="line">  <span class="attr">&quot;files&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;a_typescript_file.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;other_ts_code.ts&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="Compiler-Options"><a href="#Compiler-Options" class="headerlink" title="Compiler Options"></a>Compiler Options</h3><p>這部份是 tsconfig 相關設定的主體, 有需要時來<a target="_blank" rel="noopener" href="https://www.typescriptlang.org/tsconfig/#compilerOptions">這裡</a>查就好<br>下面的例子是一些常用的設定說明:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// esModuleInterop: 這個選項使 TypeScript 能夠更好地與 CommonJS 模組兼容, 允許以 ES 模組方式導入 CommonJS 模組。</span></span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// skipLibCheck: 當設置為 true 時, TypeScript 將跳過對聲明檔案（.d.ts）的型別檢查, 可以加快編譯速度, 尤其是在大型專案中。</span></span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// target: 指定編譯後的 JavaScript 代碼的 ECMAScript 版本。這裡設定為 ES2022, 這意味著生成的代碼將使用該版本的新特性。</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;es2022&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// allowJs: 此選項允許在 TypeScript 專案中使用 JavaScript 檔案, 這對於逐步遷移到 TypeScript 的專案特別有用。</span></span><br><span class="line">    <span class="attr">&quot;allowJs&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// resolveJsonModule: 使 TypeScript 能夠導入 JSON 檔案, 並將其視為模組。</span></span><br><span class="line">    <span class="attr">&quot;resolveJsonModule&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// moduleDetection: 設置為 force 使 TypeScript 將所有檔案視為模組, 避免了使用全局變數引起的錯誤。</span></span><br><span class="line">    <span class="attr">&quot;moduleDetection&quot;</span><span class="punctuation">:</span> <span class="string">&quot;force&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// isolatedModules: 每個檔案將被獨立編譯, 這對於使用 Babel 或其他工具的場景特別重要。</span></span><br><span class="line">    <span class="attr">&quot;isolatedModules&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// verbatimModuleSyntax: 強制使用類型專用的導入和導出, 使 TypeScript 更加嚴格, 這樣有助於在編譯時優化生成的代碼。</span></span><br><span class="line">    <span class="attr">&quot;verbatimModuleSyntax&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="Watch-Option"><a href="#Watch-Option" class="headerlink" title="Watch Option"></a>Watch Option</h3><p><code>watchOptions</code> 用於配置 TypeScript 在開發過程中如何監控文件變更。<br>這些選項主要用於改善開發效率, 當監控的文件或目錄發生變化時, TypeScript 會自動重新編譯或執行其他指定操作。<br>這對於開發階段非常重要, 因為它允許<strong>開發者即時查看更改的影響, 而不必手動重新編譯代碼。</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;watchOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// watchFile: 用於設定 TypeScript 監控單個檔案的方式。</span></span><br><span class="line">    <span class="comment">// fixedPollingInterval: 每隔固定時間檢查所有檔案是否變更。</span></span><br><span class="line">    <span class="comment">// priorityPollingInterval: 根據啟發式方法, 對某些類型的檔案進行優先輪詢。</span></span><br><span class="line">    <span class="comment">// dynamicPriorityPolling: 使用動態隊列, 較少修改的檔案將會被較少檢查。</span></span><br><span class="line">    <span class="comment">// useFsEvents (預設): 嘗試使用操作系統/檔案系統的原生事件來監控檔案變更。</span></span><br><span class="line">    <span class="comment">// useFsEventsOnParentDirectory: 嘗試監聽檔案父目錄的變更事件, 而不是直接監控檔案。</span></span><br><span class="line">    <span class="attr">&quot;watchFile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;useFsEvents&quot;</span><span class="punctuation">,</span> <span class="comment">// 預設為使用文件系統事件來監控檔案變更。</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// watchDirectory: 用於設定 TypeScript 監控整個目錄的方式。</span></span><br><span class="line">    <span class="comment">// fixedPollingInterval: 每隔固定時間檢查所有目錄是否變更。</span></span><br><span class="line">    <span class="comment">// dynamicPriorityPolling: 使用動態隊列, 較少修改的目錄將會被較少檢查。</span></span><br><span class="line">    <span class="comment">// useFsEvents (預設): 嘗試使用操作系統/檔案系統的原生事件來監控目錄變更。</span></span><br><span class="line">    <span class="attr">&quot;watchDirectory&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dynamicPriorityPolling&quot;</span><span class="punctuation">,</span> <span class="comment">// 使用動態優先級輪詢, 檢查變更較少的目錄次數較少。</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 設置檔案或目錄的輪詢間隔時間（以毫秒為單位）, 適用於輪詢策略。</span></span><br><span class="line">    <span class="attr">&quot;pollingInterval&quot;</span><span class="punctuation">:</span> <span class="number">2000</span><span class="punctuation">,</span> <span class="comment">// 設置為每 2000 毫秒輪詢一次檔案或目錄變更。</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 設置是否監控目錄及其所有子目錄</span></span><br><span class="line">    <span class="attr">&quot;recursive&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="comment">// 設置為 true 以監控所有子目錄的變更。</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="Type-Acquisition"><a href="#Type-Acquisition" class="headerlink" title="Type Acquisition"></a>Type Acquisition</h3><p>Type Acquisition 主要適用於 JavaScript 專案。<br>在 TypeScript 專案中, 開發者必須明確地將型別包含在專案中。<br>相對地, 對於 JavaScript 專案, TypeScript 工具會自動在後台下載所需的型別, 並將其儲存在 node_modules 以外的位置。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;typeAcquisition&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// enable: 啟用自動獲取 JavaScript 專案的型別檔案 (.d.ts)。</span></span><br><span class="line">    <span class="attr">&quot;enable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// include: 指定自動獲取型別檔案的庫。</span></span><br><span class="line">    <span class="comment">// 例如, 在這裡指定了 jQuery 和 lodash, TypeScript 將自動獲取它們的型別檔案。</span></span><br><span class="line">    <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;jquery&quot;</span><span class="punctuation">,</span> <span class="string">&quot;lodash&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// exclude: 指定不需要自動獲取型別檔案的庫。</span></span><br><span class="line">    <span class="comment">// 這裡指定了 &quot;some-legacy-library&quot;, 即使它存在於專案中, TypeScript 也不會嘗試獲取它的型別檔案。</span></span><br><span class="line">    <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;some-legacy-library&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// disableFilenameBasedTypeAcquisition: 禁用基於檔案名稱自動獲取型別檔案的功能。</span></span><br><span class="line">    <span class="comment">// 當設置為 true 時, TypeScript 不會基於檔案名稱來推測並下載型別檔案。</span></span><br><span class="line">    <span class="attr">&quot;disableFilenameBasedTypeAcquisition&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/tsconfig/">Intro to the TSConfig</a></li>
<li><a target="_blank" rel="noopener" href="https://www.totaltypescript.com/tsconfig-cheat-sheet">The TSConfig Cheat Sheet</a></li>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html#handbook-content">What is a tsconfig.json</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/10/08/2024/typescript_tsconfig_cheat_sheet/" data-id="cmc82jkru00gs2smqfkrq0vq7" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/10/08/2024/typescript_tsconfig_cheat_sheet/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" rel="tag">學習筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2024/typescript_omit_pick_distributive_union_issue" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/10/05/2024/typescript_omit_pick_distributive_union_issue/" class="article-date">
  <time datetime="2024-10-05T07:58:30.000Z" itemprop="datePublished">2024-10-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/10/05/2024/typescript_omit_pick_distributive_union_issue/"> [學習筆記] Omit 與 Pick 的 Distributive 版本：解決 TypeScript Utility Types 的陷阱</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>在 TypeScript 中，Omit 和 Pick 是廣受喜愛的 Utility Types，<br>它們允許你從現有型別中排除或選擇特定的屬性來創建新型別。<br>參考我之前的<a href="https://blog.marsen.me/2022/09/12/2022/TypeScript_Omit/">文章</a></p>
<h2 id="本文"><a href="#本文" class="headerlink" title="本文"></a>本文</h2><h3 id="基礎示範：Omit-的使用"><a href="#基礎示範：Omit-的使用" class="headerlink" title="基礎示範：Omit 的使用"></a>基礎示範：Omit 的使用</h3><p>我們先來看個簡單的例子，假設我們有一個 Game 型別，其中包含 id、name 和 price 三個屬性。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Game</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span>;    <span class="comment">// 遊戲的唯一識別碼</span></span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;  <span class="comment">// 遊戲名稱</span></span><br><span class="line">  <span class="attr">price</span>: <span class="built_in">number</span>; <span class="comment">// 遊戲價格</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">GameWithoutIdentity</span> = <span class="title class_">Omit</span>&lt;<span class="title class_">Game</span>, <span class="string">&quot;id&quot;</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">game</span>: <span class="title class_">GameWithoutIdentity</span> = &#123;</span><br><span class="line">  <span class="comment">//id: &quot;1&quot;, // ❗ 編譯錯誤：&#x27;price&#x27; 不存在於 &#x27;GameWithoutIdentity&#x27; 型別中</span></span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;The Legend of Zelda&quot;</span>, </span><br><span class="line">  <span class="attr">price</span>: <span class="number">59.99</span>, </span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Omit 可以幫助我們排除 id 屬性並創建新型別 GameWithoutIdentity<br>這在單一型別中運行良好，但當我們引入 Union Types 時，就有一些細節值得討論。</p>
<h2 id="問題：Union-Types-中的-Omit-行為"><a href="#問題：Union-Types-中的-Omit-行為" class="headerlink" title="問題：Union Types 中的 Omit 行為"></a>問題：Union Types 中的 Omit 行為</h2><p>假設我們有三個型別：Game、VideoGame 和 PCGame。<br>它們的 id 和 name 屬性相同，但每個型別都有其獨特的屬性。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Game</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span>;        <span class="comment">// 遊戲的唯一識別碼</span></span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;      <span class="comment">// 遊戲名稱</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">VideoGame</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span>;              <span class="comment">// 遊戲的唯一識別碼</span></span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;            <span class="comment">// 遊戲名稱</span></span><br><span class="line">  <span class="attr">platform</span>: <span class="built_in">string</span>;        <span class="comment">// 遊戲平台</span></span><br><span class="line">  <span class="attr">genre</span>: <span class="built_in">string</span>;           <span class="comment">// 遊戲類型</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PCGame</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span>;                    <span class="comment">// 遊戲的唯一識別碼</span></span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;                  <span class="comment">// 遊戲名稱</span></span><br><span class="line">  <span class="attr">systemRequirements</span>: <span class="built_in">string</span>;    <span class="comment">// 系統需求</span></span><br><span class="line">  <span class="attr">hasDLC</span>: <span class="built_in">boolean</span>;              <span class="comment">// 是否有 DLC</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>當我們將這三個型別聯合起來形成 GameProduct 並嘗試使用 Omit 排除 id 時，結果卻不是我們預期的。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">GameProduct</span> = <span class="title class_">Game</span> | <span class="title class_">VideoGame</span> | <span class="title class_">PCGame</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">GameProduct</span> = <span class="title class_">Omit</span>&lt;<span class="title class_">GameProduct</span>, <span class="string">&quot;id&quot;</span>&gt;;</span><br></pre></td></tr></table></figure>

<p>你可能期望 GameProductWithoutId 是三個型別排除 id 屬性的 Union Type，但實際上，我們只得到了這樣的結構：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">GameProduct</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>這表示 <code>Omit</code> 在處理 <code>Union Types</code> 時，並沒有對每個聯合成員單獨操作，而是將它們合併成了一個結構。</p>
<h3 id="原因分析"><a href="#原因分析" class="headerlink" title="原因分析"></a>原因分析</h3><p>這種行為的根源在於，<code>Omit</code> 和 <code>Pick</code> 不是 <code>Distributive</code> 的 <code>Utility Types</code>。<br>它們不會針對每個 <code>Union Type</code> 成員進行個別操作，而是將 <code>Union Type</code> 視為一個整體來操作。<br>因此，當我們排除 id 屬性時，它無法處理每個成員型別中的不同屬性。</p>
<p>這與其他工具型別如 <code>Partial</code> 和 <code>Required</code> 不同，這些工具型別可以正確地處理 Union Types，並在每個成員上應用。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PartialGameProduct</span> = <span class="title class_">Partial</span>&lt;<span class="title class_">GameProduct</span>&gt;;</span><br><span class="line"><span class="comment">// 正確地給出了聯合型別的部分化版本</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PartialGameProduct</span> = <span class="title class_">Partial</span>&lt;<span class="title class_">Game</span>&gt; | <span class="title class_">Partial</span>&lt;<span class="title class_">VideoGame</span>&gt; | <span class="title class_">Partial</span>&lt;<span class="title class_">PCGame</span>&gt;;</span><br></pre></td></tr></table></figure>

<h3 id="解決方案：Distributive-Omit-與-Distributive-Pick"><a href="#解決方案：Distributive-Omit-與-Distributive-Pick" class="headerlink" title="解決方案：Distributive Omit 與 Distributive Pick"></a>解決方案：Distributive Omit 與 Distributive Pick</h3><p>要解決這個問題，我們可以定義一個 Distributive 的 Omit，這個版本會針對 Union Type 的每個成員進行操作。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">DistributiveOmit</span>&lt;T, K <span class="keyword">extends</span> <span class="title class_">PropertyKey</span>&gt; = T <span class="keyword">extends</span> <span class="built_in">any</span></span><br><span class="line">  ? <span class="title class_">Omit</span>&lt;T, K&gt;</span><br><span class="line">  : <span class="built_in">never</span>;</span><br></pre></td></tr></table></figure>

<p>使用 DistributiveOmit 後，我們可以正確地得到想要的結果：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">GameProductWithoutId</span> = <span class="title class_">DistributiveOmit</span>&lt;<span class="title class_">GameProduct</span>, <span class="string">&quot;id&quot;</span>&gt;;</span><br><span class="line"><span class="comment">// Hover 正確地給出了聯合型別的必填化版本</span></span><br><span class="line"><span class="comment">//type GameProductWithoutId = Omit&lt;Game, &quot;id&quot;&gt; | Omit&lt;VideoGame, &quot;id&quot;&gt; | Omit&lt;PCGame, &quot;id&quot;&gt;</span></span><br></pre></td></tr></table></figure>

<p>這將生成以下結構：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 所以</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">GameProductWithoutId</span> = </span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="built_in">string</span> &#125; | </span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="built_in">string</span>; <span class="attr">platform</span>: <span class="built_in">string</span>; <span class="attr">genre</span>: <span class="built_in">string</span> &#125; | </span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="built_in">string</span>; <span class="attr">systemRequirements</span>: <span class="built_in">string</span>; <span class="attr">hasDLC</span>: <span class="built_in">boolean</span> &#125;;</span><br></pre></td></tr></table></figure>

<p>現在，GameProductWithoutId 正確地成為了每個型別的 Union Type，並且成功地排除了 id 屬性。</p>
<h3 id="Distributive-Pick"><a href="#Distributive-Pick" class="headerlink" title="Distributive Pick"></a>Distributive Pick</h3><p>類似的，我們也可以定義一個 Distributive 的 Pick：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">DistributivePick</span>&lt;T, K <span class="keyword">extends</span> keyof T&gt; = T <span class="keyword">extends</span> <span class="built_in">any</span></span><br><span class="line">  ? <span class="title class_">Pick</span>&lt;T, K&gt;</span><br><span class="line">  : <span class="built_in">never</span>;</span><br></pre></td></tr></table></figure>

<p>這個 <code>Distributive</code> 版本的 <code>Pick</code> 確保了你所選擇的屬性實際存在於你正在操作的型別中，與內建的 <code>Pick</code> 行為一致。</p>
<h2 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h2><p><code>Omit</code> 和 <code>Pick</code> 雖然在單一型別中表現良好，但在 <code>Union Types</code> 中，<br>它們並不是 <code>Distributive</code> 的，這可能導致意想不到的結果。<br>我們可以創建 <code>DistributiveOmit</code> 和 <code>DistributivePick</code>，<br>使它們能夠針對每個 <code>Union Type</code> 成員單獨進行操作，從而獲得更為預期的結果。<br>如果你在專案中遇到這類問題，記得可以考慮使用自定義的 <code>Distributive</code> 版本來處理 <code>Union Types</code>，這樣可以避免踩雷！</p>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/10/05/2024/typescript_omit_pick_distributive_union_issue/" data-id="cmc82jkrt00gl2smqf1f01xd1" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/10/05/2024/typescript_omit_pick_distributive_union_issue/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" rel="tag">學習筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2024/typescript_type_narrowing_example" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/10/04/2024/typescript_type_narrowing_example/" class="article-date">
  <time datetime="2024-10-04T17:48:30.000Z" itemprop="datePublished">2024-10-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/10/04/2024/typescript_type_narrowing_example/"> [學習筆記] TypeScript 的 Narrowing Types 與 Boolean 的例外</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>在使用 TypeScript 時，我們常常會利用條件語句來收窄型別(Narrowing Types)，確保程式邏輯的正確性。<br>例如:<br>Narrowing Types的例子：使用 typeof</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">processValue</span> = (<span class="params">value: <span class="built_in">string</span> | <span class="built_in">number</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">    <span class="comment">// 在這裡 TypeScript 已經收窄為 string，所以可以使用 .toUpperCase 的方法</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`String value: <span class="subst">$&#123;value.toUpperCase()&#125;</span>`</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 在這裡 TypeScript 已經收窄為 number，所以可以使用 .toFixed 的方法</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Number value: <span class="subst">$&#123;value.toFixed(<span class="number">2</span>)&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="說明"><a href="#說明" class="headerlink" title="說明"></a>說明</h3><p>在這個例子中，我們定義了一個 processValue 函數，它接受一個 string 或 number 類型的參數。<br>使用 typeof 來檢查 value 的類型後，TypeScript 會自動進行 Narrowing Types：<br>當 <code>typeof value === &quot;string&quot;</code> 時，TypeScript 將 value 的類型自動收窄為 string，<br>所以我們可以安全地使用字串方法，如 <code>toUpperCase()</code>。<br>當 else 條件觸發時，value 類型已經收窄為 number，因此我們可以使用 number 專有的方法，如 toFixed()。<br>這樣的收窄機制能夠在多態的情況下提高程式的安全性和可讀性，讓開發者更清楚在不同條件下該如何操作不同類型的值。</p>
<h2 id="主文"><a href="#主文" class="headerlink" title="主文"></a>主文</h2><p>然而，在一些特定情況下，TypeScript 的 Narrowing Types 並不如我們預期的那麼靈活。<br>比如說 Boolean() 函數進行條件檢查時，TypeScript 不會像其他檢查方法那樣進行 Narrowing Types。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">NarrowFun</span> = (<span class="params">input: <span class="built_in">string</span> | <span class="literal">null</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!!input) &#123;</span><br><span class="line">    input.<span class="title function_">toUpperCase</span>();  <span class="comment">// 這裡 TypeScript 收窄為 string</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">NotNarrowFun</span> = (<span class="params">input: <span class="built_in">string</span> | <span class="literal">null</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Boolean</span>(input)) &#123;</span><br><span class="line">    input.<span class="title function_">toUpperCase</span>();  <span class="comment">// 這裡 TypeScript 沒有收窄，仍然是 string | null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>在這段程式碼中，我們希望透過條件語句來檢查 input 是否為 null。<br>使用 <code>!!input</code> 時，TypeScript 會正確地將 input 的 Narrowing Types為 string，<br>但當我們改用 Boolean(input) 時，TypeScript 並沒有收窄，仍然認為 input 可能是 string | null。  </p>
<h3 id="為什麼會這樣？"><a href="#為什麼會這樣？" class="headerlink" title="為什麼會這樣？"></a>為什麼會這樣？</h3><h4 id="Boolean-函數的行為"><a href="#Boolean-函數的行為" class="headerlink" title="Boolean 函數的行為"></a>Boolean 函數的行為</h4><p>Boolean 是 JavaScript 的一個內建函數，它接受任何值並將其轉換為 true 或 false，<br>基於 JavaScript 的「true」或「false」邏輯。<br>然而，TypeScript 並不視 Boolean(input) 作為一個能收窄類型的操作。<br>它只將 Boolean(input) 視為一個普通的布林值返回，不會對 input 進行更深入的類型推斷。  </p>
<p>在 TypeScript 中，Boolean 函數的定義是這樣的：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">BooleanConstructor</span> &#123;</span><br><span class="line">  <span class="title function_">new</span>(value?: <span class="built_in">any</span>): <span class="title class_">Boolean</span>;</span><br><span class="line">  &lt;T&gt;(value?: T): <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">var</span> <span class="title class_">Boolean</span>: <span class="title class_">BooleanConstructor</span>;</span><br></pre></td></tr></table></figure>

<p>如你所見，Boolean 是一個接受任何類型 (any) 的值作為輸入，並返回 boolean 類型的結果。<br>它會將輸入轉換為布林值 (true 或 false)，但並不提供關於輸入值的具體類型資訊。<br>因此，TypeScript 只知道返回的是一個 boolean，而無法推斷 input 的原始類型是否已經被過濾（例如從 string | null 到 string）。  </p>
<h4 id="缺乏類型推斷"><a href="#缺乏類型推斷" class="headerlink" title="缺乏類型推斷"></a>缺乏類型推斷</h4><p>在 Boolean(input) 中，TypeScript 僅知道 input 被轉換為 true 或 false，<br>但它不會從中推斷 input 的實際類型。<br>因此，TypeScript 並沒有收窄 input 為 string 或 null。<br>這就是為什麼即使你在 if(Boolean(input)) 內部，input 依然是 <code>string | null</code>，而不是單純的 <code>string</code>。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="title class_">Boolean</span>(input)) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(input);  <span class="comment">// TypeScript 仍視 input 為 string | null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="類型收窄的條件"><a href="#類型收窄的條件" class="headerlink" title="類型收窄的條件"></a>類型收窄的條件</h4><p>TypeScript 進行類型收窄的條件是根據語法或邏輯條件來進行推斷，<br>例如 <code>typeof</code>、<code>instanceof</code>、比較操作 (<code>==</code>, <code>===)</code> 等。<br>這些條件能幫助 TypeScript 推斷出更具體的類型。<br>當你使用 typeof input &#x3D;&#x3D;&#x3D; “string” 時，TypeScript 可以自動將 input 收窄為 string，<br>因為這是一個明確的類型檢查：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> input === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(input);  <span class="comment">// 現在 input 是 string 類型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="為什麼-input-能收窄"><a href="#為什麼-input-能收窄" class="headerlink" title="為什麼 !!input 能收窄"></a>為什麼 !!input 能收窄</h4><p>與 Boolean(input) 不同，<code>!!input</code> 能夠收窄類型。<br>因為這個雙重否定操作 (!!) 是 JavaScript 的一個常見模式，它會將任意值轉換為布林值。<br>由於 TypeScript 能識別這個模式，當你寫 if(!!input) 時，<br>TypeScript 可以推斷 input 是 truthy，並將 null 或 undefined 排除在外。<br>因此，input 被收窄為一個具體的類型（在這裡是 string）。  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!!input) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(input);  <span class="comment">// input 被收窄為 string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="替代方案：自定義判斷函數"><a href="#替代方案：自定義判斷函數" class="headerlink" title="替代方案：自定義判斷函數"></a>替代方案：自定義判斷函數</h2><p>如果我們需要更加靈活的 Narrowing Types，可以考慮使用自定義的判斷函數。<br>例如，我們可以創建一個 isString 函數來明確檢查某個值是否為字串，這樣就可以正確進行 Narrowing Types。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isString = (<span class="attr">value</span>: <span class="built_in">unknown</span>): value is <span class="built_in">string</span> =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> value === <span class="string">&quot;string&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">myFunc</span> = (<span class="params">input: <span class="built_in">string</span> | <span class="literal">null</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">isString</span>(input)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(input);  <span class="comment">// 這裡 TypeScript 收窄為 string</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>在這段程式碼中，我們定義了一個 isString 函數，它不僅進行類型判斷，還告訴 TypeScript 當返回 true 時，value 確實是 string。<br>這樣的函數可以幫助我們更好地進行 Narrowing Types。  </p>
<h3 id="另一個常見的例子：filter-Boolean"><a href="#另一個常見的例子：filter-Boolean" class="headerlink" title="另一個常見的例子：filter(Boolean)"></a>另一個常見的例子：filter(Boolean)</h3><p>filter(Boolean) 是 JavaScript 中常用的一個語法糖，用來過濾掉 falsy 值（如 null、undefined、0 等）。<br>但在 TypeScript 中，這個模式無法進行 Narrowing Types。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="literal">null</span>, <span class="literal">undefined</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 結果類型仍然包含 null 和 undefined</span></span><br><span class="line"><span class="keyword">const</span> result = arr.<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br></pre></td></tr></table></figure>

<p>在這裡，TypeScript 沒有收窄 result 的類型，它仍然認為結果可能包含 null 和 undefined。<br>要解決這個問題，我們可以自定義一個過濾函數，來正確處理這些類型。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> filterNullOrUndefined = &lt;T&gt;(<span class="attr">value</span>: T | <span class="literal">null</span> | <span class="literal">undefined</span>): value is T =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> value !== <span class="literal">null</span> &amp;&amp; value !== <span class="literal">undefined</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="literal">null</span>, <span class="literal">undefined</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = arr.<span class="title function_">filter</span>(isNotNullOrUndefined);  <span class="comment">// 現在類型是 number[]</span></span><br></pre></td></tr></table></figure>

<p>這樣，我們就能確保結果陣列只包含 number，而不再包含 null 和 undefined。</p>
<h2 id="小結"><a href="#小結" class="headerlink" title="小結"></a>小結</h2><p>雖然 Boolean() 是 JavaScript 中常見的布林判斷工具，但在 TypeScript 中，它無法像其他判斷語句一樣進行 Narrowing Types。<br>我們可以透過自定義類型判斷函數，來精確地告知 TypeScript 在特定條件下的類型，從而實現更強大和靈活的類型檢查。</p>
<p>參考</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://commerce.nearform.com/blog/2022/narrowing-types">Narrowing Types in TypeScript</a></li>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html">Narrowing</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/10/04/2024/typescript_type_narrowing_example/" data-id="cmc82jkrv00gu2smq1sfj50d9" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/10/04/2024/typescript_type_narrowing_example/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" rel="tag">學習筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2024/typescript_discriminated_unions_guide" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/10/04/2024/typescript_discriminated_unions_guide/" class="article-date">
  <time datetime="2024-10-04T16:30:00.000Z" itemprop="datePublished">2024-10-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/10/04/2024/typescript_discriminated_unions_guide/"> [學習筆記] 使用 Discriminated Unions 解決多狀態問題</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>在日常開發中，我們常需要定義不同狀態下的數據結構，這類需求通常涉及到多個狀態及其對應的屬性。<br>在 TypeScript 中，如果不加以控制，這些狀態容易變成一個充滿可選屬性的複雜物件，導致程式碼難以管理。<br>我們有一種更優雅的解決方案 —— <code>Discriminated Unions</code>，<br>它在 TypeScript 中幫助我們避免常見的「bag of optionals」的問題。  </p>
<h2 id="主文"><a href="#主文" class="headerlink" title="主文"></a>主文</h2><p>假設我們正在開發一個付款流程，並需要一個 PaymentState 類型來描述付款狀態：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PaymentState</span> = &#123;</span><br><span class="line">  <span class="attr">status</span>: <span class="string">&quot;processing&quot;</span> | <span class="string">&quot;success&quot;</span> | <span class="string">&quot;failed&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>此時，我們還需要根據不同狀態保存資料或錯誤訊息，<br>因此我們為 PaymentState 類型新增了可選的 receiptUrl 和 error 屬性：  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">PaymentState</span> = &#123;</span><br><span class="line">  <span class="attr">status</span>: <span class="string">&quot;processing&quot;</span> | <span class="string">&quot;success&quot;</span> | <span class="string">&quot;failed&quot;</span>;</span><br><span class="line">  errorMessage?: <span class="built_in">string</span>;</span><br><span class="line">  receiptUrl?: <span class="built_in">string</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>這個定義表面上看起來可行，但在實際使用時容易出現問題。<br>假設我們定義了一個渲染 UI 的函式 renderUI：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">renderUI</span> = (<span class="params">state: PaymentState</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (state.<span class="property">status</span> === <span class="string">&quot;processing&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Payment Processing...&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (state.<span class="property">status</span> === <span class="string">&quot;failed&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Error: <span class="subst">$&#123;state.errorMessage.toUpperCase()&#125;</span>`</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (state.<span class="property">status</span> === <span class="string">&quot;success&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Receipt: <span class="subst">$&#123;state.receiptUrl&#125;</span>`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>TypeScript 提示 state.errorMessage 可能是 undefined，<br>這意味著我們在某些狀態下無法安全地操作 errorMessage 或 receiptUrl 屬性。<br>這是因為這兩個屬性是可選的，並且沒有和 status 明確地綁定。<br>這就造成了<strong>類型過於鬆散</strong>。</p>
<h2 id="解決方案：Discriminated-Unions"><a href="#解決方案：Discriminated-Unions" class="headerlink" title="解決方案：Discriminated Unions"></a>解決方案：Discriminated Unions</h2><p>為了解決這個問題，我們可以使用 Discriminated Unions。<br>這種模式可以將多個狀態拆分為具體的物件，並通過共同的 status 屬性來區分每個狀態。</p>
<p>首先，我們可以將每個狀態單獨建模：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">State</span> =</span><br><span class="line">  | &#123; <span class="attr">status</span>: <span class="string">&quot;processing&quot;</span> &#125;</span><br><span class="line">  | &#123; <span class="attr">status</span>: <span class="string">&quot;error&quot;</span>; <span class="attr">errorMessage</span>: <span class="built_in">string</span> &#125;</span><br><span class="line">  | &#123; <span class="attr">status</span>: <span class="string">&quot;success&quot;</span>; <span class="attr">receiptUrl</span>: <span class="built_in">string</span> &#125;;</span><br></pre></td></tr></table></figure>

<p>這樣一來，我們就能明確地將 errorMessage 屬性與 error 狀態綁定，<br>並且 receiptUrl 屬性只會出現在 success 狀態下。<br>當我們在 renderUI 函式中使用這些屬性時，TypeScript 會自動根據 status 來縮小類型範圍：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">renderUI</span> = (<span class="params">state: State</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (state.<span class="property">status</span> === <span class="string">&quot;processing&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Processing...&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (state.<span class="property">status</span> === <span class="string">&quot;error&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Error: <span class="subst">$&#123;state.errorMessage.toUpperCase()&#125;</span>`</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (state.<span class="property">status</span> === <span class="string">&quot;success&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Receipt: <span class="subst">$&#123;state.receiptUrl&#125;</span>`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>TypeScript 現在能夠根據 status 確保 errorMessage 在 error 狀態下是一個字串，<br>並且 receiptUrl 只會在 success 狀態出現。<br>這大大提高了我們程式碼的安全性和可讀性。  </p>
<h3 id="進一步優化：提取類型別名"><a href="#進一步優化：提取類型別名" class="headerlink" title="進一步優化：提取類型別名"></a>進一步優化：提取類型別名</h3><p>為了讓程式碼更加清晰，我們可以將每個狀態定義為單獨的類型別名：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">LoadingState</span> = &#123; <span class="attr">status</span>: <span class="string">&quot;processing&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ErrorState</span> = &#123; <span class="attr">status</span>: <span class="string">&quot;error&quot;</span>; <span class="attr">errorMessage</span>: <span class="built_in">string</span> &#125;;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">SuccessState</span> = &#123; <span class="attr">status</span>: <span class="string">&quot;success&quot;</span>; <span class="attr">receiptUrl</span>: <span class="built_in">string</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">State</span> = <span class="title class_">LoadingState</span> | <span class="title class_">ErrorState</span> | <span class="title class_">SuccessState</span>;</span><br></pre></td></tr></table></figure>

<p>這樣的結構不僅清晰易讀，也方便日後的擴展。<br>如果我們需要增加其他狀態，比如 idle 或 cancelled，只需要新增對應的類型別名即可，保持程式碼的擴展性和一致性。  </p>
<h2 id="小結"><a href="#小結" class="headerlink" title="小結"></a>小結</h2><p>Discriminated Unions 是 TypeScript 中處理多狀態情境的強大工具，特別適合用來解決「可選屬性的大集合」問題。它能夠：</p>
<p>確保每個屬性和狀態間的強關聯，減少錯誤和不一致性。<br>提升程式碼的可讀性和維護性，並且有助於擴展性。<br>讓 TypeScript 自動推斷正確的屬性類型，避免不必要的空值檢查。<br>當你發現程式碼中有過多的可選屬性且沒有強烈關聯時，考慮使用 discriminated unions 來重構並簡化你的類型定義。</p>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.totaltypescript.com/discriminated-unions-are-a-devs-best-friend">TypeScript Discriminated Unions for Frontend Developers</a></li>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/unions-and-intersections.html">TypeScript Handbook - Unions and Intersection Types</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/10/04/2024/typescript_discriminated_unions_guide/" data-id="cmc82jkrs00gi2smq85f73qla" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/10/04/2024/typescript_discriminated_unions_guide/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" rel="tag">學習筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2024/typescript_template_literals" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/09/30/2024/typescript_template_literals/" class="article-date">
  <time datetime="2024-09-30T07:35:00.000Z" itemprop="datePublished">2024-09-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/09/30/2024/typescript_template_literals/"> [學習筆記] 探索 TypeScript 的 Template Literals </a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>什麼是 Template Literals 類型？<br>在 TypeScript 中，Template Literals 類型是 ES6 引入的一個強大的功能。<br>Template literals ，主要用來加強字串的操作，它提供了更靈活和易讀的字串插值方式，<br>這不僅提高了代碼的可讀性，結合上 TypeScript <strong>還可以增加了類型安全性</strong>。<br>本篇提供大量範例與適用場景以供測試，有任何問題歡迎提出。  </p>
<h2 id="基礎應用-JS-TS-都適用"><a href="#基礎應用-JS-TS-都適用" class="headerlink" title="基礎應用(JS&#x2F;TS　都適用)"></a>基礎應用(JS&#x2F;TS　都適用)</h2><h3 id="字串插值-String-Interpolation"><a href="#字串插值-String-Interpolation" class="headerlink" title="字串插值 (String Interpolation)"></a>字串插值 (String Interpolation)</h3><p>傳統的字串拼接需要用 + 號，使用 Template Literals 可以讓拼接更簡單。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">&quot;Lin&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> age = <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 傳統拼接</span></span><br><span class="line"><span class="keyword">const</span> message = <span class="string">&quot;My name is &quot;</span> + name + <span class="string">&quot; and I am &quot;</span> + age + <span class="string">&quot; years old.&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Template Literals </span></span><br><span class="line"><span class="keyword">const</span> message2 = <span class="string">`My name is <span class="subst">$&#123;name&#125;</span> and I am <span class="subst">$&#123;age&#125;</span> years old.`</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(message2);</span><br></pre></td></tr></table></figure>

<h3 id="多行字串-Multi-line-Strings"><a href="#多行字串-Multi-line-Strings" class="headerlink" title="多行字串 (Multi-line Strings)"></a>多行字串 (Multi-line Strings)</h3><p>Template literals 支援多行字串，可以避免使用 <code>\n</code> 或其他換行符號。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> poem = <span class="string">`</span></span><br><span class="line"><span class="string">  Roses are red,</span></span><br><span class="line"><span class="string">  Violets are blue,</span></span><br><span class="line"><span class="string">  Sugar is sweet,</span></span><br><span class="line"><span class="string">  And so are you.</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(poem);</span><br></pre></td></tr></table></figure>

<h3 id="內嵌表達式-Embedded-Expressions"><a href="#內嵌表達式-Embedded-Expressions" class="headerlink" title="內嵌表達式 (Embedded Expressions)"></a>內嵌表達式 (Embedded Expressions)</h3><p>可以在字串中插入任意的 JavaScript 表達式，例如函數調用、運算等。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> b = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`The sum of <span class="subst">$&#123;a&#125;</span> and <span class="subst">$&#123;b&#125;</span> is <span class="subst">$&#123;a + b&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>

<h3 id="條件判斷-Conditional-Statements"><a href="#條件判斷-Conditional-Statements" class="headerlink" title="條件判斷 (Conditional Statements)"></a>條件判斷 (Conditional Statements)</h3><p>結合三元運算符或簡單的 if 判斷，可以在字串中靈活地處理條件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loggedIn = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">const</span> message = <span class="string">`You are <span class="subst">$&#123;loggedIn ? <span class="string">&quot;logged in&quot;</span> : <span class="string">&quot;not logged in&quot;</span>&#125;</span>.`</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(message);</span><br></pre></td></tr></table></figure>

<h3 id="標記模板字串-Tagged-Templates"><a href="#標記模板字串-Tagged-Templates" class="headerlink" title="標記模板字串 (Tagged Templates)"></a>標記模板字串 (Tagged Templates)</h3><p>標記模板允許你在插值之前處理字串，可以用於處理國際化、多語系或安全操作（如避免 XSS 攻擊）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sanitizeHTML</span>(<span class="params">literals, ...values</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  literals.<span class="title function_">forEach</span>(<span class="function">(<span class="params">literal, i</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> value = values[i] ? <span class="title class_">String</span>(values[i]).<span class="title function_">replace</span>(<span class="regexp">/&lt;/g</span>, <span class="string">&quot;&amp;lt;&quot;</span>).<span class="title function_">replace</span>(<span class="regexp">/&gt;/g</span>, <span class="string">&quot;&amp;gt;&quot;</span>) : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    result += literal + value;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> userInput = <span class="string">&quot;&lt;script&gt;alert(&#x27;Hacked!&#x27;)&lt;/script&gt;&quot;</span>;</span><br><span class="line"><span class="comment">// call function use Tagged Template Literal</span></span><br><span class="line"><span class="keyword">const</span> safeOutput = sanitizeHTML<span class="string">`&lt;div&gt;<span class="subst">$&#123;userInput&#125;</span>&lt;/div&gt;`</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(safeOutput);  <span class="comment">// &lt;div&gt;&amp;lt;script&amp;gt;alert(&#x27;Hacked!&#x27;)&amp;lt;/script&amp;gt;&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="動態生成-HTML-或模版字串"><a href="#動態生成-HTML-或模版字串" class="headerlink" title="動態生成 HTML 或模版字串"></a>動態生成 HTML 或模版字串</h3><p>當需要動態生成 HTML 或動態內容時，使用 Template Literals 可以讓結構更清晰。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Cherry&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> html = <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;ul&gt;</span></span><br><span class="line"><span class="string">    <span class="subst">$&#123;list.map(item =&gt; <span class="string">`&lt;li&gt;<span class="subst">$&#123;item&#125;</span>&lt;/li&gt;`</span>).join(<span class="string">&#x27;&#x27;</span>)&#125;</span></span></span><br><span class="line"><span class="string">  &lt;/ul&gt;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(html);</span><br></pre></td></tr></table></figure>

<h2 id="進階應用-with-Type"><a href="#進階應用-with-Type" class="headerlink" title="進階應用 with Type"></a>進階應用 with Type</h2><h3 id="動態生成-URL-路徑"><a href="#動態生成-URL-路徑" class="headerlink" title="動態生成 URL 路徑"></a>動態生成 URL 路徑</h3><p>在構建 API 或動態路徑時，Template Literals 結合 TypeScript 類型檢查可以確保參數類型正確，避免拼接錯誤。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Endpoint</span> = <span class="string">&quot;/users&quot;</span> | <span class="string">&quot;/posts&quot;</span> | <span class="string">&quot;/comments&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createURL</span>(<span class="params">endpoint: Endpoint, id: <span class="built_in">number</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`https://api.example.com<span class="subst">$&#123;endpoint&#125;</span>/<span class="subst">$&#123;id&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> url = <span class="title function_">createURL</span>(<span class="string">&quot;/users&quot;</span>, <span class="number">123</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(url); <span class="comment">// https://api.example.com/users/123</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 若傳入不存在的路徑，TypeScript 會報錯</span></span><br><span class="line"><span class="title function_">createURL</span>(<span class="string">&quot;/invalid&quot;</span>, <span class="number">123</span>); <span class="comment">// Error: Argument of type &#x27;&quot;invalid&quot;&#x27; is not assignable to parameter of type &#x27;Endpoint&#x27;.</span></span><br></pre></td></tr></table></figure>

<p>可以作開發中的路由檢查。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">HTTPMethod</span> = <span class="string">&quot;GET&quot;</span> | <span class="string">&quot;POST&quot;</span> | <span class="string">&quot;PUT&quot;</span> | <span class="string">&quot;DELETE&quot;</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Route</span> = <span class="string">`/api/<span class="subst">$&#123;<span class="built_in">string</span>&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">request</span>(<span class="params">method: HTTPMethod, route: Route</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Sending <span class="subst">$&#123;method&#125;</span> request to <span class="subst">$&#123;route&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">request</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;/api/users&quot;</span>);  <span class="comment">// 正確</span></span><br><span class="line"><span class="title function_">request</span>(<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;/api/posts&quot;</span>); <span class="comment">// 正確</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 這會觸發類型檢查錯誤</span></span><br><span class="line"><span class="title function_">request</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;/invalidRoute&quot;</span>); <span class="comment">// Error: Argument of type &#x27;&quot;/invalidRoute&quot;&#x27; is not assignable to parameter of type &#x27;Route&#x27;.</span></span><br></pre></td></tr></table></figure>

<p>相同的概念也可以來動態生成 SQL 查詢語句，同時確保參數的安全性與類型正確性。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">TableName</span> = <span class="string">&quot;users&quot;</span> | <span class="string">&quot;posts&quot;</span> | <span class="string">&quot;comments&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">selectFromTable</span>(<span class="params">table: TableName, id: <span class="built_in">number</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`SELECT * FROM <span class="subst">$&#123;table&#125;</span> WHERE id = <span class="subst">$&#123;id&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> query = <span class="title function_">selectFromTable</span>(<span class="string">&quot;users&quot;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(query); <span class="comment">// SELECT * FROM users WHERE id = 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 傳入錯誤的表名時，會被 TypeScript 類型檢查發現</span></span><br><span class="line"><span class="title function_">selectFromTable</span>(<span class="string">&quot;invalidTable&quot;</span>, <span class="number">1</span>); <span class="comment">// Error: Argument of type &#x27;&quot;invalidTable&quot;&#x27; is not assignable to parameter of type &#x27;TableName&#x27;.</span></span><br></pre></td></tr></table></figure>

<h3 id="字串聯合類型構造器"><a href="#字串聯合類型構造器" class="headerlink" title="字串聯合類型構造器"></a>字串聯合類型構造器</h3><p>一個常見的模式是將Template Literals 類型與聯合類型結合，這樣可以生成所有可能的組合。<br>例如，假設我們有一組顏色和相應的色調：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">ColorShade</span> = <span class="number">100</span> | <span class="number">200</span> | <span class="number">300</span> | <span class="number">400</span> | <span class="number">500</span> | <span class="number">600</span> | <span class="number">700</span> | <span class="number">800</span> | <span class="number">900</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Color</span> = <span class="string">&quot;red&quot;</span> | <span class="string">&quot;blue&quot;</span> | <span class="string">&quot;green&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>我們可以創建一個顏色調色板，代表所有可能的顏色和色調的組合：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">ColorPalette</span> = <span class="string">`<span class="subst">$&#123;Color&#125;</span>-<span class="subst">$&#123;ColorShade&#125;</span>`</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">color</span>: <span class="title class_">ColorPalette</span> = <span class="string">&quot;red-500&quot;</span>; <span class="comment">// 正確</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">badColor</span>: <span class="title class_">ColorPalette</span> = <span class="string">&quot;red&quot;</span>; <span class="comment">// 錯誤</span></span><br></pre></td></tr></table></figure>

<p>這樣，我們就得到了 27 種可能的組合（3 種顏色乘以 9 種色調）。<br>又或者，在樣式生成工具或 CSS-in-JS 的場景中，Template Literals 可以結合類型系統來強化樣式生成工具的正確性。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">CSSUnit</span> = <span class="string">&quot;px&quot;</span> | <span class="string">&quot;em&quot;</span> | <span class="string">&quot;rem&quot;</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">CSSProperty</span> = <span class="string">&quot;margin&quot;</span> | <span class="string">&quot;padding&quot;</span> | <span class="string">&quot;font-size&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">applyStyle</span>(<span class="params">property: CSSProperty, value: <span class="built_in">number</span>, unit: CSSUnit</span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;property&#125;</span>: <span class="subst">$&#123;value&#125;</span><span class="subst">$&#123;unit&#125;</span>;`</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">applyStyle</span>(<span class="string">&quot;margin&quot;</span>, <span class="number">10</span>, <span class="string">&quot;px&quot;</span>));  <span class="comment">// margin: 10px;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">applyStyle</span>(<span class="string">&quot;font-size&quot;</span>, <span class="number">1.5</span>, <span class="string">&quot;em&quot;</span>)); <span class="comment">// font-size: 1.5em;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 若單位或屬性錯誤，會觸發類型檢查錯誤</span></span><br><span class="line"><span class="title function_">applyStyle</span>(<span class="string">&quot;background&quot;</span>, <span class="number">10</span>, <span class="string">&quot;px&quot;</span>); <span class="comment">// Error: Argument of type &#x27;&quot;background&quot;&#x27; is not assignable to parameter of type &#x27;CSSProperty&#x27;.</span></span><br></pre></td></tr></table></figure>

<h3 id="另一個例子"><a href="#另一個例子" class="headerlink" title="另一個例子"></a>另一個例子</h3><p>在構建大型系統時，常常需要動態生成變量名稱或類型，<br>這時可以使用 Template Literal Types 來幫助構造更具彈性的類型系統。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Eventa</span> = <span class="string">&quot;click&quot;</span> | <span class="string">&quot;hover&quot;</span> | <span class="string">&quot;focus&quot;</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ElementID</span> = <span class="string">&quot;button&quot;</span> | <span class="string">&quot;input&quot;</span> | <span class="string">&quot;link&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 動態生成事件處理函數名稱 3x3 種型別檢查</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">EventHandlerName</span>&lt;E <span class="keyword">extends</span> <span class="title class_">Eventa</span>, T <span class="keyword">extends</span> <span class="title class_">ElementID</span>&gt; = <span class="string">`<span class="subst">$&#123;T&#125;</span>On<span class="subst">$&#123;Capitalize&lt;E&gt;&#125;</span>Handler`</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">buttonOnClickHandler</span>: <span class="title class_">EventHandlerName</span>&lt;<span class="string">&quot;click&quot;</span>, <span class="string">&quot;button&quot;</span>&gt; = <span class="string">&quot;buttonOnClickHandler&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">buttonOnHoverHandler</span>: <span class="title class_">EventHandlerName</span>&lt;<span class="string">&quot;hover&quot;</span>, <span class="string">&quot;button&quot;</span>&gt; = <span class="string">&quot;buttonOnHoverHandler&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">buttonOnFocusHandler</span>: <span class="title class_">EventHandlerName</span>&lt;<span class="string">&quot;focus&quot;</span>, <span class="string">&quot;button&quot;</span>&gt; = <span class="string">&quot;buttonOnFocusHandler&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">inputOnClickHandler</span>: <span class="title class_">EventHandlerName</span>&lt;<span class="string">&quot;click&quot;</span>, <span class="string">&quot;input&quot;</span>&gt; = <span class="string">&quot;inputOnClickHandler&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">inputOnHoverHandler</span>: <span class="title class_">EventHandlerName</span>&lt;<span class="string">&quot;hover&quot;</span>, <span class="string">&quot;input&quot;</span>&gt; = <span class="string">&quot;inputOnHoverHandler&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">inputOnFocusHandler</span>: <span class="title class_">EventHandlerName</span>&lt;<span class="string">&quot;focus&quot;</span>, <span class="string">&quot;input&quot;</span>&gt; = <span class="string">&quot;inputOnFocusHandler&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">linkOnClickHandler</span>: <span class="title class_">EventHandlerName</span>&lt;<span class="string">&quot;click&quot;</span>, <span class="string">&quot;link&quot;</span>&gt; = <span class="string">&quot;linkOnClickHandler&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">linkOnHoverHandler</span>: <span class="title class_">EventHandlerName</span>&lt;<span class="string">&quot;hover&quot;</span>, <span class="string">&quot;link&quot;</span>&gt; = <span class="string">&quot;linkOnHoverHandler&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">linkOnFocusHandler</span>: <span class="title class_">EventHandlerName</span>&lt;<span class="string">&quot;focus&quot;</span>, <span class="string">&quot;link&quot;</span>&gt; = <span class="string">&quot;linkOnFocusHandler&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">invalidHandler</span>: <span class="title class_">EventHandlerName</span>&lt;<span class="string">&quot;click&quot;</span>, <span class="string">&quot;button&quot;</span>&gt; = <span class="string">&quot;buttonOnHoverHandler&quot;</span>; <span class="comment">// Error: Type &#x27;&quot;buttonOnHoverHandler&quot;&#x27; is not assignable to type &#x27;&quot;buttonOnClickHandler&quot;&#x27;.</span></span><br></pre></td></tr></table></figure>

<h3 id="參考網路上的例子"><a href="#參考網路上的例子" class="headerlink" title="參考網路上的例子"></a>參考網路上的例子</h3><p>Template Literals 類型允許我們在 TypeScript 中插入其他類型到字符串類型中。<br>例如，假設我們想要定義一個表示 PNG 文件的類型：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Excel</span> = <span class="string">`<span class="subst">$&#123;<span class="built_in">string</span>&#125;</span>.xlsx`</span>;</span><br></pre></td></tr></table></figure>

<p>這樣，當我們為變量指定 Excel 類型時，它必須以 .xlsx 結尾：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">new_excel</span>: <span class="title class_">Excel</span> = <span class="string">&quot;my-image.xlsx&quot;</span>; <span class="comment">// ✅正確</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">old_excel</span>: <span class="title class_">Excel</span> = <span class="string">&quot;my-image.xls&quot;</span>; <span class="comment">// ❌錯誤</span></span><br></pre></td></tr></table></figure>

<p>當字符串不符合定義時，TypeScript 會顯示錯誤提示，這有助於減少潛在的錯誤。<br>我們可以確保字符串符合特定的前綴或中間包含特定子字符串。<br>例如，若要確保路由以 <code>/</code> 開頭，我們可以這樣定義：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Route</span> = <span class="string">`/<span class="subst">$&#123;<span class="built_in">string</span>&#125;</span>`</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">myRoute</span>: <span class="title class_">Route</span> = <span class="string">&quot;/home&quot;</span>; <span class="comment">// ✅正確</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">badRoute</span>: <span class="title class_">Route</span> = <span class="string">&quot;home&quot;</span>; <span class="comment">// ❌錯誤</span></span><br></pre></td></tr></table></figure>

<p>同樣的，如果我們需要確保字符串包含 ?，以便視為查詢字符串，我們可以這樣定義：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">QueryString</span> = <span class="string">`<span class="subst">$&#123;<span class="built_in">string</span>&#125;</span>?<span class="subst">$&#123;<span class="built_in">string</span>&#125;</span>`</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">myQueryString</span>: <span class="title class_">QueryString</span> = <span class="string">&quot;search?query=hello&quot;</span>; <span class="comment">// 正確</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">badQueryString</span>: <span class="title class_">QueryString</span> = <span class="string">&quot;search&quot;</span>; <span class="comment">// 錯誤</span></span><br></pre></td></tr></table></figure>

<p>此外，TypeScript 還提供了一些內建的實用類型來轉換字符串類型，例如 Uppercase 和 Lowercase，可以將字符串轉換為大寫或小寫：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">UppercaseHello</span> = <span class="title class_">Uppercase</span>&lt;<span class="string">&quot;hello&quot;</span>&gt;; <span class="comment">// &quot;HELLO&quot;</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">LowercaseHELLO</span> = <span class="title class_">Lowercase</span>&lt;<span class="string">&quot;HELLO&quot;</span>&gt;; <span class="comment">// &quot;hello&quot;</span></span><br></pre></td></tr></table></figure>

<p>還有 Capitalize 和 Uncapitalize 這兩個實用類型，可以用來改變字符串的首字母大小寫：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">CapitalizeMatt</span> = <span class="title class_">Capitalize</span>&lt;<span class="string">&quot;matt&quot;</span>&gt;; <span class="comment">// &quot;Matt&quot;</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">UncapitalizePHD</span> = <span class="title class_">Uncapitalize</span>&lt;<span class="string">&quot;PHD&quot;</span>&gt;; <span class="comment">// &quot;pHD&quot;</span></span><br></pre></td></tr></table></figure>

<p>這些功能展示了 TypeScript 類型系統的靈活性。</p>
<h2 id="結語"><a href="#結語" class="headerlink" title="結語"></a>結語</h2><p>Template Literals 類型是一個非常有用的特性，能夠幫助開發者在 TypeScript 中更精確地控制字符串類型。<br>從定義特定格式的文件名到生成複雜的組合類型，它為代碼提供了更高的可讀性和安全性。<br>如果你在開發過程中需要處理字符串模式，Template Literals 類型無疑是值得考慮的工具。</p>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">Template literals (Template strings)</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.com/onedegree-tech-blog/javascript-%E6%9C%89%E8%B6%A3%E7%9A%84%E5%86%B7%E7%9F%A5%E8%AD%98-tagged-template-literals-5ca9db71f066">JavaScript 有趣的冷知識：tagged template literals</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/09/30/2024/typescript_template_literals/" data-id="cmc82jkru00gp2smq7f0q48qj" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/09/30/2024/typescript_template_literals/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" rel="tag">學習筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/2/">← 上一頁</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/31/">31</a><a class="extend next" rel="next" href="/page/4/">下一頁 →</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/06/22/2025/ai-ollama-containerized/"> [實作筆記] Ollama 容器化調研筆記</a>
          </li>
        
          <li>
            <a href="/2025/06/20/2025/ai-tools/"> [生活筆記] 2025 常用工具整理 - AI 篇</a>
          </li>
        
          <li>
            <a href="/2025/06/05/2025/gitlab-cicd-to-registry/"> [實作筆記] 用 GitLab CI/CD 實現自動打 Tag、Build 與 Push Docker Image 到 Registry</a>
          </li>
        
          <li>
            <a href="/2025/06/04/2025/gcp-internal-lb-serivce/"> [實作筆記] GCP Cloud Run 私有化部署：透過 Load Balancer 實現內網存取與 IP 限制</a>
          </li>
        
          <li>
            <a href="/2025/05/24/2025/vim_setting/"> [實作筆記] 我的 Vim 設定</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">彙整</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/06/">六月 2025</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/05/">五月 2025</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/04/">四月 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">三月 2025</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/02/">二月 2025</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/01/">一月 2025</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">十二月 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">十一月 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">十月 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">九月 2024</a><span class="archive-list-count">5</span></li><span id='list_archives2' style='display:none'><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">八月 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">七月 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">六月 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">五月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">四月 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">三月 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">二月 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">一月 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">十二月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">十一月 2023</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">十月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">九月 2023</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">八月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">七月 2023</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">六月 2023</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">五月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">四月 2023</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">三月 2023</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">二月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">一月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">九月 2022</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">八月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">六月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">五月 2022</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">三月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">二月 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">6</span></li></span><span id=''></span><span onclick="var d=document.getElementById('list_archives2'); d.style.display===''?d.style='display:none':d.style=''">toggle...</span></ul>
    </div>
  </div>


  
    <a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-nd/3.0/tw/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/3.0/tw/88x31.png" />
</a>
  <br />
This work is licensed under a 
<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-nd/3.0/tw/">Creative Commons Attribution-NonCommercial-NoDerivs 3.0 Taiwan License</a>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤雲</h3>
    <div class="widget tagcloud">
      <a href="/tags/Net-Framework/" style="font-size: 14.38px;">.Net Framework</a> <a href="/tags/API/" style="font-size: 11.25px;">API</a> <a href="/tags/AWS/" style="font-size: 13.13px;">AWS</a> <a href="/tags/Agile/" style="font-size: 17.5px;">Agile</a> <a href="/tags/CI-CD/" style="font-size: 19.38px;">CI/CD</a> <a href="/tags/Cache/" style="font-size: 10px;">Cache</a> <a href="/tags/Coding-Standard/" style="font-size: 10px;">Coding Standard</a> <a href="/tags/Container/" style="font-size: 11.88px;">Container</a> <a href="/tags/Database/" style="font-size: 12.5px;">Database</a> <a href="/tags/Design-Pattern/" style="font-size: 10.63px;">Design Pattern</a> <a href="/tags/Docker/" style="font-size: 11.88px;">Docker</a> <a href="/tags/Entity-Framework/" style="font-size: 10.63px;">Entity Framework</a> <a href="/tags/Firebase/" style="font-size: 10px;">Firebase</a> <a href="/tags/Git/" style="font-size: 10.63px;">Git</a> <a href="/tags/Golang/" style="font-size: 11.25px;">Golang</a> <a href="/tags/Google/" style="font-size: 11.25px;">Google</a> <a href="/tags/GulpJs/" style="font-size: 10.63px;">GulpJs</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/IIS/" style="font-size: 10px;">IIS</a> <a href="/tags/IO/" style="font-size: 10px;">IO</a> <a href="/tags/Integrated-Testing/" style="font-size: 10px;">Integrated Testing</a> <a href="/tags/Jenkins/" style="font-size: 11.88px;">Jenkins</a> <a href="/tags/Kubernetes/" style="font-size: 10px;">Kubernetes</a> <a href="/tags/Linux/" style="font-size: 10.63px;">Linux</a> <a href="/tags/Mongodb/" style="font-size: 10px;">Mongodb</a> <a href="/tags/MsSQL/" style="font-size: 11.25px;">MsSQL</a> <a href="/tags/MsTest/" style="font-size: 10px;">MsTest</a> <a href="/tags/Mutation-Testing/" style="font-size: 10px;">Mutation Testing</a> <a href="/tags/Nodejs/" style="font-size: 15px;">Nodejs</a> <a href="/tags/OAuth/" style="font-size: 10px;">OAuth</a> <a href="/tags/OOP/" style="font-size: 11.25px;">OOP</a> <a href="/tags/Openshift/" style="font-size: 10.63px;">Openshift</a> <a href="/tags/PowerShell/" style="font-size: 11.25px;">PowerShell</a> <a href="/tags/React/" style="font-size: 11.88px;">React</a> <a href="/tags/Redis/" style="font-size: 10.63px;">Redis</a> <a href="/tags/SQL/" style="font-size: 11.88px;">SQL</a> <a href="/tags/Scrum/" style="font-size: 16.88px;">Scrum</a> <a href="/tags/Shell/" style="font-size: 10.63px;">Shell</a> <a href="/tags/Specflow/" style="font-size: 10px;">Specflow</a> <a href="/tags/StyleCop/" style="font-size: 10px;">StyleCop</a> <a href="/tags/TDD/" style="font-size: 15.63px;">TDD</a> <a href="/tags/Testing/" style="font-size: 13.75px;">Testing</a> <a href="/tags/Thread/" style="font-size: 10.63px;">Thread</a> <a href="/tags/Trello/" style="font-size: 10px;">Trello</a> <a href="/tags/TypeScript/" style="font-size: 13.13px;">TypeScript</a> <a href="/tags/Unit-Testing/" style="font-size: 18.75px;">Unit Testing</a> <a href="/tags/Unix/" style="font-size: 10.63px;">Unix</a> <a href="/tags/Vim/" style="font-size: 10px;">Vim</a> <a href="/tags/Visual-Studio/" style="font-size: 10px;">Visual Studio</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/post/" style="font-size: 10px;">post</a> <a href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" style="font-size: 16.25px;">學習筆記</a> <a href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" style="font-size: 20px;">實作筆記</a> <a href="/tags/%E6%99%82%E9%96%93%E7%AE%A1%E7%90%86/" style="font-size: 10.63px;">時間管理</a> <a href="/tags/%E6%B4%BB%E5%8B%95%E7%AD%86%E8%A8%98/" style="font-size: 12.5px;">活動筆記</a> <a href="/tags/%E7%94%9F%E6%B4%BB%E7%AD%86%E8%A8%98/" style="font-size: 16.88px;">生活筆記</a> <a href="/tags/%E8%A8%98%E9%8C%84/" style="font-size: 11.25px;">記錄</a> <a href="/tags/%E8%B8%A9%E9%9B%B7%E7%AD%86%E8%A8%98/" style="font-size: 15px;">踩雷筆記</a> <a href="/tags/%E9%87%8D%E6%A7%8B/" style="font-size: 11.88px;">重構</a> <a href="/tags/%E9%96%B1%E8%AE%80%E7%AD%86%E8%A8%98/" style="font-size: 18.13px;">閱讀筆記</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Net-Framework/" rel="tag">.Net Framework</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/API/" rel="tag">API</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AWS/" rel="tag">AWS</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Agile/" rel="tag">Agile</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI-CD/" rel="tag">CI&#x2F;CD</a><span class="tag-list-count">24</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cache/" rel="tag">Cache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Coding-Standard/" rel="tag">Coding Standard</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Container/" rel="tag">Container</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/" rel="tag">Database</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design-Pattern/" rel="tag">Design Pattern</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Entity-Framework/" rel="tag">Entity Framework</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Firebase/" rel="tag">Firebase</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Golang/" rel="tag">Golang</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Google/" rel="tag">Google</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GulpJs/" rel="tag">GulpJs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IIS/" rel="tag">IIS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO/" rel="tag">IO</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Integrated-Testing/" rel="tag">Integrated Testing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jenkins/" rel="tag">Jenkins</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kubernetes/" rel="tag">Kubernetes</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mongodb/" rel="tag">Mongodb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MsSQL/" rel="tag">MsSQL</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MsTest/" rel="tag">MsTest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mutation-Testing/" rel="tag">Mutation Testing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nodejs/" rel="tag">Nodejs</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OAuth/" rel="tag">OAuth</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OOP/" rel="tag">OOP</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Openshift/" rel="tag">Openshift</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PowerShell/" rel="tag">PowerShell</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/" rel="tag">SQL</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scrum/" rel="tag">Scrum</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/" rel="tag">Shell</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Specflow/" rel="tag">Specflow</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/StyleCop/" rel="tag">StyleCop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TDD/" rel="tag">TDD</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Testing/" rel="tag">Testing</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thread/" rel="tag">Thread</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Trello/" rel="tag">Trello</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unit-Testing/" rel="tag">Unit Testing</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unix/" rel="tag">Unix</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vim/" rel="tag">Vim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Visual-Studio/" rel="tag">Visual Studio</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/" rel="tag">html</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/post/" rel="tag">post</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" rel="tag">學習筆記</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a><span class="tag-list-count">125</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%99%82%E9%96%93%E7%AE%A1%E7%90%86/" rel="tag">時間管理</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B4%BB%E5%8B%95%E7%AD%86%E8%A8%98/" rel="tag">活動筆記</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E7%AD%86%E8%A8%98/" rel="tag">生活筆記</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A8%98%E9%8C%84/" rel="tag">記錄</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B8%A9%E9%9B%B7%E7%AD%86%E8%A8%98/" rel="tag">踩雷筆記</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%87%8D%E6%A7%8B/" rel="tag">重構</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%96%B1%E8%AE%80%E7%AD%86%E8%A8%98/" rel="tag">閱讀筆記</a><span class="tag-list-count">15</span></li></ul>
    </div>
  </div>


  
    

  
    <div class="widget-wrap">
    <h3 class="widget-title">多語系</h3>
    <div class="widget">
        <div id="ytWidget"></div>
    </div>
</div>
<script src="https://translate.yandex.net/website-widget/v1/widget.js?widgetId=ytWidget&pageLang=zh&widgetTheme=dark&autoMode=false" type="text/javascript"></script>
  
    <div class="widget-wrap">
    <h3 class="widget-title">BADGES</h3>
    <div class="widget">
        <a target="_blank" rel="noopener" href="https://bcert.me/bc/html/show-badge.html?b=uufxvngl">
            <img src="/images/2018/csm/seal-csm.png" alt="Certified ScrumMaster®">
        </a>
    </div>
</div>
  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2025 Marsen L.<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

  
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css">

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>



<script src="/js/sayings.js?v=0.js"></script>
  

<script src="/js/script.js?v=0.js"></script>

<div id="likecoin">
  <script type="text/javascript">
    document.write(
      "<iframe scrolling='no' frameborder='0' sandbox='allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-storage-access-by-user-activation' style='height: 212px; width: 100%;' src='https://button.like.co/in/embed/marsenlin/button?referrer=" +
      encodeURIComponent(location.href.split("?")[0].split("#")[0]) + "'></iframe>");
  </script>
</div>
<script>

  var disqus_shortname = 'marsenlin';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();

</script>

  </div>
    
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NTDGNJZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

</body>
</html>