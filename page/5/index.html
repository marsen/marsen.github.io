<!DOCTYPE html>
<html>
<head>
  
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NTDGNJZ');</script>
<!-- End Google Tag Manager -->

  
<!-- Google Analytics -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RF47NNRE5G"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RF47NNRE5G');
</script>
<!-- End Google Analytics -->

  
<!-- Google AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1885096025224905"
     crossorigin="anonymous"></script>
<!-- End Google AdSense -->



  <meta charset="utf-8">
  
  <title>Marsen&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Marsen&#39;s Blog">
<meta property="og:url" content="https://blog.marsen.me/page/5/index.html">
<meta property="og:site_name" content="Marsen&#39;s Blog">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Marsen L.">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Marsen&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
      
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300&display=swap" rel="stylesheet">
  
  
<link rel="stylesheet" href="/css/style.css">

  <meta property ="og:image" content="https://avatars1.githubusercontent.com/u/4269720?s=460&v=4" /> 
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="blog-banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Marsen&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle"></a>
          <div>
          <span style="width: 20px; height: 10px; background: linear-gradient(to bottom, #005BBB 50%, #FFD700 50%); text-align: center; color: white; font-size: 6px; font-weight: bold; line-height: 100px;">
            #StandWithUkraine
          </span>
          </div>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜尋"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.marsen.me"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2024/azure_email_communication_service" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/06/07/2024/azure_email_communication_service/" class="article-date">
  <time datetime="2024-06-07T09:58:53.000Z" itemprop="datePublished">2024-06-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/06/07/2024/azure_email_communication_service/"> [實作筆記] Azure Communication Services email</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>隨著現代企業在數位轉型中的步伐加快，電子郵件仍然是最重要的溝通工具之一。<br>公司現在的寄信服務採取了一個特別的解決方案，透過 App registrations 進行郵件發送。<br>實作的細節不展開，但這樣作有幾個問題:  </p>
<ul>
<li>App registrations 首次需人工授權取得 refresh_token</li>
<li>有了 refresh_token 仍需交換到 access_token 才能寄信</li>
<li>更新 refresh_token 失敗時，就需要人工重新介入</li>
</ul>
<p>而 Microsoft Azure 提供了強大的 Email Communication Service，可以幫助企業輕鬆、有效地發送大量電子郵件。<br>優點有整合簡單、高可擴展、安全性高、可靠性強等等優點…  </p>
<p>本篇文章將記錄我如何在 Azure 中實作 Email Communication Service。</p>
<h2 id="實作步驟"><a href="#實作步驟" class="headerlink" title="實作步驟"></a>實作步驟</h2><ol>
<li><p>建立 Azure Communication Services 資源<br>  首先，登入 Azure 入口網站，然後依序進行以下步驟：<br>  點選「建立資源」按鈕，搜尋並選擇「Communication Services」。<br>  點選「建立」按鈕，填寫必要的資訊如資源名稱、訂閱和資源群組等。<br>  選擇地區並設定其餘選項後，點選「檢閱 + 建立」，檢查設定並點選「建立」。  </p>
</li>
<li><p>配置電子郵件通道<br>  在 Communication Services 資源建立完成後，需要進行電子郵件通道的配置：<br>  在資源概覽頁面中，找到並點選「Email」。<br>  點選「新增郵件域」，並按照提示設定 SMTP 資訊及其他相關設定。<br>  驗證郵件域並完成配置。<br>  <em>這裡你需要有 domain 管理者的權限，用來在 DNS Records 建立相關的記錄(CNAME、TXT)</em></p>
</li>
<li><p>生成 API 金鑰<br>  接下來，我們需要生成 API 金鑰，以便應用程式能夠通過此金鑰進行認證和發送電子郵件：<br>  在 Communication Services 資源頁面中，找到並點選「密鑰」。<br>  點選「生成&#x2F;管理密鑰」，生成新的 API 金鑰並保存。</p>
</li>
<li><p>發送電子郵件<br>  有了 API 金鑰和配置好的電子郵件通道，現在可以使用 Azure 提供的 SDK 或 REST API 發送電子郵件。<br>  以下範例展示了如何使用 Nodejs 發送郵件：</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">EmailClient</span>, type <span class="title class_">EmailMessage</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@azure/communication-email&#x27;</span></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">sendMail = <span class="keyword">async</span> (<span class="attr">req</span>: <span class="title class_">Request</span>, <span class="attr">res</span>: <span class="title class_">Response</span>): <span class="title class_">Promise</span>&lt;<span class="keyword">void</span>&gt; =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> connectionString = <span class="title function_">env</span>(<span class="string">&#x27;COMMUNICATION_SERVICES_CONNECTION_STRING&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> senderAddress = <span class="title function_">env</span>(<span class="string">&#x27;EMAIL_SENDER_ADDRESS&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> client = <span class="keyword">new</span> <span class="title class_">EmailClient</span>(connectionString)</span><br><span class="line">  <span class="keyword">const</span> &#123; to, subject, html &#125; = req.<span class="property">body</span></span><br><span class="line">  <span class="keyword">const</span> attachments = (req.<span class="property">files</span> != <span class="literal">null</span>)</span><br><span class="line">    ? (req.<span class="property">files</span> <span class="keyword">as</span> <span class="title class_">Express</span>.<span class="property">Multer</span>.<span class="property">File</span>[]).<span class="title function_">map</span>(<span class="function"><span class="params">file</span> =&gt;</span> (&#123;</span><br><span class="line">        <span class="attr">name</span>: file.<span class="property">originalname</span>,</span><br><span class="line">        <span class="attr">contentType</span>: file.<span class="property">mimetype</span>,</span><br><span class="line">        <span class="attr">contentInBase64</span>: file.<span class="property">buffer</span>.<span class="title function_">toString</span>(<span class="string">&#x27;base64&#x27;</span>)</span><br><span class="line">      &#125;))</span><br><span class="line">    : []</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">emailMessage</span>: <span class="title class_">EmailMessage</span> = &#123;</span><br><span class="line">    senderAddress,</span><br><span class="line">    <span class="attr">content</span>: &#123;</span><br><span class="line">      subject,</span><br><span class="line">      html</span><br><span class="line">    &#125;,</span><br><span class="line">    attachments,</span><br><span class="line">    <span class="attr">recipients</span>: &#123;</span><br><span class="line">      <span class="attr">to</span>: [&#123; <span class="attr">address</span>: to &#125;],</span><br><span class="line">      <span class="attr">bcc</span>: [&#123; <span class="attr">address</span>: <span class="string">&#x27;noreply@marsen.me&#x27;</span> &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> poller = <span class="keyword">await</span> client.<span class="title function_">beginSend</span>(emailMessage)</span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> poller.<span class="title function_">pollUntilDone</span>()</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;result:&#x27;</span>, result)</span><br><span class="line">  res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(&#123; <span class="attr">message</span>: <span class="string">`Email <span class="subst">$&#123;subject&#125;</span> Sent!`</span> &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="在-Azure-Portal-執行整合測試"><a href="#在-Azure-Portal-執行整合測試" class="headerlink" title="在 Azure Portal 執行整合測試"></a>在 Azure Portal 執行整合測試</h3><p>在 Azure Portal &gt; Communication Service &gt; Email &gt; Try Email，<br>非常貼心的提供了 C#、JavaScript、Java、Python、cUrl　的範本，<br>也可以取得連線字串。</p>
<h3 id="使用上限與新增寄件帳號"><a href="#使用上限與新增寄件帳號" class="headerlink" title="使用上限與新增寄件帳號"></a>使用上限與新增寄件帳號</h3><p>原則上預設的使用量對開發人員來說，是非常足夠的<br>但是如果想增加上限，或是新增其它的寄件者帳號，需要開 support ticket 進行升級，<br>這是為了避免郵件的濫用，另外需新增 MX Record 可以避免當成垃圾郵件。<br>升級後就可以在 Azure Portal &gt; Email Communication Service &gt; Provision domains &gt; MailFrom addresses<br>新增寄件者，實際上 Azure Communication Service 只會寄件無法收件，<br>即使在 O365 有相同的帳號，在寄件備份中也看不到透過 ECS 寄出的郵件。　　</p>
<h2 id="小結"><a href="#小結" class="headerlink" title="小結"></a>小結</h2><p>實作上比較有風險大概是 DNS Records 的設定，最久大約需等到 1 小時生效。<br>而開發上非常的容易，甚至程式範例都整合到 Portal，非常方便。 　<br>但是其它方面需要開票等待 Azure 協力升級與設定，就會比較麻煩。 　</p>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/azure/communication-services/concepts/email/email-overview">Overview of Azure Communication Services email</a></li>
<li><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/azure/communication-services/quickstarts/create-communication-resource?tabs=windows&pivots=platform-azp">Quickstart: Create and manage Communication Services resources</a></li>
<li><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/azure/communication-services/concepts/email/email-quota-increase">Quota increase for email domains</a></li>
<li><a target="_blank" rel="noopener" href="https://azure.microsoft.com/en-us/support/create-ticket/">Create Support Ticket</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/06/07/2024/azure_email_communication_service/" data-id="cmbjaum8400f02sqcfdgohpv8" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/06/07/2024/azure_email_communication_service/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2024/gitlab_ci_and_gcs_as_static_site" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/05/14/2024/gitlab_ci_and_gcs_as_static_site/" class="article-date">
  <time datetime="2024-05-14T03:42:53.000Z" itemprop="datePublished">2024-05-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/05/14/2024/gitlab_ci_and_gcs_as_static_site/"> [踩雷筆記] Gitlab CI/CD 與 GCP - 靜態網站部署整合 404 與 `/`</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>最近將公司的所有靜態網站轉換到 GCS 上了，遇到一些情境，特此記錄<br>這篇會以 Vue 與 Nuxt 的角度出發。<br>在前後端分離的情況下，SEO 變成一個問題，SSR 可以解決這個問題，<br>我們可以使用 Nuxt 建立我們的專案，並透過 <code>generate</code> 生成靜態檔案。</p>
<p>再進一步來說，我們可以整合 <a target="_blank" rel="noopener" href="https://cloud.google.com/storage/docs/hosting-static-website">GCS 進行靜態網站的部署</a></p>
<h3 id="題外話"><a href="#題外話" class="headerlink" title="題外話"></a>題外話</h3><p>Nuxt 的幾種建置方式</p>
<ol>
<li><p><code>npx nuxt build</code><br>  The build command creates a .output directory with all your application, server and dependencies ready for production.<br>  這個命令會建立一個 .output 目錄，裡面包含了你的應用程式、伺服器和所有必要的依賴，準備好用於生產環境。<br>  預設的行為，可以實作 SSR(Server Side Render)，適用有 SEO 需求，且變化快速的網站，Ex: 電商產品頁</p>
</li>
<li><p><code>npx nuxt build --prerender</code><br>  –prerender	false	Pre-render every route of your application. (note: This is an experimental flag. The behavior might be changed.) .<br>  –prerender false 會對應用程式的每個路由進行預渲染。（注意：這是一個實驗性的標誌。行為可能會更改。）；<br>  它會先產生好 HTML，適合 SSG 網站(內容不常改動，但有 SEO 需求）。Ex: BLOG</p>
</li>
<li><p><code>npx nuxt generate </code></p>
</li>
</ol>
<p>  The generate command pre-renders every route of your application and stores the result in plain HTML files that you can deploy on any static hosting services. The command triggers the nuxi build command with the prerender argument set to true<br>  這個命令會對你的應用程式的每個路由進行預渲染，並將結果存儲在普通的 HTML 文件中，你可以部署到任何靜態托管服務上。　　<br>  該命令會觸發 nuxi build 命令，並將 prerender 參數設置為 true。<br>  它適合純靜態的網頁(SPA)。Ex: Landing Page.　與前者最大的差異是，前者會建置成不同的 HTML，</p>
<h2 id="問題"><a href="#問題" class="headerlink" title="問題"></a>問題</h2><p>當我們在建置好靜態網站並部署到 GCS 上時，我遇到了一個異常的問題，<br>當我複製貼上網址時會發生 404 Not Found，主因是當我的網址結尾不是<code>/</code>時，<br>瀏覽器會轉導到 <code>/index.html</code>。<br>舉例說明:</p>
<p><code>https://marsen.me/sample</code> 複製貼上，會轉導到 <code>https://marsen.me/sample/index.html</code><br>而這頁不存在，導致產生 404 的錯誤</p>
<h2 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h2><p>採取升級 Nuxt 到 <a target="_blank" rel="noopener" href="https://github.com/nuxt/nuxt/releases/tag/v3.8.0">v3.8.0</a> 以上，<br>這是實驗性的功能，雖然目前有效，仍需觀注未來更新的狀況。<br>若不打算升級，另外有用 <code>middleware</code> 處理重定向，<br>可參考此 <a target="_blank" rel="noopener" href="https://github.com/nuxt/nuxt/issues/15462#issuecomment-1407374859">issue</a> 的討論串，<br>要寫比較多，而且留言者在部署到 vercel 有遇到其他問題。故採升級的方式解決此題。</p>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a href="https://blog.marsen.me/2022/03/09/2022/gcp_static_site_with_cloud_storage_and_loading_balancing/">靜態網站部署整合 GCP - Load Balancing &amp; Cloud Storage</a></li>
<li>[實作筆記] Gitlab CI&#x2F;CD 與 GCP 相關文章<ul>
<li><a href="https://blog.marsen.me/2023/04/13/2023/gitlab_ci_and_gcp_vm/">架構全貌</a></li>
<li><a href="https://blog.marsen.me/2023/04/14/2023/gitlab_ci_and_gcp_vm_create_server/">建立 Web Server VM</a></li>
<li><a href="https://blog.marsen.me/2023/04/14/2023/gitlab_ci_and_gcp_vm_cretae_runner/">建立 Gitlab Runner VM</a></li>
<li><a href="https://blog.marsen.me/2023/04/14/2023/gitlab_ci_and_gcp_vm_firewall/">防火牆設定</a></li>
<li><a href="https://blog.marsen.me/2023/04/24/2023/gitlab_ci_and_gcp_vm_account/">Linux User 與資料夾權限</a></li>
<li><a href="https://blog.marsen.me/2023/05/29/2023/gitlab_ci_and_gcp_vm_secret_config/">機敏資料的處理</a></li>
<li><a href="https://blog.marsen.me/2023/11/16/2023/gitlab_ci_error_handle/">錯誤處理</a></li>
<li><a href="https://blog.marsen.me/2024/03/13/2024/gitlab_ci_and_gcp_workload_federation/">Workload Identity Federation</a></li>
<li><a href="https://blog.marsen.me/2024/04/17/2024/gitlab_ci_and_gcp_cloud_run/">Cloud Run</a></li>
</ul>
</li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/05/14/2024/gitlab_ci_and_gcs_as_static_site/" data-id="cmbjaum8f00fy2sqc7t0ffgw5" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/05/14/2024/gitlab_ci_and_gcs_as_static_site/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2024/clear_gitlab-runner" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/04/17/2024/clear_gitlab-runner/" class="article-date">
  <time datetime="2024-04-17T02:25:21.000Z" itemprop="datePublished">2024-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/04/17/2024/clear_gitlab-runner/"> [實作筆記] 清理 CI/CD (Gitlab-runner) </a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="寫在前面"><a href="#寫在前面" class="headerlink" title="寫在前面"></a>寫在前面</h2><p>NM;DR<br>沒有什麼意義，不需要讀這篇</p>
<h2 id="緣由"><a href="#緣由" class="headerlink" title="緣由"></a>緣由</h2><ul>
<li>CI&#x2F;CD 執行失敗，檢查錯誤發現是 Gitlab-runner[*1] 主機空間不足。</li>
</ul>
<h2 id="處理歷程"><a href="#處理歷程" class="headerlink" title="處理歷程"></a>處理歷程</h2><ul>
<li>連線 Gitlab-runner 主機</li>
<li>查詢空間使用狀況，找到佔磁區的資料<blockquote>
<p>marsen@gr00:~$  <code>sudo du -h --max-depth=1 /</code><br>24K &#x2F;tmp<br>0 &#x2F;sys<br>74M &#x2F;boot<br>… skip …<br>24K &#x2F;root<br>94G &#x2F;var<br>97G &#x2F;</p>
</blockquote>
</li>
<li>用指令作深層的搜尋　<code>sudo du -h --max-depth=3 /var</code></li>
<li>發現 docker 的問題最大<blockquote>
<p> 252K &#x2F;var&#x2F;lib&#x2F;docker&#x2F;containers<br>4.0K &#x2F;var&#x2F;lib&#x2F;docker&#x2F;trust<br>4.0K &#x2F;var&#x2F;lib&#x2F;docker&#x2F;runtimes<br>91G &#x2F;var&#x2F;lib&#x2F;docker</p>
</blockquote>
</li>
<li>不選擇清理磁碟，而用 docker 指令檢查 <code>docker images</code></li>
<li>批次刪除指令　<code>docker images -f &quot;dangling=true&quot; -q | xargs docker rmi</code></li>
<li>再次檢查<blockquote>
<p>marsen@gr00:~$  <code>sudo du -h --max-depth=1 /</code><br>24K &#x2F;tmp<br>0 &#x2F;sys<br>74M &#x2F;boot<br>… skip …<br>24K &#x2F;root<br>16G &#x2F;var<br>20G &#x2F;</p>
</blockquote>
</li>
</ul>
<h2 id="後續"><a href="#後續" class="headerlink" title="後續"></a>後續</h2><ul>
<li>可能要建立一個排程定期去清理 CI&#x2F;CD 無用的 image<ul>
<li>可以的話想整入 CI&#x2F;CD 作業中，但在 DinD[*2] 的環境不確定怎麼實作</li>
</ul>
</li>
<li>log 與 cache 也有看到較高的資料成長曲線，未來也要納入評估</li>
</ul>
<h3 id="20240829-更新設置定期清理腳本"><a href="#20240829-更新設置定期清理腳本" class="headerlink" title="20240829 更新設置定期清理腳本"></a>20240829 更新設置定期清理腳本</h3><p>建立 cleanup.sh，並將其放置在 root 根目錄下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">cp</span> /path/to/cleanup.sh /root/</span><br><span class="line">sudo <span class="built_in">chmod</span> +x /root/cleanup.sh</span><br></pre></td></tr></table></figure>

<p>cleanup.sh 的內容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 清理未使用的 Docker 資源</span></span><br><span class="line">sudo docker system prune -a --force --volumes</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清理未使用的 Docker 卷</span></span><br><span class="line">sudo docker volume prune --force</span><br><span class="line"></span><br><span class="line"><span class="comment"># 縮減系統日誌大小</span></span><br><span class="line">sudo journalctl --vacuum-time=30d</span><br></pre></td></tr></table></figure>

<h4 id="設置排程"><a href="#設置排程" class="headerlink" title="設置排程"></a>設置排程</h4><p>以 root 用戶創建定期排程以每月執行清理腳本：</p>
<p>打開 cron 編輯器：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo crontab -e</span><br></pre></td></tr></table></figure>

<p>在 cron 編輯器中添加以下行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 0 1 * * /root/cleanup.sh &gt; /root/cleanup.log 2&gt;&amp;1</span><br></pre></td></tr></table></figure>

<ul>
<li>0 0 1 * *：每月的第一天午夜執行。</li>
<li>&#x2F;root&#x2F;cleanup.sh：執行清理腳本。</li>
<li><blockquote>
<p>&#x2F;root&#x2F;cleanup.log 2&gt;&amp;1：將輸出和錯誤重定向到 &#x2F;root&#x2F;cleanup.log。</p>
</blockquote>
</li>
</ul>
<h4 id="驗證和檢查"><a href="#驗證和檢查" class="headerlink" title="驗證和檢查"></a>驗證和檢查</h4><p>手動運行清理腳本以驗證它是否按預期工作：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /root/cleanup.sh</span><br></pre></td></tr></table></figure>

<h4 id="查看-cron-日誌"><a href="#查看-cron-日誌" class="headerlink" title="查看 cron 日誌"></a>查看 cron 日誌</h4><p>檢查 cron 日誌以確保定期任務已成功運行：</p>
<p>在 Ubuntu&#x2F;Debian 系統上：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo grep CRON /var/log/syslog</span><br></pre></td></tr></table></figure>

<p>使用 journalctl（如果使用 systemd）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo journalctl -u cron</span><br></pre></td></tr></table></figure>

<h2 id="註解"><a href="#註解" class="headerlink" title="註解"></a>註解</h2><ol>
<li>Gitlab-Runner 是　Gitlab Solution 中執行工作的實體，可以是多台，此案只有單台</li>
<li>Dind: Docker In Docker,如同字面意思，在 Docker 中跑 Docker，是 Gitlab-runner 的實作方法之一</li>
</ol>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/04/17/2024/clear_gitlab-runner/" data-id="cmbjaum8c00fo2sqc6te74f4o" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/04/17/2024/clear_gitlab-runner/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CI-CD/" rel="tag">CI&#x2F;CD</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2024/gitlab_ci_and_gcp_cloud_run" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/04/17/2024/gitlab_ci_and_gcp_cloud_run/" class="article-date">
  <time datetime="2024-04-17T02:18:25.000Z" itemprop="datePublished">2024-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/04/17/2024/gitlab_ci_and_gcp_cloud_run/"> [實作筆記] Gitlab CI/CD 與 GCP - Cloud Run 方案選擇過程記錄</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提介"><a href="#前情提介" class="headerlink" title="前情提介"></a>前情提介</h2><p>在我的實務經驗上，很常與新創團隊合作，而架構選擇常常是第一個問題，<br>最常見的解法是，由技術負責人選擇最熟悉的技術…<br>這樣真的好嗎?<br>比如說，T 社早期由某群工程人員開發，<br>選擇了 Go、Nodejs、C# 等多語言與雲端 GKE(K8S) 作為開發架構，<br>事後不負責任離職後，對持續的運作與維護都造成了困難<br>這件事對我的警鐘是 — <strong>作為管理者，如果不具備識別專業的能力，就只能透過信賴某人或團隊;這是非常脆弱且危險的。</strong></p>
<h3 id="執行環境的選擇"><a href="#執行環境的選擇" class="headerlink" title="執行環境的選擇"></a>執行環境的選擇</h3><p>作為 Web 開發者，最常用的執行環境由簡入繁如下:</p>
<h4 id="地端到雲端到"><a href="#地端到雲端到" class="headerlink" title="地端到雲端到"></a>地端到雲端到</h4><ul>
<li>開發機就是正式機: 通常只是用來展示，開發者最常這樣作</li>
<li>地端的主機: 沒有技術能力公司，很有可能都是這樣的架構，直接向開發商買主機放機房或是由開發商部署</li>
<li>地端的虛擬機(VM): 會用較高規格的機器部署多台 VM，可以更有效使用資源</li>
<li>雲端的虛擬機(VM): 使用上與上面差不多，但是由大廠來維持高可用性，學習門檻低</li>
<li>雲端的 Server Less: 需要熟悉不同雲的相關產品，算是有點門檻，完成後可以精準控制預算、減少人力成本、透過雲維持高可用性</li>
<li>雲端的 K8s: 門檻較上面更高，也有相同的優點，但是會有更高的可控性，適合有一定使用規模後，需要細部彈性調整資源的公司。</li>
<li>再回地端: 如果規模再繼續成長，雲端的成本變得高不可攀時，或控制力下降，在有一定的技術水準情況下，有的公司會選擇回到地端。<a target="_blank" rel="noopener" href="https://37signals.com/podcast/leaving-the-cloud/">參考 37signals 的例子</a></li>
</ul>
<h2 id="GCP-Cloud-Run"><a href="#GCP-Cloud-Run" class="headerlink" title="GCP Cloud Run"></a>GCP Cloud Run</h2><p>回歸本文，我選擇了 GCP Cloud Run，這是一種雲端的 Server Less 的解決方案。<br>產品的規模沒有大到需要 K8s，團隊成員的具備足夠的能力，<br>類似的方案還有 Cloud Function，<br>作為一個 Web API Base 的輕量專案，我評估 Cloud Run 更適合<br>Cloud Function 較適合 Event Driven 的片段行為<br>Cloud Run 較適合有點複雜度，但是可以容器化的應用。</p>
<h3 id="相關作業"><a href="#相關作業" class="headerlink" title="相關作業"></a>相關作業</h3><p>首先準備好我的程式，這是一個透過 Azure 寄信程式，需要在 <code>Azure Registered APP</code> 設定，<br>基本的讀取組態、寫 Log 到雲端與錯誤處理(Error Handle)、相依注入與測試等…<br>其中一個功能需要將 token 存儲在 <code>GCS(gcloud storage)</code> 裡，<br>並透過 <code>Cloud Scheduler</code> 定期更新，所以需要為其提供必要的權限與帳號(GCP Service Account).  </p>
<p>使用 <code>Cloud Run</code> 前，<code>Docker</code> 也是必要的前置知識，<br>你會需要撰寫 Dockerfile ，並且需要在 GCP 上建立一個 <code>Artifacts Registry</code><br>如此一來，就可以透過 <code>Cloud Build</code> 建立並部署 <code>Cloud Run</code> 了<br>用　<code>GCP Workload Identity Federation</code> 管理 <code>Service Account</code><br>管理的對像有 2 個，CI 的 Service Account 與執行程式的 Cloud Run 的 Service Account.  </p>
<p>後續有考慮透過 Cloud Run 提供 <code>Swagger</code> 之類的 API 文檔，但現階段先共享 <code>Postman</code> 資訊處理。</p>
<h4 id="20240427-更新"><a href="#20240427-更新" class="headerlink" title="20240427 更新"></a>20240427 更新</h4><p>我的 CI 腳本如下  </p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">export</span> <span class="string">CLOUDSDK_AUTH_ACCESS_TOKEN=&#123;provider</span> <span class="string">by</span> <span class="string">workload</span> <span class="string">identify</span> <span class="string">federation&#125;</span></span><br><span class="line"><span class="string">gcloud</span> <span class="string">builds</span> <span class="string">submit</span> <span class="string">--tag</span> <span class="string">your-registry/your-app:latest</span> <span class="string">.</span></span><br><span class="line"><span class="string">gcloud</span> <span class="string">run</span> <span class="string">services</span> <span class="string">update</span> <span class="string">your-app</span> <span class="string">--image=your-registry/your-app:latest</span> </span><br></pre></td></tr></table></figure>

<p>我的 Gitlab Runner 是透過 GCP 上 A Project 的 VM 建立並註冊的，<br>而我的 Cloud Run 需要部署並運作在 GCP B Project 上，<br>預設執行的身份會是 AProj 的 Compute Engine default service account，以下簡稱 A_CE_Account，<br>而 <code>CLOUDSDK_AUTH_ACCESS_TOKEN</code> 代表的是 B Project 的 Gitlab Runner Service Account，以下簡稱 B_GR_Service_Account，<br>另外在運作 B Project 的 Cloud Run 需要的是 B Project 的 Cloud Run Service Account，以下簡稱　B_CR_Service_Account，  </p>
<p>Gitlab Runner 在執行時，執行 <code>gcloud auth list</code> 會顯示 <code>A_CE_Account</code>，<br>但是由於有設定 <code>CLOUDSDK_AUTH_ACCESS_TOKEN</code>，所以相關命令的執行身份是　<code>B_GR_Service_Account</code>，<br>這會有足夠的權限執行　<code>gcloud builds submit --tag your-registry/your-app:latest .</code><br>但是沒有權限執行　<code>gcloud run services update your-app --image=your-registry/your-app:latest</code><br>原因是 Cloud Run 的執行身份是 <code>B_GR_Service_Account</code>，<br>為此，我們需要賦予 <code>B_GR_Service_Account</code> 角色 <code>Service Account User</code></p>
<h2 id="參考關鍵字"><a href="#參考關鍵字" class="headerlink" title="參考關鍵字"></a>參考關鍵字</h2><ul>
<li><a target="_blank" rel="noopener" href="https://cloud.google.com/run?hl=en">Cloud Run</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.google.com/functions">Cloud Function</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.google.com/build">Cloud Build</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.google.com/storage">Cloud Storage</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.google.com/scheduler">Cloud Scheduler</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.google.com/iam/docs/workload-identity-federation">Workload Identity Federation</a></li>
<li><a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a></li>
<li><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/security/zero-trust/develop/app-registration">Azure Registered APP</a></li>
</ul>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li>[實作筆記] Gitlab CI&#x2F;CD 與 GCP 相關文章<ul>
<li><a href="https://blog.marsen.me/2023/04/13/2023/gitlab_ci_and_gcp_vm/">架構全貌</a></li>
<li><a href="https://blog.marsen.me/2023/04/14/2023/gitlab_ci_and_gcp_vm_create_server/">建立 Web Server VM</a></li>
<li><a href="https://blog.marsen.me/2023/04/14/2023/gitlab_ci_and_gcp_vm_cretae_runner/">建立 Gitlab Runner VM</a></li>
<li><a href="https://blog.marsen.me/2023/04/14/2023/gitlab_ci_and_gcp_vm_firewall/">防火牆設定</a></li>
<li><a href="https://blog.marsen.me/2023/04/24/2023/gitlab_ci_and_gcp_vm_account/">Linux User 與資料夾權限</a></li>
<li><a href="https://blog.marsen.me/2023/05/29/2023/gitlab_ci_and_gcp_vm_secret_config/">機敏資料的處理</a></li>
<li><a href="https://blog.marsen.me/2023/11/16/2023/gitlab_ci_error_handle/">錯誤處理</a></li>
<li><a href="https://blog.marsen.me/2024/03/13/2024/gitlab_ci_and_gcp_workload_federation/">Workload Identity Federation</a></li>
<li><a href="https://blog.marsen.me/2024/04/17/2024/gitlab_ci_and_gcp_cloud_run/">Cloud Run</a></li>
</ul>
</li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/04/17/2024/gitlab_ci_and_gcp_cloud_run/" data-id="cmbjaum8g00g12sqc1djs22nl" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/04/17/2024/gitlab_ci_and_gcp_cloud_run/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CI-CD/" rel="tag">CI&#x2F;CD</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2024/mac_terminal_prompts_setting" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/03/29/2024/mac_terminal_prompts_setting/" class="article-date">
  <time datetime="2024-03-29T08:48:10.000Z" itemprop="datePublished">2024-03-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/03/29/2024/mac_terminal_prompts_setting/"> [實作筆記] MacBook Terminal 美化與設計</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>參考<a href="https://blog.marsen.me/2021/07/01/2021/mac_terminal_prompts_setting/">前文</a>，受同事啟發，改用 zim 取代 oh-my-zsh，<br>用更高效與精煉的方式設定 terminal 環境，<br>看看下面的小故事與 <a target="_blank" rel="noopener" href="https://zimfw.sh/#install">Zim 的官網</a>，<br>這就我選擇更換的原因。  </p>
<h3 id="小故事"><a href="#小故事" class="headerlink" title="小故事"></a>小故事</h3><p>可以<a target="_blank" rel="noopener" href="https://www.reddit.com/r/linuxadmin/comments/rhg7wx/zsh_frameworks/?rdt=39568">參考此文</a>，  </p>
<p>當前流行的 Zsh 框架有三個主要選項：Oh My Zsh、Prezto 和 Zim。<br>Oh My Zsh 是最受歡迎的，但因其過於龐大、混亂和性能問題而受到批評。<br>Prezto 是對其的重大改進，但未被合併回 Oh My Zsh。<br>而 Zim 是一個從頭重寫的框架，非常快速、高效，並將許多最佳想法結合在一起。<br>Zim 還提供了各種主題和模塊，並且易於安裝和管理。<br>這些框架在定製 Zsh 提示符、增加功能和優化性能方面提供了不同的選擇。</p>
<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><ul>
<li>下載與設定 iTerm2</li>
<li>安裝 zim</li>
<li>安裝 powerlevel10k</li>
</ul>
<h2 id="第一步-下載並安裝-iTerm2"><a href="#第一步-下載並安裝-iTerm2" class="headerlink" title="第一步 下載並安裝 iTerm2"></a>第一步 下載並安裝 <a target="_blank" rel="noopener" href="https://iterm2.com/downloads.html">iTerm2</a></h2><h3 id="設定-iTerm2-的外觀"><a href="#設定-iTerm2-的外觀" class="headerlink" title="設定 iTerm2 的外觀"></a>設定 iTerm2 的外觀</h3><ol>
<li>從網站 iTerm2-Color-Schemes (<a target="_blank" rel="noopener" href="https://github.com/mbadolato/iTerm2-Color-Schemes">https://github.com/mbadolato/iTerm2-Color-Schemes</a>) 下載你喜歡的配色方案，  </li>
<li>例如 “DimmedMonokai.itermcolors”。  </li>
<li>開啟 iTerm2，點擊菜單欄的 “iTerm2”，選擇 “Preferences”。</li>
<li>在偏好設定視窗中，選擇 “Profiles” 選項卡，然後選擇你要更改配色方案的會話配置文件。</li>
<li>在 “Colors” 選項卡下，點擊 “Color Presets” 按鈕，選擇 “Import…”。</li>
<li>找到剛才下載的配色方案檔案，例如 “DimmedMonokai.itermcolors”，點擊 “Open”。</li>
<li>選擇 “DimmedMonokai” 作為你的 iTerm2 配色方案。</li>
</ol>
<p><img src="https://i.imgur.com/d9qHicD.png" alt="import .itemcolors"></p>
<p>Profiles 裡有更多的設定, 字型、顏色<br>比如說, 調整啟始視窗大小與背景透明度, 可以前往 Windows 進行設定.<br>更多的細部設定可以自行摸索. 　<br><strong>記得重新載入才能看到效果</strong></p>
<h2 id="第二步-安裝-zim"><a href="#第二步-安裝-zim" class="headerlink" title="第二步, 安裝 zim"></a>第二步, 安裝 <a target="_blank" rel="noopener" href="https://zimfw.sh/">zim</a></h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://raw.githubusercontent.com/zimfw/install/master/install.zsh | zsh</span><br></pre></td></tr></table></figure>

<p>即可完成安裝，並預設定一些相當實用的模組，可以<a target="_blank" rel="noopener" href="https://zimfw.sh/docs/modules/">參考</a></p>
<h3 id="設定"><a href="#設定" class="headerlink" title="設定"></a>設定</h3><p>一般來說不需要這些額外的設定，我的情況是同時需要移除 <code>oh-my-zsh</code> 才會有額外的項目需要進行<br>進入 ~&#x2F;.zshrc　修改</p>
<p>一、刪除 <code>oh-my-zsh</code> 的區塊<br>常用的一些工具，都被整合在 <code>zim</code> 之中了<br>例如　zsh-syntax-highlighting　原本在 zshrc 的設定如下<br>現在都可以全數刪除</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Install zsh-syntax-highlighting <span class="keyword">if</span> it<span class="string">&#x27;s not installed</span></span></span><br><span class="line">if [ ! -d $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting ]; then</span><br><span class="line">  git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">Load zsh-syntax-highlighting plugin</span></span></span><br><span class="line">plugins+=(zsh-syntax-highlighting)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">Set name of the theme to load --- if set to &quot;random&quot;, it will</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">load a random theme each time oh-my-zsh is loaded, in which case,</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">to know which specific one was loaded, run: echo $RANDOM_THEME</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">See https://github.com/ohmyzsh/ohmyzsh/wiki/Themes</span></span></span><br><span class="line">ZSH_THEME=&quot;powerlevel10k/powerlevel10k&quot;</span><br></pre></td></tr></table></figure>

<p>由於<code>zim</code>本身就有包含 zsh-syntax-highlighting，<br>所以其它相關的設定不會有問題。<br>例如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE=&#x27;fg=177&#x27;</span><br><span class="line">ZSH_HIGHLIGHT_HIGHLIGHTERS=(main brackets)</span><br><span class="line">typeset -A ZSH_HIGHLIGHT_STYLES</span><br><span class="line">ZSH_HIGHLIGHT_STYLES[comment]=&#x27;fg=242&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="Prompt-設定"><a href="#Prompt-設定" class="headerlink" title="Prompt 設定"></a>Prompt 設定</h3><p>Prompt 主要影響 terminal 的外觀，<br>一般來說社群主流會推薦的 Powerlevel10k 後面會提供實作步驟，<br>但是 zim 已經提供足夠的 <a target="_blank" rel="noopener" href="https://zimfw.sh/docs/themes/">theme</a>作選擇，<br>下面選用 minimal (zim 提供的輕量版主題)作範例 　<br>我們可以修改 <code>~/.zimrc</code> 即可完成設定  </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">A heavily reduced, ASCII-only version of the Spaceship and Starship prompts.</span></span><br><span class="line">zmodule minimal </span><br></pre></td></tr></table></figure>

<h3 id="安裝-Powerlevel10k"><a href="#安裝-Powerlevel10k" class="headerlink" title="安裝 Powerlevel10k"></a>安裝 Powerlevel10k</h3><p>不過 zim 一樣可以使用 Powerlevel10k<br>前往 <a target="_blank" rel="noopener" href="https://github.com/romkatv/powerlevel10k">Powerlevel10k</a><br>我們使用 zim 的方式安裝</p>
<p>修改 <code>~/.zimrc</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zmodule romkatv/powerlevel10k --use degit</span><br></pre></td></tr></table></figure>

<p>後執行　<code>zimfw install</code></p>
<p>之後重啟 iTerm2 將會有一連串設定問題, 依照喜歡的設定即可,<br>可以參考這個<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=JnJm4gRrWN8&t=326s">影片</a>,<br>如果設定完後不喜歡, 可以執行 <code>p10k configure</code> 重新設定<br>比較一下，效果我覺得都不錯</p>
<p><img src="/../../images/2024/mac_terminal_prompts_setting_zim.png" alt="爆"><br><img src="/../../images/2024/mac_terminal_prompts_setting_p10k.png" alt="爆"></p>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a href="https://blog.marsen.me/2021/07/01/2021/mac_terminal_prompts_setting/">https://blog.marsen.me/2021/07/01/2021/mac_terminal_prompts_setting/</a></li>
<li><a target="_blank" rel="noopener" href="https://www.reddit.com/r/linuxadmin/comments/rhg7wx/zsh_frameworks/?rdt=39568">https://www.reddit.com/r/linuxadmin/comments/rhg7wx/zsh_frameworks/?rdt=39568</a></li>
<li><a target="_blank" rel="noopener" href="https://dev.to/techschoolguru/how-to-make-a-beautiful-terminal-j11">How to make a beautiful terminal</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/romkatv/powerlevel10k">Powerlevel10k</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/03/29/2024/mac_terminal_prompts_setting/" data-id="cmbjaum8i00g82sqc4zyv1bdq" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/03/29/2024/mac_terminal_prompts_setting/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2024/typescript_using" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/03/19/2024/typescript_using/" class="article-date">
  <time datetime="2024-03-19T05:13:45.000Z" itemprop="datePublished">2024-03-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/03/19/2024/typescript_using/"> [學習筆記] TypeScript 的 Using 與 Symbol.dispose</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="介紹"><a href="#介紹" class="headerlink" title="介紹"></a>介紹</h2><p>TypeScript 在 5.2 引入了一個新關鍵字 using - 可用於在離開作用域時使用 Symbol.dispose 函數處理任何內容。</p>
<p>看一下官方的說明</p>
<blockquote>
<p>TypeScript 5.2 introduces support for the forthcoming Explicit Resource Management feature in ECMAScript,<br>which aims to address the need for “cleaning up” after creating an object.<br>This feature allows developers to perform necessary actions such as closing network connections,<br>deleting temporary files, or releasing memory.</p>
</blockquote>
<p><code>using</code> 與 <code>await</code> 的目的在於釋放資源上會非常有用。</p>
<p>在舉例子之前先看一下新的全域 Symbol:<code>Symbol.dispose</code> 與 <code>Symbol.asyncDispose</code>,<br>任何將函數分配給 Symbol.dispose 的物件都將被視為「資源」（“具有特定存留期的物件”），並且可以與 using 關鍵字一起使用。</p>
<p>舉例來說:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getResource</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      [<span class="title class_">Symbol</span>.<span class="property">dispose</span>]: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hooray!&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  using resource = <span class="title function_">getResource</span>();</span><br><span class="line">&#125; <span class="comment">// &#x27;Hooray!&#x27; logged to console</span></span><br></pre></td></tr></table></figure>

<p>當程式離開 resource 所在的 scope 後，就會觸發 <code>Symbol.dispose</code> 的 function</p>
<h2 id="應用"><a href="#應用" class="headerlink" title="應用"></a>應用</h2><p>比較常見的場景在於存取 DB、File System 等…<br>我們現在的作法需要用 <code>try...finally</code> 進行處理</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">processFile</span>(<span class="params">path: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> file = fs.<span class="title function_">openSync</span>(path, <span class="string">&quot;w+&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// use file...</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_">someCondition</span>()) &#123;</span><br><span class="line">            <span class="comment">// do some more work...</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">// Close the file and delete it.</span></span><br><span class="line">        fs.<span class="title function_">closeSync</span>(file);</span><br><span class="line">        fs.<span class="title function_">unlinkSync</span>(path);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>而改用 <code>using</code> 後可以變得如此簡單</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">processFile</span>(<span class="params">path: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    using file = <span class="keyword">new</span> <span class="title class_">TempFile</span>(path);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// use file...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">someCondition</span>()) &#123;</span><br><span class="line">        <span class="comment">// do some more work...</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-5-2.html">using Declarations and Explicit Resource Management</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.com/@InspireTech/what-is-the-using-keyword-in-typescript-2a20738599e3">What is the “using” keyword in Typescript?</a></li>
<li><a target="_blank" rel="noopener" href="https://www.totaltypescript.com/typescript-5-2-new-keyword-using">TypeScript 5.2’s New Keyword: ‘using’</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/03/19/2024/typescript_using/" data-id="cmbjaum8o00h22sqc2c0bgu8k" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/03/19/2024/typescript_using/#disqus_thread" class="article-comment-link">留言</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2024/gitlab_ci_and_gcp_workload_federation" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/03/13/2024/gitlab_ci_and_gcp_workload_federation/" class="article-date">
  <time datetime="2024-03-13T07:25:55.000Z" itemprop="datePublished">2024-03-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/03/13/2024/gitlab_ci_and_gcp_workload_federation/"> [實作筆記] Gitlab CI/CD 與 GCP - Workload Identity Federation</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提介"><a href="#前情提介" class="headerlink" title="前情提介"></a>前情提介</h2><p>現況用 Service Account 會有什麼問題？<br>當我們希望與第三方的服務與 GCP 作整合時，<br>傳統的（我之前的）作法是透過建立 Service Account Key 去提供給第三方資源存取的權限。<br>這會產生資安隱患，主要是這把 Key 的權粒度大難以稽核，有效期長風險，<br>而要定期更換 Key 會變成一個麻煩的管理問題。</p>
<h3 id="需求介紹"><a href="#需求介紹" class="headerlink" title="需求介紹"></a>需求介紹</h3><p>我目前透過 GCS 並掛載 Load Balancing 部署靜態網站，<br>而 CI&#x2F;CD 是透過 Service Account 的 Key 去執行工作，<br>這是一種有資安隱憂的作法，所以我試著使用 Workload Identity Federation 取代</p>
<h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>TLDR;</p>
<p>而 Workload Identity Federation 是基於 IAM 機制，允許第三方服務整合 GCP 資源，<br>背後的技術原理是基於 OIDC， 在這裡我們不過度展開，簡單描述如下:</p>
<ol>
<li>Gitlab CI／CD 首先取 Gitlab OIDC Token，取得 Token 的作法可以參考<a target="_blank" rel="noopener" href="https://docs.gitlab.com/ee/ci/secrets/id_token_authentication.html">官方文件</a>，下面是個簡單的範例:</li>
</ol>
  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">job_with_id_tokens:</span></span><br><span class="line">  <span class="attr">id_tokens:</span></span><br><span class="line">    <span class="attr">FIRST_ID_TOKEN:</span></span><br><span class="line">      <span class="attr">aud:</span> <span class="string">https://first.service.com</span></span><br><span class="line">    <span class="attr">SECOND_ID_TOKEN:</span></span><br><span class="line">      <span class="attr">aud:</span> <span class="string">https://second.service.com</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">first-service-authentication-script.sh</span> <span class="string">$FIRST_ID_TOKEN</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">second-service-authentication-script.sh</span> <span class="string">$SECOND_ID_TOKEN</span></span><br></pre></td></tr></table></figure>

<p>  ｜OIDC 是基於 Oauth2 的標準，簡單可以想成 Oauth2 再加上身份驗証。<br>2. 有了  Gitlab OIDC Token，我們可以透過 GOOGLE STS(Security Token Service) API 取得　Federated Token<br>  在這裡我們需要先建立好 Workload Identity Provider(IdP)，而可以設定 Attribute Conditions 來作限制<br>3. 這個時候可以用 Federated Token 與 GCP IAM API 交換來一個短周期的 Access Token<br>4. 本質上還是用 Service Account 在作事，但是用短周期的 Access Token 取代 Key, 從而簡化了 Key 的管理工作  </p>
<h2 id="實作步驟"><a href="#實作步驟" class="headerlink" title="實作步驟"></a>實作步驟</h2><ol>
<li><p>建立 Workload Identity Pool</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Update <span class="variable">$GCP_PROJECT_ID</span> value</span></span><br><span class="line">gcloud iam workload-identity-pools create gitlab-test-wip \</span><br><span class="line">  --location=&quot;global&quot; \</span><br><span class="line">  --description=&quot;Gitlab demo workload Identity pool&quot; \</span><br><span class="line">  --display-name=&quot;gitlab-test-wip&quot; \</span><br><span class="line">  --project=$GCP_PROJECT_ID</span><br></pre></td></tr></table></figure>
</li>
<li><p>設定 workload identity pool provider 並建立 Attribute conditions,<br>這步的關鍵是讓只符合你條件設定的 User 才能取得 Token</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Update GITLAB_NAMESPACE_PATH value</span></span><br><span class="line">gcloud iam workload-identity-pools providers create-oidc gitlab-identity-provider --location=&quot;global&quot; \</span><br><span class="line">--workload-identity-pool=&quot;gitlab-test-wip&quot; \</span><br><span class="line">--issuer-uri=&quot;https://gitlab.com&quot; \</span><br><span class="line">--allowed-audiences=https://gitlab.com \</span><br><span class="line">--attribute-mapping=&quot;google.subject=assertion.sub,attribute.aud=assertion.aud,attribute.project_path=assertion.project_path,attribute.project_id=assertion.project_id,attribute.namespace_id=assertion.namespace_id,attribute.namespace_path=assertion.namespace_path,attribute.user_email=assertion.user_email,attribute.ref=assertion.ref,attribute.ref_type=assertion.ref_type&quot; \</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">--attribute-condition=<span class="string">&quot;assertion.namespace_path.startsWith(\&quot;<span class="variable">$GITLAB_NAMESPACE_PATH</span>\&quot;)&quot;</span> \</span></span><br><span class="line"><span class="language-bash">--attribute-condition=<span class="string">&quot;assertion.namespace_path.startsWith(\&quot;marsen\&quot;)&quot;</span> \</span></span><br><span class="line"><span class="language-bash">--project=<span class="variable">$GCP_PROJECT_ID</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>建立 GCP Service Account<br>在我的例子中</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Create a service account</span></span><br><span class="line">gcloud iam service-accounts create gitlab-runner-sa --project=$GCP_PROJECT_ID</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Add sample permissions to the Service account</span></span><br><span class="line">gcloud projects add-iam-policy-binding $GCP_PROJECT_ID \</span><br><span class="line">  --member=serviceAccount:gitlab-wif-demo@$&#123;GCP_PROJECT_ID&#125;.iam.gserviceaccount.com \</span><br><span class="line">  --role=roles/storage.admin</span><br></pre></td></tr></table></figure>
</li>
<li><p>建立 Service Account 與 WIP 的角色關係綁定</p>
<p> 可以先取得專案的 GCP Project Id</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PROJECT_NUMBER=$(gcloud projects describe $(gcloud config get-value core/project) --format=value\(projectNumber\) --project $GCP_PROJECT_ID)</span><br></pre></td></tr></table></figure>

<p> 設定 Service Account 的角色為 workloadIdentityUser，並將其設定為 workloadIdentityPools 的服務帳戶</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gcloud iam service-accounts add-iam-policy-binding gitlab-runner-sa@$&#123;GCP_PROJECT_ID&#125;.iam.gserviceaccount.com \</span><br><span class="line">    --role=roles/iam.workloadIdentityUser \</span><br><span class="line">    --member=&quot;principalSet://iam.googleapis.com/projects/$PROJECT_NUMBER/locations/global/workloadIdentityPools/gitlab-test-wip/*&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>建立 Gitlab CI&#x2F;CD 進行測試</p>
</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">image:</span> <span class="string">node:20.9.0-alpine</span></span><br><span class="line"></span><br><span class="line"><span class="string">.gcp_wif_auth:</span> <span class="meta">&amp;gcp_wif_auth</span></span><br><span class="line">  <span class="comment">#id_tokens to create JSON web tokens (JWT) to authenticate with third party services.This replaces the CI_JOB_JWT_V2</span></span><br><span class="line">  <span class="attr">id_tokens:</span></span><br><span class="line">    <span class="attr">GITLAB_OIDC_TOKEN:</span></span><br><span class="line">      <span class="attr">aud:</span> <span class="string">https://gitlab.com</span></span><br><span class="line">  <span class="attr">before_script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">apt-get</span> <span class="string">update</span> <span class="string">&amp;&amp;</span> <span class="string">apt-get</span> <span class="string">install</span> <span class="string">-yq</span> <span class="string">jq</span></span><br><span class="line">    <span class="comment">#Get temporary credentials using the ID token</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">|</span></span><br><span class="line"><span class="string">      PAYLOAD=$(cat &lt;&lt;EOF</span></span><br><span class="line"><span class="string">      &#123;</span></span><br><span class="line"><span class="string">      &quot;audience&quot;: &quot;//iam.googleapis.com/$&#123;GCP_WORKLOAD_IDENTITY_PROVIDER&#125;&quot;,</span></span><br><span class="line"><span class="string">      &quot;grantType&quot;: &quot;urn:ietf:params:oauth:grant-type:token-exchange&quot;,</span></span><br><span class="line"><span class="string">      &quot;requestedTokenType&quot;: &quot;urn:ietf:params:oauth:token-type:access_token&quot;,</span></span><br><span class="line"><span class="string">      &quot;scope&quot;: &quot;https://www.googleapis.com/auth/cloud-platform&quot;,</span></span><br><span class="line"><span class="string">      &quot;subjectTokenType&quot;: &quot;urn:ietf:params:oauth:token-type:jwt&quot;,</span></span><br><span class="line"><span class="string">      &quot;subjectToken&quot;: &quot;$&#123;GITLAB_OIDC_TOKEN&#125;&quot;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      EOF</span></span><br><span class="line"><span class="string">      )</span></span><br><span class="line"><span class="string"></span>    <span class="bullet">-</span> <span class="string">|</span></span><br><span class="line"><span class="string">      echo &quot;Payload: $&#123;PAYLOAD&#125;&quot;</span></span><br><span class="line"><span class="string"></span>    <span class="bullet">-</span> <span class="string">|</span></span><br><span class="line"><span class="string">      FEDERATED_TOKEN=$(curl -s -X POST &quot;https://sts.googleapis.com/v1/token&quot; \</span></span><br><span class="line"><span class="string">      --header &quot;Accept: application/json&quot; \</span></span><br><span class="line"><span class="string">      --header &quot;Content-Type: application/json&quot; \</span></span><br><span class="line"><span class="string">      --data &quot;$&#123;PAYLOAD&#125;&quot; \</span></span><br><span class="line"><span class="string">      | jq -r &#x27;.access_token&#x27;</span></span><br><span class="line"><span class="string">      )</span></span><br><span class="line"><span class="string"></span>    <span class="comment">#- | </span></span><br><span class="line">    <span class="comment">#  echo &quot;Federated Token: $&#123;FEDERATED_TOKEN&#125;&quot;</span></span><br><span class="line">    <span class="comment">#Use the federated token to impersonate the service account linked to workload identity pool</span></span><br><span class="line">    <span class="comment">#The resulting access token is stored in CLOUDSDK_AUTH_ACCESS_TOKEN environment variable and this will be passed to the gcloud CLI</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">|</span></span><br><span class="line"><span class="string">      WHAT_IT_IS=$(curl -s -X POST &quot;https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/$&#123;SERVICE_ACCOUNT_EMAIL&#125;:generateAccessToken&quot; \</span></span><br><span class="line"><span class="string">      --header &quot;Accept: application/json&quot; \</span></span><br><span class="line"><span class="string">      --header &quot;Content-Type: application/json&quot; \</span></span><br><span class="line"><span class="string">      --header &quot;Authorization: Bearer $&#123;FEDERATED_TOKEN&#125;&quot; \</span></span><br><span class="line"><span class="string">      --data &#x27;&#123;&quot;scope&quot;: [&quot;https://www.googleapis.com/auth/cloud-platform&quot;]&#125;&#x27; \</span></span><br><span class="line"><span class="string">      | jq -r &#x27;.&#x27;</span></span><br><span class="line"><span class="string">      )</span></span><br><span class="line"><span class="string"></span>    <span class="bullet">-</span> <span class="string">|</span></span><br><span class="line"><span class="string">      echo &quot;WHAT_IT_IS: $&#123;WHAT_IT_IS&#125;&quot;</span></span><br><span class="line"><span class="string"></span>    <span class="bullet">-</span> <span class="string">|</span></span><br><span class="line"><span class="string">      export CLOUDSDK_AUTH_ACCESS_TOKEN=$(curl -s -X POST &quot;https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/$&#123;SERVICE_ACCOUNT_EMAIL&#125;:generateAccessToken&quot; \</span></span><br><span class="line"><span class="string">      --header &quot;Accept: application/json&quot; \</span></span><br><span class="line"><span class="string">      --header &quot;Content-Type: application/json&quot; \</span></span><br><span class="line"><span class="string">      --header &quot;Authorization: Bearer $&#123;FEDERATED_TOKEN&#125;&quot; \</span></span><br><span class="line"><span class="string">      --data &#x27;&#123;&quot;scope&quot;: [&quot;https://www.googleapis.com/auth/cloud-platform&quot;]&#125;&#x27; \</span></span><br><span class="line"><span class="string">      | jq -r &#x27;.accessToken&#x27;</span></span><br><span class="line"><span class="string">      )</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="attr">stages:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">deploy-prod</span></span><br><span class="line"></span><br><span class="line"><span class="attr">deploy-prod:</span></span><br><span class="line">  <span class="attr">variables:</span></span><br><span class="line">    <span class="attr">GCP_PROJECT_NAME:</span> <span class="string">my-project-9527</span></span><br><span class="line">    <span class="attr">GCP_WORKLOAD_IDENTITY_PROVIDER:</span> <span class="string">&quot;projects/000009527/locations/global/workloadIdentityPools/gitlab-test-wip/providers/gitlab-identity-provider&quot;</span></span><br><span class="line">    <span class="attr">SERVICE_ACCOUNT_EMAIL:</span> <span class="string">&quot;gitlab-runner@my-project9527.iam.gserviceaccount.com&quot;</span></span><br><span class="line">  <span class="string">&lt;&lt;:</span> <span class="meta">*gcp_wif_auth</span></span><br><span class="line">  <span class="attr">stage:</span> <span class="string">deploy-prod</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">google/cloud-sdk:latest</span></span><br><span class="line">  <span class="attr">script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&quot;Deploying artifacts to PROD GCS🚀🚀🚀&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">$CLOUDSDK_AUTH_ACCESS_TOKEN</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">gcloud</span> <span class="string">config</span> <span class="string">set</span> <span class="string">project</span> <span class="string">$&#123;GCP_PROJECT_NAME&#125;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">gcloud</span> <span class="string">storage</span> <span class="string">cp</span> <span class="string">-r</span> <span class="string">$CI_PROJECT_DIR/dist/*</span> <span class="string">gs://my-static-website/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://cloud.google.com/iam/docs/workload-identity-federation">https://cloud.google.com/iam/docs/workload-identity-federation</a></li>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=4vajaXzHN08">https://www.youtube.com/watch?v=4vajaXzHN08</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.google.com/iam/docs/reference/credentials/rest/v1/projects.serviceAccounts/generateAccessToken">GCP IAM generateAccessToken</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.google.com/iam/docs/reference/sts/rest">Security Token Service API</a></li>
<li><a target="_blank" rel="noopener" href="https://ermetic.com/blog/gcp/how-attackers-can-exploit-gcps-multicloud-workload-solution/">Workload 可能的資安風險:How Attackers Can Exploit GCP’s Multicloud Workload Solution</a></li>
<li>OIDC 相關<ul>
<li><a target="_blank" rel="noopener" href="https://hackmd.io/@Burgess/rkjLdxbmU#">OIDC(OpenID Connection)</a></li>
<li><a target="_blank" rel="noopener" href="https://www.ory.sh/docs/oauth2-oidc">Ory - OAuth2 and OpenID Connect</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.gitlab.com/ee/ci/cloud_services/google_cloud/">Gitlab OIDC</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/7175385017479069754?from=search-suggest">一文带你搞懂OAuth2.0</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/7340481613144293395">彻底搞懂OAuth2.0第三方授权免登原理</a></li>
<li><a target="_blank" rel="noopener" href="https://www.technice.com.tw/experience/12520/">認識 OAuth 2.0：一次了解各角色、各類型流程的差異</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.com/@pumudu88/google-oauth2-api-explained-dbb84ff97079">Google Oauth2 API Explained</a></li>
<li><a target="_blank" rel="noopener" href="https://shuninjapan.medium.com/%E6%B7%B1%E5%85%A5%E6%B7%BA%E5%87%BA-openid-connect-%E4%B8%80-8701bbf00958">深入淺出 OpenID Connect (一)</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.com/google-cloud/use-workload-identity-federation-with-another-gcp-project-98dc3b1c236c">Use Workload Identity Federation with another GCP project</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.com/google-cloud/how-does-the-gcp-workload-identity-federation-work-with-github-provider-a9397efd7158">How does the GCP Workload Identity Federation work with Github Provider?</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.com/@derek10cloud/how-to-use-gcp-services-securely-from-aws-with-workload-identity-federation-cc15fd8d7960">How to use GCP services securely from AWS with Workload Identity Federation</a></li>
</ul>
</li>
<li>[實作筆記] Gitlab CI&#x2F;CD 與 GCP 相關文章<ul>
<li><a href="https://blog.marsen.me/2023/04/13/2023/gitlab_ci_and_gcp_vm/">架構全貌</a></li>
<li><a href="https://blog.marsen.me/2023/04/14/2023/gitlab_ci_and_gcp_vm_create_server/">建立 Web Server VM</a></li>
<li><a href="https://blog.marsen.me/2023/04/14/2023/gitlab_ci_and_gcp_vm_cretae_runner/">建立 Gitlab Runner VM</a></li>
<li><a href="https://blog.marsen.me/2023/04/14/2023/gitlab_ci_and_gcp_vm_firewall/">防火牆設定</a></li>
<li><a href="https://blog.marsen.me/2023/04/24/2023/gitlab_ci_and_gcp_vm_account/">Linux User 與資料夾權限</a></li>
<li><a href="https://blog.marsen.me/2023/05/29/2023/gitlab_ci_and_gcp_vm_secret_config/">機敏資料的處理</a></li>
<li><a href="https://blog.marsen.me/2023/11/16/2023/gitlab_ci_error_handle/">錯誤處理</a></li>
<li><a href="https://blog.marsen.me/2024/03/13/2024/gitlab_ci_and_gcp_workload_federation/">Workload Identity Federation</a></li>
<li><a href="https://blog.marsen.me/2024/04/17/2024/gitlab_ci_and_gcp_cloud_run/">Cloud Run</a></li>
</ul>
</li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/03/13/2024/gitlab_ci_and_gcp_workload_federation/" data-id="cmbjaum8h00g32sqcgky7067b" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/03/13/2024/gitlab_ci_and_gcp_workload_federation/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CI-CD/" rel="tag">CI&#x2F;CD</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2024/typing_with_props" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/02/24/2024/typing_with_props/" class="article-date">
  <time datetime="2024-02-24T12:11:01.000Z" itemprop="datePublished">2024-02-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/02/24/2024/typing_with_props/"> [學習筆記] 為前端框架 Component 建立 Props Typing 的幾種方式，以 React 為例</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在開發 React 應用程式時(其它框架其實也適用)，<br>使用 TypeScript 來強制定義 props 是一個常見的做法。<br>然而，有許多不同的方法可以實現這一目標。這篇文章討論了三種主要的方法。</p>
<h2 id="比較"><a href="#比較" class="headerlink" title="比較"></a>比較</h2><h3 id="Inline-Object-Literals"><a href="#Inline-Object-Literals" class="headerlink" title="Inline Object Literals"></a>Inline Object Literals</h3><p>在這個方法中，我們直接在函式的參數位置定義了 props 的型別，如下所示：  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Wrapper</span> = (<span class="params">props: &#123;</span></span><br><span class="line"><span class="params">  children?: ReactNode;</span></span><br><span class="line"><span class="params">&#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;props.children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>優點：快速簡潔。<br>缺點：不太適合長期維護。  </p>
<p>另一種解構的寫法會有更少的字數，<br>它會有一個 <code>&#123;&#125;:&#123;&#125;</code>特殊寫法，前者表示傳入的參數，後者表示要被解構的物件與型別<br>這樣的寫法最主要在 component 當中要使用傳入參數時可以省略 <code>prop.</code> 的語法，<br>但是理解上會不會更困難(對於不熟悉的開發者而言)就見團隊見智了…  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Wrapper</span> = (<span class="params">&#123;</span></span><br><span class="line"><span class="params">  children,</span></span><br><span class="line"><span class="params">&#125;: &#123;</span></span><br><span class="line"><span class="params">  children?: ReactNode;</span></span><br><span class="line"><span class="params">&#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>


<h3 id="Type-Aliases"><a href="#Type-Aliases" class="headerlink" title="Type Aliases"></a>Type Aliases</h3><p>在這個方法中，我們把 props 的型別定義抽取到一個類型別名中：  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">WrapperProps</span> = &#123;</span><br><span class="line">  children?: <span class="title class_">ReactNode</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Wrapper</span> = (<span class="params">props: WrapperProps</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;props.children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>優點：可以在其他文件中重用。<br>缺點：在大型代碼庫中可能會讓 TypeScript 變慢。  </p>
<h3 id="Interfaces"><a href="#Interfaces" class="headerlink" title="Interfaces"></a>Interfaces</h3><p>在這個方法中，我們使用介面來定義 props：  </p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">WrapperProps</span> &#123;</span><br><span class="line">  children?: <span class="title class_">ReactNode</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Wrapper</span> = (<span class="params">props: WrapperProps</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;props.children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>優點：性能較好，在大型代碼庫中表現較好。<br>缺點：需要較多的代碼。  </p>
<h2 id="小結"><a href="#小結" class="headerlink" title="小結"></a>小結</h2><p>儘量使用 interface 會有較好的效能，同時可以共用這些代碼並幫助理解。  </p>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.totaltypescript.com/react-props-typescript">https://www.totaltypescript.com/react-props-typescript</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">Destructuring assignment</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/02/24/2024/typing_with_props/" data-id="cmbjaum8p00h52sqc5imghpvb" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/02/24/2024/typing_with_props/#disqus_thread" class="article-comment-link">留言</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2024/vim_learning_source" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/02/22/2024/vim_learning_source/" class="article-date">
  <time datetime="2024-02-22T06:01:17.000Z" itemprop="datePublished">2024-02-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/02/22/2024/vim_learning_source/"> [學習筆記] Vim 學習資源</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="介紹"><a href="#介紹" class="headerlink" title="介紹"></a>介紹</h2><p>Vim 是一款強大高效的文本編輯器，強調效率和快速操作。<br>學習 Vim 能顯著提升編輯速度和效率，無需滑鼠，節省操作時間。<br>這裡記錄著我的學習資源，提供給未來的我複習使用。</p>
<h2 id="TLDR-Tips"><a href="#TLDR-Tips" class="headerlink" title="TLDR Tips"></a>TLDR Tips</h2><ol>
<li><code>gg</code>：移動到檔案的第一行</li>
<li><code>G</code>：移動到檔案的最後一行</li>
<li><code>gg=G</code>：重新縮排整個檔案</li>
<li><code>gv</code>：重新選取上一次的視覺選取</li>
<li>&#96;&#96; &lt;&#96;：跳到上一次視覺選取的開始</li>
<li>&#96;&#96; &gt;&#96;：跳到上一次視覺選取的結尾</li>
<li><code>^</code>：移動到行的第一個非空白字符</li>
<li><code>g_</code>：移動到行的最後一個非空白字符</li>
<li><code>g_lD</code>：刪除行上的所有尾部空白</li>
<li><code>ea</code>：在當前單字的末尾插入</li>
<li><code>gf</code>：跳到游標下的文件名</li>
<li><code>xp</code>：向前交換字符</li>
<li><code>Xp</code>：向後交換字符</li>
<li><code>yyp</code>：複製當前行</li>
<li><code>yapP</code>：複製當前段落</li>
<li><code>dat</code>：刪除包括標籤在內的 HTML 標籤</li>
<li><code>dit</code>：刪除 HTML 標籤內的內容，但不包括標籤本身</li>
<li><code>w</code>：向右移動一個單字</li>
<li><code>b</code>：向左移動一個單字</li>
<li><code>dd</code>：刪除當前行</li>
<li><code>zc</code>：關閉當前摺疊</li>
<li><code>zo</code>：打開當前摺疊</li>
<li><code>za</code>：切換當前摺疊</li>
<li><code>zi</code>：完全切換摺疊</li>
<li><code>&lt;&lt;</code>：向左移動當前行的縮排</li>
<li><code>&gt;&gt;</code>：向右移動當前行的縮排</li>
<li><code>z=</code>：顯示拼寫更正</li>
<li><code>zg</code>：添加到拼寫字典</li>
<li><code>zw</code>：從拼寫字典中刪除</li>
<li><code>~</code>：切換當前字符的大小寫</li>
<li><code>gUw</code>：將大小寫轉換到單字的末尾（u 用於小寫，~ 用於切換）</li>
<li><code>gUiw</code>：將整個單字轉換為大寫（u 用於小寫，~ 用於切換）</li>
<li><code>gUU</code>：將整行轉換為大寫</li>
<li><code>gu$</code>：將直到行尾的文本轉換為小寫</li>
<li><code>da&quot;</code>：刪除下一個雙引號括起來的字符串</li>
<li><code>+</code>：移動到下一行的第一個非空白字符</li>
<li><code>S</code>：刪除當前行並進入插入模式</li>
<li><code>I</code>：在行的開頭插入</li>
<li><code>ci&quot;</code>：更改下一個雙引號括起來的字符串內容</li>
<li><code>ca&#123;</code>：更改大括號內的內容（也可以試試 [, ( 等）</li>
<li><code>vaw</code>：視覺選取單字</li>
<li><code>dap</code>：刪除整個段落</li>
<li><code>r</code>：替換字符</li>
<li>&#96;&#96;[&#96;：跳轉到上次複製的文本的開始</li>
<li>&#96;&#96;]&#96;：跳轉到上次複製的文本的結尾</li>
<li><code>g;</code>：跳轉到上次更改的位置</li>
<li><code>g,</code>：向前跳轉到更改列表</li>
<li><code>&amp;</code>：在當前行上重複上次的替換</li>
<li><code>g&amp;</code>：在所有行上重複上次的替換</li>
<li><code>ZZ</code>：儲存當前檔案並關閉</li>
</ol>
<h2 id="學習資源"><a href="#學習資源" class="headerlink" title="學習資源"></a>學習資源</h2><p>內建學習工具</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; vimtutor</span><br></pre></td></tr></table></figure>

<ul>
<li><a target="_blank" rel="noopener" href="https://vimtricks.com/p/50-useful-vim-commands/">50 Useful Vim Commands</a></li>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/playlist?list=PLBd8JGCAcUAH56L2CYF7SmWJYKwHQYUDI">影片:即將失傳的古老技藝 Vim — 高見龍</a></li>
<li><a target="_blank" rel="noopener" href="https://kaochenlong.com/2011/12/28/vim-tips/">網站:Vim 的操作小技巧</a></li>
<li><a target="_blank" rel="noopener" href="https://www.vimgolf.com/">Vim Golf</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/02/22/2024/vim_learning_source/" data-id="cmbjaum8q00ha2sqcc1ql5uc0" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/02/22/2024/vim_learning_source/#disqus_thread" class="article-comment-link">留言</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2024/all_about_azure_resource_group" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/01/25/2024/all_about_azure_resource_group/" class="article-date">
  <time datetime="2024-01-25T08:22:17.000Z" itemprop="datePublished">2024-01-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/01/25/2024/all_about_azure_resource_group/"> [實作筆記] 一些關於 Azure Resource Group 的冷知識</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>Resource Group 是 Azure 上比較特別的一個設計，<br>這裡拿來記錄一些知道就知道，不知道就不知道的小事務。</p>
<h2 id="本文"><a href="#本文" class="headerlink" title="本文"></a>本文</h2><h3 id="NetworkWatcherRG"><a href="#NetworkWatcherRG" class="headerlink" title="NetworkWatcherRG"></a>NetworkWatcherRG</h3><ul>
<li><a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-tw/azure/network-watcher/network-watcher-create?tabs=portal#delete-a-network-watcher-in-the-portal">https://learn.microsoft.com/zh-tw/azure/network-watcher/network-watcher-create?tabs=portal#delete-a-network-watcher-in-the-portal</a></li>
</ul>
<blockquote>
<p>注意</p>
<p>當您使用 Azure 入口網站 建立網路監看員實例時：</p>
<p>網路監看員實例的名稱會自動設定為NetworkWatcher_region，其中region會對應至 網路監看員 實例的 Azure 區域。<br>例如，在美國東部區域中啟用的網路監看員名為NetworkWatcher_eastus。<br>網路監看員實例會建立在名為NetworkWatcherRG的資源群組中。 若尚無該資源群組，將會加以建立。</p>
</blockquote>
<h3 id="Azure-DevOps"><a href="#Azure-DevOps" class="headerlink" title="Azure DevOps"></a>Azure DevOps</h3><ul>
<li><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/azure/devops/organizations/billing/set-up-billing-for-your-organization-vs?view=azure-devops">https://learn.microsoft.com/en-us/azure/devops/organizations/billing/set-up-billing-for-your-organization-vs?view=azure-devops</a></li>
</ul>
<p>當我們將 Azure DevOps 的 Billing 綁定之時，<br>會建立一組 <code>VisualStudioOnline-XXXX</code> 的 Resource Group</p>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2024/01/25/2024/all_about_azure_resource_group/" data-id="cmbjaum8300ex2sqc8l34b6eq" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2024/01/25/2024/all_about_azure_resource_group/#disqus_thread" class="article-comment-link">留言</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/4/">← 上一頁</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/31/">31</a><a class="extend next" rel="next" href="/page/6/">下一頁 →</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/06/05/2025/gitlab-cicd-to-registry/"> [實作筆記] 用 GitLab CI/CD 實現自動打 Tag、Build 與 Push Docker Image 到 Registry</a>
          </li>
        
          <li>
            <a href="/2025/06/04/2025/gcp-internal-lb-serivce/"> [實作筆記] GCP Cloud Run 私有化部署：透過 Load Balancer 實現內網存取與 IP 限制</a>
          </li>
        
          <li>
            <a href="/2025/05/24/2025/vim_setting/"> [實作筆記] 我的 Vim 設定</a>
          </li>
        
          <li>
            <a href="/2025/05/17/2025/typescript_error_handle_ways/"> [學習筆記] TypeScript 不同寫法的除錯難易比較</a>
          </li>
        
          <li>
            <a href="/2025/05/09/2025/linux_sudo_no_passwd/"> [實作筆記] Linux NO Password 執行指令</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">彙整</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/06/">六月 2025</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/05/">五月 2025</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/04/">四月 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">三月 2025</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/02/">二月 2025</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/01/">一月 2025</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">十二月 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">十一月 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">十月 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">九月 2024</a><span class="archive-list-count">5</span></li><span id='list_archives2' style='display:none'><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">八月 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">七月 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">六月 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">五月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">四月 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">三月 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">二月 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">一月 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">十二月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">十一月 2023</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">十月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">九月 2023</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">八月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">七月 2023</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">六月 2023</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">五月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">四月 2023</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">三月 2023</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">二月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">一月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">九月 2022</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">八月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">六月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">五月 2022</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">三月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">二月 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">6</span></li></span><span id=''></span><span onclick="var d=document.getElementById('list_archives2'); d.style.display===''?d.style='display:none':d.style=''">toggle...</span></ul>
    </div>
  </div>


  
    <a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-nd/3.0/tw/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/3.0/tw/88x31.png" />
</a>
  <br />
This work is licensed under a 
<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-nd/3.0/tw/">Creative Commons Attribution-NonCommercial-NoDerivs 3.0 Taiwan License</a>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤雲</h3>
    <div class="widget tagcloud">
      <a href="/tags/Net-Framework/" style="font-size: 14.38px;">.Net Framework</a> <a href="/tags/API/" style="font-size: 11.25px;">API</a> <a href="/tags/AWS/" style="font-size: 13.13px;">AWS</a> <a href="/tags/Agile/" style="font-size: 17.5px;">Agile</a> <a href="/tags/CI-CD/" style="font-size: 19.38px;">CI/CD</a> <a href="/tags/Cache/" style="font-size: 10px;">Cache</a> <a href="/tags/Coding-Standard/" style="font-size: 10px;">Coding Standard</a> <a href="/tags/Container/" style="font-size: 11.88px;">Container</a> <a href="/tags/Database/" style="font-size: 12.5px;">Database</a> <a href="/tags/Design-Pattern/" style="font-size: 10.63px;">Design Pattern</a> <a href="/tags/Docker/" style="font-size: 11.88px;">Docker</a> <a href="/tags/Entity-Framework/" style="font-size: 10.63px;">Entity Framework</a> <a href="/tags/Firebase/" style="font-size: 10px;">Firebase</a> <a href="/tags/Git/" style="font-size: 10.63px;">Git</a> <a href="/tags/Golang/" style="font-size: 11.25px;">Golang</a> <a href="/tags/Google/" style="font-size: 11.25px;">Google</a> <a href="/tags/GulpJs/" style="font-size: 10.63px;">GulpJs</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/IIS/" style="font-size: 10px;">IIS</a> <a href="/tags/IO/" style="font-size: 10px;">IO</a> <a href="/tags/Integrated-Testing/" style="font-size: 10px;">Integrated Testing</a> <a href="/tags/Jenkins/" style="font-size: 11.88px;">Jenkins</a> <a href="/tags/Kubernetes/" style="font-size: 10px;">Kubernetes</a> <a href="/tags/Linux/" style="font-size: 10.63px;">Linux</a> <a href="/tags/Mongodb/" style="font-size: 10px;">Mongodb</a> <a href="/tags/MsSQL/" style="font-size: 11.25px;">MsSQL</a> <a href="/tags/MsTest/" style="font-size: 10px;">MsTest</a> <a href="/tags/Mutation-Testing/" style="font-size: 10px;">Mutation Testing</a> <a href="/tags/Nodejs/" style="font-size: 15px;">Nodejs</a> <a href="/tags/OAuth/" style="font-size: 10px;">OAuth</a> <a href="/tags/OOP/" style="font-size: 11.25px;">OOP</a> <a href="/tags/Openshift/" style="font-size: 10.63px;">Openshift</a> <a href="/tags/PowerShell/" style="font-size: 11.25px;">PowerShell</a> <a href="/tags/React/" style="font-size: 11.88px;">React</a> <a href="/tags/Redis/" style="font-size: 10.63px;">Redis</a> <a href="/tags/SQL/" style="font-size: 11.88px;">SQL</a> <a href="/tags/Scrum/" style="font-size: 16.88px;">Scrum</a> <a href="/tags/Shell/" style="font-size: 10.63px;">Shell</a> <a href="/tags/Specflow/" style="font-size: 10px;">Specflow</a> <a href="/tags/StyleCop/" style="font-size: 10px;">StyleCop</a> <a href="/tags/TDD/" style="font-size: 15.63px;">TDD</a> <a href="/tags/Testing/" style="font-size: 13.75px;">Testing</a> <a href="/tags/Thread/" style="font-size: 10.63px;">Thread</a> <a href="/tags/Trello/" style="font-size: 10px;">Trello</a> <a href="/tags/TypeScript/" style="font-size: 13.13px;">TypeScript</a> <a href="/tags/Unit-Testing/" style="font-size: 18.75px;">Unit Testing</a> <a href="/tags/Unix/" style="font-size: 10.63px;">Unix</a> <a href="/tags/Vim/" style="font-size: 10px;">Vim</a> <a href="/tags/Visual-Studio/" style="font-size: 10px;">Visual Studio</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/post/" style="font-size: 10px;">post</a> <a href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" style="font-size: 16.25px;">學習筆記</a> <a href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" style="font-size: 20px;">實作筆記</a> <a href="/tags/%E6%99%82%E9%96%93%E7%AE%A1%E7%90%86/" style="font-size: 10.63px;">時間管理</a> <a href="/tags/%E6%B4%BB%E5%8B%95%E7%AD%86%E8%A8%98/" style="font-size: 12.5px;">活動筆記</a> <a href="/tags/%E7%94%9F%E6%B4%BB%E7%AD%86%E8%A8%98/" style="font-size: 16.25px;">生活筆記</a> <a href="/tags/%E8%A8%98%E9%8C%84/" style="font-size: 11.25px;">記錄</a> <a href="/tags/%E8%B8%A9%E9%9B%B7%E7%AD%86%E8%A8%98/" style="font-size: 15px;">踩雷筆記</a> <a href="/tags/%E9%87%8D%E6%A7%8B/" style="font-size: 11.88px;">重構</a> <a href="/tags/%E9%96%B1%E8%AE%80%E7%AD%86%E8%A8%98/" style="font-size: 18.13px;">閱讀筆記</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Net-Framework/" rel="tag">.Net Framework</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/API/" rel="tag">API</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AWS/" rel="tag">AWS</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Agile/" rel="tag">Agile</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI-CD/" rel="tag">CI&#x2F;CD</a><span class="tag-list-count">24</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cache/" rel="tag">Cache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Coding-Standard/" rel="tag">Coding Standard</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Container/" rel="tag">Container</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/" rel="tag">Database</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design-Pattern/" rel="tag">Design Pattern</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Entity-Framework/" rel="tag">Entity Framework</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Firebase/" rel="tag">Firebase</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Golang/" rel="tag">Golang</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Google/" rel="tag">Google</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GulpJs/" rel="tag">GulpJs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IIS/" rel="tag">IIS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO/" rel="tag">IO</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Integrated-Testing/" rel="tag">Integrated Testing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jenkins/" rel="tag">Jenkins</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kubernetes/" rel="tag">Kubernetes</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mongodb/" rel="tag">Mongodb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MsSQL/" rel="tag">MsSQL</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MsTest/" rel="tag">MsTest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mutation-Testing/" rel="tag">Mutation Testing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nodejs/" rel="tag">Nodejs</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OAuth/" rel="tag">OAuth</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OOP/" rel="tag">OOP</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Openshift/" rel="tag">Openshift</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PowerShell/" rel="tag">PowerShell</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/" rel="tag">SQL</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scrum/" rel="tag">Scrum</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/" rel="tag">Shell</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Specflow/" rel="tag">Specflow</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/StyleCop/" rel="tag">StyleCop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TDD/" rel="tag">TDD</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Testing/" rel="tag">Testing</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thread/" rel="tag">Thread</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Trello/" rel="tag">Trello</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unit-Testing/" rel="tag">Unit Testing</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unix/" rel="tag">Unix</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vim/" rel="tag">Vim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Visual-Studio/" rel="tag">Visual Studio</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/" rel="tag">html</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/post/" rel="tag">post</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" rel="tag">學習筆記</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a><span class="tag-list-count">125</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%99%82%E9%96%93%E7%AE%A1%E7%90%86/" rel="tag">時間管理</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B4%BB%E5%8B%95%E7%AD%86%E8%A8%98/" rel="tag">活動筆記</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E7%AD%86%E8%A8%98/" rel="tag">生活筆記</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A8%98%E9%8C%84/" rel="tag">記錄</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B8%A9%E9%9B%B7%E7%AD%86%E8%A8%98/" rel="tag">踩雷筆記</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%87%8D%E6%A7%8B/" rel="tag">重構</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%96%B1%E8%AE%80%E7%AD%86%E8%A8%98/" rel="tag">閱讀筆記</a><span class="tag-list-count">15</span></li></ul>
    </div>
  </div>


  
    

  
    <div class="widget-wrap">
    <h3 class="widget-title">多語系</h3>
    <div class="widget">
        <div id="ytWidget"></div>
    </div>
</div>
<script src="https://translate.yandex.net/website-widget/v1/widget.js?widgetId=ytWidget&pageLang=zh&widgetTheme=dark&autoMode=false" type="text/javascript"></script>
  
    <div class="widget-wrap">
    <h3 class="widget-title">BADGES</h3>
    <div class="widget">
        <a target="_blank" rel="noopener" href="https://bcert.me/bc/html/show-badge.html?b=uufxvngl">
            <img src="/images/2018/csm/seal-csm.png" alt="Certified ScrumMaster®">
        </a>
    </div>
</div>
  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2025 Marsen L.<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

  
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css">

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>



<script src="/js/sayings.js?v=0.js"></script>
  

<script src="/js/script.js?v=0.js"></script>

<div id="likecoin">
Please enable JavaScript to view the LikeCoin. :P
</div>
<script>

  (function(){
    var ifrm = document.createElement("iframe");
    ifrm.setAttribute("src", "https://button.like.co/in/embed/marsenlin/button?referrer=undefined");      
    ifrm.setAttribute("sandbox","allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox");
    ifrm.frameborder = "0";
    ifrm.scrolling = "no";
    (document.getElementById("likecoin").replaceChild(ifrm, document.getElementById("likecoin").childNodes[0]));
  })();

</script>
<script>

  var disqus_shortname = 'marsenlin';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();

</script>

  </div>
    
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NTDGNJZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

</body>
</html>