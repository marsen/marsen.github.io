<!DOCTYPE html>
<html>
<head>
  
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NTDGNJZ');</script>
<!-- End Google Tag Manager -->

  
<!-- Google Analytics -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RF47NNRE5G"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RF47NNRE5G');
</script>
<!-- End Google Analytics -->

  
<!-- Google AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1885096025224905"
     crossorigin="anonymous"></script>
<!-- End Google AdSense -->



  <meta charset="utf-8">
  
  <title>Marsen&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Marsen&#39;s Blog">
<meta property="og:url" content="https://blog.marsen.me/page/9/index.html">
<meta property="og:site_name" content="Marsen&#39;s Blog">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Marsen L.">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Marsen&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
      
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300&display=swap" rel="stylesheet">
  
  
<link rel="stylesheet" href="/css/style.css">

  <meta property ="og:image" content="https://avatars1.githubusercontent.com/u/4269720?s=460&v=4" /> 
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="blog-banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Marsen&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle"></a>
          <div>
          <span style="width: 20px; height: 10px; background: linear-gradient(to bottom, #005BBB 50%, #FFD700 50%); text-align: center; color: white; font-size: 6px; font-weight: bold; line-height: 100px;">
            #StandWithUkraine
          </span>
          </div>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜尋"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.marsen.me"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2022/golang_12factor_config_with_viper" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/07/19/2022/golang_12factor_config_with_viper/" class="article-date">
  <time datetime="2022-07-19T10:00:08.000Z" itemprop="datePublished">2022-07-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/07/19/2022/golang_12factor_config_with_viper/"> [實作筆記] 12-Factor Config 使用 Golang (with Viper) I</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>最近在開發需要以微服務的形式部署在雲端之上的 web service，<br>為此，被要求需符合雲原生的 <a target="_blank" rel="noopener" href="https://www.12factor.net/">12 Factory</a>，<br>在本篇只討論第三點 Config - Store config in the environment,<br>簡單介紹一下這個因子;</p>
<p>組態應與程式分離<br>簡單的問自已程式是否可以立即開源，而不擔心洩露任何機敏資料??</p>
<p>先說明一些非微服務的組態設定實踐方式:</p>
<h3 id="將組態設定以常數寫在程式當中"><a href="#將組態設定以常數寫在程式當中" class="headerlink" title="將組態設定以常數寫在程式當中"></a>將組態設定以常數寫在程式當中</h3><blockquote>
<p>最糟糕的實踐，你永遠不該在一個產品中這樣作<br>每次改變一個環境，就要修改程式，這會使得你的服務變得脆弱</p>
</blockquote>
<h3 id="使用不同環境的組態檔，但是不納入版本控制"><a href="#使用不同環境的組態檔，但是不納入版本控制" class="headerlink" title="使用不同環境的組態檔，但是不納入版本控制"></a>使用不同環境的組態檔，但是不納入版本控制</h3><blockquote>
<p>這是個常見的實踐，但是有著以下的缺點</p>
<ol>
<li>開發人員將組態檔簽入版控(如果是 Git 應該可以透過 .gitignore 避免這些狀況)</li>
<li>配置文件很有可能分散在不同的位置，依照你所使用的語言或框架很有可能會有不同的格式(xml、yaml、json 等等…)<br>這導致統一管理與維護的困難，特別是在擴展的時候。</li>
</ol>
<blockquote>
<p>以前在開發單體服務的時候，一個組態會達上千個設定值，<br>而在擴展時，開發者永遠無法理解這上千個組態應該填入什麼值<br>這有點超出主題了，但是微服務的架構下，單一服務不應該有上千個組態設定</p>
</blockquote>
<p>有時候我們的環境不止有 <code>Prod</code>、<code>QA</code>、<code>Staging</code><br>比如說開發環境、多國&#x2F;語系&#x2F;開發人員、壓測，<br>都可能導致環境組態檔案數量爆增，而難以維護。</p>
</blockquote>
<h2 id="問題-12-Factor-與開發環境"><a href="#問題-12-Factor-與開發環境" class="headerlink" title="問題 12-Factor 與開發環境"></a>問題 12-Factor 與開發環境</h2><p>12-Factor 推薦的方式是，使用環境變數來避免上述的問題。<br>但在開發環境上這不是很理想的方式</p>
<p>對於新進的開發者:<br>需要自行加上環境變數，而不是下載程式後即可使用，會形成一種門檻</p>
<p>可以提供 script 或 bash 讓開發者執行後寫入環境變數<br>但很可能變成一個灰盒子(一次性執行的 script，只有需要編輯時才去會細看)，<br>而且新增、刪除、修改組態都要修改 script，而產生額外的工作</p>
<p>開發者很可能同時開發多個不同服務，<br>這樣如果發生變數的命名衝突會難以解決。</p>
<blockquote>
<p>生產環境(Prod、QA、Staging)不會有這樣的問題，<br>因為微服務的一個單體(Pod)應該都是單純的<br>加上服務名的前綴或許可以解決開發環境的問題，<br>但是會讓<strong>變數名變得相對冗長</strong></p>
</blockquote>
<h2 id="解決方式"><a href="#解決方式" class="headerlink" title="解決方式"></a>解決方式</h2><ol>
<li>提供<code>development.env</code>作為開發者的組態檔</li>
<li>程式會優先讀取<strong>環境變數</strong>的值，才會讀取<code>development.env</code>的值</li>
</ol>
<p>Golang 的實作如下:<br>我們使用 <code>viper</code> package，viper 本身包含一定的順序規則去讀取組態，如下:</p>
<ul>
<li>explicit call to Set 顯示設定</li>
<li>flag 命令提示字元參數</li>
<li>env 環境變數</li>
<li>config 設定檔</li>
<li>key&#x2F;value store 遠端儲存</li>
<li>default 默認值</li>
</ul>
<p>程式如下，先讀取設定檔或環境變數的順序並沒有差，<br><strong>因為 Viper 已經提供這樣功能實踐(env 環境變數優先於 config 設定檔)</strong></p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> instance *Config</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Load</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// new viper</span></span><br><span class="line">  vp := viper.New()</span><br><span class="line">  <span class="comment">// just for development environment</span></span><br><span class="line">  vp.SetConfigName(<span class="string">&quot;development.env&quot;</span>)</span><br><span class="line">  vp.SetConfigType(<span class="string">&quot;env&quot;</span>)</span><br><span class="line">  vp.AddConfigPath(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">  vp.ReadInConfig()</span><br><span class="line">  <span class="comment">// follow 12 factors principles https://www.12factor.net/config</span></span><br><span class="line">  vp.AutomaticEnv()</span><br><span class="line">  <span class="comment">// bind to struct</span></span><br><span class="line">  vp.Unmarshal(&amp;instance)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>struct</code> 與 <code>development.env</code> ，純量或是巢狀結構都可以支援，<br>見以下的程式 <code>Config</code> 內部包含另一個 struct <code>NestConfig</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Config <span class="keyword">struct</span> &#123;</span><br><span class="line">  Port <span class="type">string</span>     <span class="string">`env:&quot;PORT&quot;`</span></span><br><span class="line">  Nest NestConfig <span class="string">`env:&quot;NestConfig&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> NestConfig <span class="keyword">struct</span> &#123;</span><br><span class="line">  MarsenNo   <span class="type">int</span>  <span class="string">`env:&quot;MarsenNo&quot;`</span></span><br><span class="line">  MarsenFlag <span class="type">bool</span> <span class="string">`env:&quot;MarsenFlag&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>development.env</code>範例如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Port=9009</span><br><span class="line">Nest.MarsenNo=1231456</span><br><span class="line">Nest.MarsenFlag=1</span><br></pre></td></tr></table></figure>

<p>Config 的使用：<br>這裡用了 singleton 的方法實作，有查看了一些<a target="_blank" rel="noopener" href="https://blog.kennycoder.io/2021/08/22/Golang-Singleton-%E5%AF%A6%E7%8F%BE%E6%96%B9%E5%BC%8F%E6%8E%A2%E8%A8%8E/">文章</a>可能會有問題，未來可能會再調整</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> instance *Config</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Of</span><span class="params">()</span></span> *Config &#123;</span><br><span class="line">  <span class="keyword">if</span> instance == <span class="literal">nil</span> &#123;</span><br><span class="line">    Load()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> instance</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://gist.github.com/marsen/592d7aa1da912beffaad1e1f0c47b086#file-config-go">完整代碼可以見此</a></strong></p>
<h3 id="未解之問題"><a href="#未解之問題" class="headerlink" title="未解之問題"></a>未解之問題</h3><p>提供給開發者使用的組態，仍有機敏資料進版的疑慮?<br>考慮使用 <a target="_blank" rel="noopener" href="https://www.consul.io/">Consul</a> ???<br>或是改成 docker image 並在其中寫入環境變數 ???</p>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.12factor.net/config">III. Config - Store config in the environment</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/spf13/viper#why-viper">Viper</a><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/utain/go-12factor-example">GO 12factor Example (Web Service)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/devilsray/golang-viper-config-example">Golang Viper Config Example</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.wu-boy.com/2017/10/go-configuration-with-viper/">在 Go 語言使用 Viper 管理設定檔</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.logrocket.com/handling-go-configuration-viper/">Handling Go configuration with Viper</a></li>
<li><a target="_blank" rel="noopener" href="https://dev.to/techschoolguru/load-config-from-file-environment-variables-in-golang-with-viper-2j2d">Load config from file &amp; environment variables in Golang with Viper</a></li>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=r9Qvr40H4eE">Go Application Configuration with Viper | Config with JSON</a></li>
<li><a target="_blank" rel="noopener" href="https://www.readfog.com/a/1632554002629627904">Golang 的配置信息處理框架 Viper</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://blog.kennycoder.io/2021/08/22/Golang-Singleton-%E5%AF%A6%E7%8F%BE%E6%96%B9%E5%BC%8F%E6%8E%A2%E8%A8%8E/">Golang - Singleton 實現方式探討</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/07/19/2022/golang_12factor_config_with_viper/" data-id="cm1olstqq00ag2srvg6jt0va8" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/07/19/2022/golang_12factor_config_with_viper/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Golang/" rel="tag">Golang</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2022/learn_go_with_tests_reflection" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/06/27/2022/learn_go_with_tests_reflection/" class="article-date">
  <time datetime="2022-06-27T04:16:20.000Z" itemprop="datePublished">2022-06-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/06/27/2022/learn_go_with_tests_reflection/"> [閱讀筆記] Learn Go with tests</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>在學習 Go 的過程中偶然發現的資源，<br>作者提供了一種有效學習新的語言(Go)的方法—測試。<br>我很認同這個想法，作者的文章簡單易懂，配合上測試案例，很快就能掌握 Go 語言的幾大特性，<br>同時你也會了測試，很酷的是，Golang 本身的測試語法就很好用，除了 Mocking 那個部份需引入外部資源外，<br>其它就內建其中了，也就是說你不會像 C# 需要面對選擇的障礙(MsTest、NUnit、XUnit)，<br>同時網路上已經有簡體中文的資源(就像它們的文字一樣有些許殘缺，但對英文不夠好的人也是個福音了)</p>
<h2 id="測試心法"><a href="#測試心法" class="headerlink" title="測試心法"></a>測試心法</h2><h3 id="Mocking-是萬惡之源嗎"><a href="#Mocking-是萬惡之源嗎" class="headerlink" title="Mocking 是萬惡之源嗎?"></a>Mocking 是萬惡之源嗎?</h3><p>通常，如果你的程式需要大量 mocking 這隱含著錯誤的抽象。<br>而背後代表的意義是你正在作糟糕的設計。</p>
<blockquote>
<p>What people see here is a weakness in TDD but it is actually a strength,<br>more often than not poor test code is a result of bad design or put more nicely,<br>well-designed code is easy to test.</p>
</blockquote>
<h4 id="測試的壞味道與方針"><a href="#測試的壞味道與方針" class="headerlink" title="測試的壞味道與方針"></a>測試的壞味道與方針</h4><p>如果你的測試變得複雜，或是需要 Mocking 需多依賴，這一種壞味道，<br>可能是你的模組負擔太多的事情，試著去切分它。(注:沒切或切太塊，一個模組要運作要 mocking 數 10 個相依)<br>或是依賴關係變得太細緻，試著將適當的模組作分類(注:切太細，a 依賴 b、b 依賴 c……一路 mocking 到天涯海角)<br>或是太注重細節，應專注於行為而不是功能的實現(注:太注重細節會變成整合測試，需要完成的功能實現)</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- The thing you are testing is having to do too many things (because it has too many dependencies to mock)</span><br><span class="line">  - Break the module apart so it does less</span><br><span class="line">- Its dependencies are too fine-grained</span><br><span class="line">  - Think about how you can consolidate some of these dependencies into one meaningful module</span><br><span class="line">- Your test is too concerned with implementation details</span><br><span class="line"> - Favour testing expected behaviour rather than the implementation</span><br></pre></td></tr></table></figure>

<h3 id="傳說中-KentBeck-大叔說的過的話"><a href="#傳說中-KentBeck-大叔說的過的話" class="headerlink" title="傳說中 KentBeck 大叔說的過的話"></a>傳說中 KentBeck 大叔說的過的話</h3><blockquote>
<p>Make It Work Make It Right Make It Fast</p>
</blockquote>
<p>在本書中 <code>work</code> 意謂通過測試，<code>right</code> 是指重構代碼使意圖明顯好懂，最後 <code>fast</code> 才是優化效能。<br>如果沒有 <code>work</code> 與 <code>right</code> 之前是無法變 <code>fast</code> 的</p>
<h2 id="章節-reflection-的重構步驟"><a href="#章節-reflection-的重構步驟" class="headerlink" title="章節 reflection 的重構步驟"></a>章節 reflection 的重構步驟</h2><p>參考章節 reflection，當完成 slice 的 test case 時候，<br>程式已經變得相當<a target="_blank" rel="noopener" href="https://quii.gitbook.io/learn-go-with-tests/go-fundamentals/reflection#write-enough-code-to-make-it-pass-6">噁心</a>，</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">walk</span><span class="params">(x <span class="keyword">interface</span>&#123;&#125;, fn <span class="keyword">func</span>(input <span class="type">string</span>)</span></span>) &#123;</span><br><span class="line"> val := getValue(x)</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> val.Kind() == reflect.Slice &#123;</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; val.Len(); i++ &#123;</span><br><span class="line">   walk(val.Index(i).Interface(), fn)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; val.NumField(); i++ &#123;</span><br><span class="line">  field := val.Field(i)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span> field.Kind() &#123;</span><br><span class="line">  <span class="keyword">case</span> reflect.String:</span><br><span class="line">   fn(field.String())</span><br><span class="line">  <span class="keyword">case</span> reflect.Struct:</span><br><span class="line">   walk(field.Interface(), fn)</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我來探討一下重構的思路，不然書中的重構步驟(對我來說)太快了，無法掌握變化的過程。<br>首先，我們有一個前提是每個步驟完成都要跑測試，並全數通過才行。<br>除了 Production Code 我們不會異動測試的任何程式碼。</p>
<h3 id="消除-return"><a href="#消除-return" class="headerlink" title="消除 return"></a>消除 return</h3><p>這一步應該不難理解，我們用 switch 語法取代 if return 的寫法<br>這樣讓我們的程式更有整體性，而不是被 if return 切分成兩個區塊<br>但是這樣又產生了新的壞味道，巢狀 switch<br>如下:</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">walk</span><span class="params">(x <span class="keyword">interface</span>&#123;&#125;, fn <span class="keyword">func</span>(input <span class="type">string</span>)</span></span>) &#123;</span><br><span class="line"> val := getValue(x)</span><br><span class="line"> <span class="keyword">switch</span> val.Kind() &#123;</span><br><span class="line"> <span class="keyword">case</span> reflect.Slice:</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; val.Len(); i++ &#123;</span><br><span class="line">   walk(val.Index(i).Interface(), fn)</span><br><span class="line">  &#125;</span><br><span class="line"> <span class="keyword">default</span>:</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; val.NumField(); i++ &#123;</span><br><span class="line"></span><br><span class="line">   field := val.Field(i)</span><br><span class="line">   <span class="keyword">switch</span> field.Kind() &#123;</span><br><span class="line">   <span class="keyword">case</span> reflect.String:</span><br><span class="line">    fn(field.String())</span><br><span class="line">   <span class="keyword">case</span> reflect.Struct:</span><br><span class="line">    walk(field.Interface(), fn)</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="巢狀-switch"><a href="#巢狀-switch" class="headerlink" title="巢狀 switch"></a>巢狀 switch</h3><p>先來看一下這個巢狀 switch 的條件判斷為何?<br>我們可以發現兩個 switch 最終都是在對 <code>.Kind()</code> 作判斷，<br>這帶來了可能性，<br>我們可以把內層 switch 的處理往上提昇<br>下層使用遞迴呼叫 <code>walk(...</code> 如果內層的 case 都被提昇至上層，<br>那麼內層的 switch 就可以被剝離</p>
<h3 id="巢狀-switch-case-reflect-String"><a href="#巢狀-switch-case-reflect-String" class="headerlink" title="巢狀 switch : case reflect.String"></a>巢狀 switch : <code>case reflect.String</code></h3><p>先把 <code>case reflect.String:</code> 往上層提昇<br>內層保留 case ，但改呼叫遞迴，執行測試，全部通過</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">walk</span><span class="params">(x <span class="keyword">interface</span>&#123;&#125;, fn <span class="keyword">func</span>(input <span class="type">string</span>)</span></span>) &#123;</span><br><span class="line"> val := getValue(x)</span><br><span class="line"> <span class="keyword">switch</span> val.Kind() &#123;</span><br><span class="line"> <span class="keyword">case</span> reflect.Slice:</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; val.Len(); i++ &#123;</span><br><span class="line">   walk(val.Index(i).Interface(), fn)</span><br><span class="line">  &#125;</span><br><span class="line"> <span class="keyword">case</span> reflect.String:</span><br><span class="line">  fn(val.String())</span><br><span class="line"> <span class="keyword">default</span>:</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; val.NumField(); i++ &#123;</span><br><span class="line"></span><br><span class="line">   field := val.Field(i)</span><br><span class="line">   <span class="keyword">switch</span> field.Kind() &#123;</span><br><span class="line">   <span class="keyword">case</span> reflect.String:</span><br><span class="line">    walk(field.Interface(), fn)</span><br><span class="line">   <span class="keyword">case</span> reflect.Struct:</span><br><span class="line">    walk(field.Interface(), fn)</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="巢狀-switch-消除重複"><a href="#巢狀-switch-消除重複" class="headerlink" title="巢狀 switch 消除重複"></a>巢狀 switch 消除重複</h3><p>在本篇我只對內層的 switch 進行重構，<br>下面我只展示內層的 switch。<br>兩個問題，</p>
<ol>
<li>case 重複（這是我們刻意製造出來的）→ 所以要消重複</li>
<li>消除重複後，參數 field 就變得有點多餘，我們可以用 inline 的手法消除</li>
</ol>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">field := val.Field(i)</span><br><span class="line"><span class="keyword">switch</span> field.Kind() &#123;</span><br><span class="line"><span class="keyword">case</span> reflect.String:</span><br><span class="line"> walk(field.Interface(), fn)</span><br><span class="line"><span class="keyword">case</span> reflect.Struct:</span><br><span class="line"> walk(field.Interface(), fn)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>測試通過後，我們的內層 switch 就會變成這樣</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> val.Field(i).Kind() &#123;</span><br><span class="line"><span class="keyword">case</span> reflect.String, reflect.Struct:</span><br><span class="line"> walk(val.Field(i).Interface(), fn)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="巢狀-switch-default-case"><a href="#巢狀-switch-default-case" class="headerlink" title="巢狀 switch default case"></a>巢狀 switch default case</h4><p>這個時候我們看整體的程式碼，會發現一個怪異的現象，<br>外層的 default 值會直接視作存在多個 Field 進行遞迴拆解 <code>for i := 0; i &lt; val.NumField(); i++ &#123;</code><br>內層的 switch 語法只有一個 case 同時處理 <code>reflect.Struct</code> 與 <code>reflect.String</code> 兩種條件，<br>以邏輯來說，外層的 default 只會處理 <code>reflect.Struct</code> 其它的資料型態都不處理，<br>而 <code>reflect.String</code> 在同層的 switch 其它條件被處理掉了<br>所以我們可以把 default 的區段改寫如下，執行測試，通過</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> reflect.Struct:</span><br><span class="line"> <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; val.NumField(); i++ &#123;</span><br><span class="line">  <span class="keyword">switch</span> val.Field(i).Kind() &#123;</span><br><span class="line">  <span class="comment">//case reflect.String, reflect.Struct://這個寫法也可以</span></span><br><span class="line">  <span class="keyword">default</span>:<span class="comment">//這個寫法比較有交換率的等價概念</span></span><br><span class="line">   walk(val.Field(i).Interface(), fn)</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>這時候內層的 switch 就變得相當的多餘，可以整個拿掉。<br>執行測試，通過。<br>最後的程式重構就會與書上的一致，十分雅緻</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">walk</span><span class="params">(x <span class="keyword">interface</span>&#123;&#125;, fn <span class="keyword">func</span>(input <span class="type">string</span>)</span></span>) &#123;</span><br><span class="line"> val := getValue(x)</span><br><span class="line"> <span class="keyword">switch</span> val.Kind() &#123;</span><br><span class="line"> <span class="keyword">case</span> reflect.String:</span><br><span class="line">  fn(val.String())</span><br><span class="line"> <span class="keyword">case</span> reflect.Slice:</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; val.Len(); i++ &#123;</span><br><span class="line">   walk(val.Index(i).Interface(), fn)</span><br><span class="line">  &#125;</span><br><span class="line"> <span class="keyword">case</span> reflect.Struct:</span><br><span class="line">  <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; val.NumField(); i++ &#123;</span><br><span class="line">   walk(val.Field(i).Interface(), fn)</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/quii/learn-go-with-tests">https://github.com/quii/learn-go-with-tests</a></li>
<li><a target="_blank" rel="noopener" href="https://studygolang.gitbook.io/learn-go-with-tests/">https://studygolang.gitbook.io/learn-go-with-tests/</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/06/27/2022/learn_go_with_tests_reflection/" data-id="cm1olstqu00b32srv9nt4ggx6" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/06/27/2022/learn_go_with_tests_reflection/#disqus_thread" class="article-comment-link">留言</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2022/error_dotnet_core_at_gke_with_grpc.core" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/06/09/2022/error_dotnet_core_at_gke_with_grpc.core/" class="article-date">
  <time datetime="2022-06-09T08:37:53.000Z" itemprop="datePublished">2022-06-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/06/09/2022/error_dotnet_core_at_gke_with_grpc.core/"> [實作筆記] 錯誤處理 dotnet core @ GKE logger </a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="問題"><a href="#問題" class="headerlink" title="問題"></a>問題</h2><p>為了追蹤 Dotnet Core 專案上的 log ，<br>參考<a target="_blank" rel="noopener" href="https://cloud.google.com/dotnet/docs/reference/Google.Cloud.Diagnostics.AspNetCore3/latest">這篇</a>文章進行了設定，<br>沒想到在 GKE 上啟動服務時，會產生錯誤，導致服務啟動異常</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">system.io.ioexception:</span><br><span class="line">error loading native library &quot;/app/runtimes/linux-x64/native/libgrpc_csharp_ext.x64.so&quot;.</span><br><span class="line">error loading shared library ld-linux-x86-64.so.2:</span><br><span class="line">no such file or directory (needed by /app/runtimes/linux-x64/native/libgrpc_csharp_ext.x64.so)</span><br></pre></td></tr></table></figure>

<h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p>看起來是專案啟動之時，會需要底層的 <code>libgrpc_csharp_ext.x64.so</code> 檔案。<br><a target="_blank" rel="noopener" href="https://github.com/grpc/grpc/issues/21446#issuecomment-1067926001">tl;dr</a><br>簡而言之，我使用的 docker image <code>mcr.microsoft.com/dotnet/aspnet:6.0-alpine</code>，<br>裡面沒有包 Grpc.Core ，但是 Grpc.Core 壞壞要被 grpc-dotnet 汰換(<a target="_blank" rel="noopener" href="https://grpc.io/blog/grpc-csharp-future/?ref=https://githubhelp.com">tl;dr</a>)<br>所以要嘛你自已在 alpine image 自已裝上 <code>libgrpc_csharp_ext.x64.so</code>，<br>或是使用一個不公開的 image <a target="_blank" rel="noopener" href="https://github.com/grpc/grpc/issues/21446#issuecomment-998966196">版本</a>，<br>ex:<code>6.0.1-cbl-mariner1.0-distroless-amd64</code><br>這些不公開的版本可以在<a target="_blank" rel="noopener" href="https://mcr.microsoft.com/v2/dotnet/aspnet/tags/list">這裡查到喔</a></p>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/grpc/grpc/issues/21446">https://github.com/grpc/grpc/issues/21446</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/06/09/2022/error_dotnet_core_at_gke_with_grpc.core/" data-id="cm1olstqo00a92srvauuc8nxg" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/06/09/2022/error_dotnet_core_at_gke_with_grpc.core/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2022/the_gcp_auth_plugin_is_deprecated" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/06/08/2022/the_gcp_auth_plugin_is_deprecated/" class="article-date">
  <time datetime="2022-06-08T07:53:51.000Z" itemprop="datePublished">2022-06-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/06/08/2022/the_gcp_auth_plugin_is_deprecated/"> [實作筆記] 錯誤處理 the gcp auth plugin is deprecated </a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>環境 Mac OS，<br>安裝了<br>Docker daemon 版本 4.8.2(79419)<br>gcloud<br>版本資訊如下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gcloud --version</span><br><span class="line">Google Cloud SDK 389.0.0</span><br><span class="line">beta 2022.06.03</span><br><span class="line">bq 2.0.74</span><br><span class="line">core 2022.06.03</span><br></pre></td></tr></table></figure>

<p>執行以下指令時</p>
<blockquote>
<p>❯ kubectl -n qa get secret deposit-secret -o json</p>
</blockquote>
<p>會出現以下的警告訊息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">W0608 15:50:50.291340   13396 gcp.go:120] WARNING: the gcp auth plugin is deprecated in v1.22+, unavailable in v1.25+; use gcloud instead.</span><br><span class="line">To learn more, consult https://cloud.google.com/blog/products/containers-kubernetes/kubectl-auth-changes-in-gke</span><br></pre></td></tr></table></figure>

<h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p>在安裝 Docker 時，會同時安裝上 <code>kubectl</code>，<br>我們可以用以下的指令作查詢，</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">❯ where kubectl</span><br><span class="line">/usr/local/bin/kubectl</span><br></pre></td></tr></table></figure>

<p>這個時候我們可以看看<a target="_blank" rel="noopener" href="https://cloud.google.com/blog/products/containers-kubernetes/kubectl-auth-changes-in-gke">這篇</a>,<br>簡而言之，就是在 kubectl v1.25 版本後，<br>對授權的處理作了一點變化，改用 plugin 處理。<br>所以當使用舊版本( &lt; v1.25 版)時會出示警告</p>
<h2 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h2><p>兩個步驟<br>移除原有的 kubectl 並透過 gcloud 安裝新版本的 kubectl</p>
<h3 id="移除-kubectl-的-link"><a href="#移除-kubectl-的-link" class="headerlink" title="移除 kubectl 的 link"></a>移除 kubectl 的 link</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm kubectl</span><br></pre></td></tr></table></figure>

<p>這是在安裝 Docker 時產生的。<br>如果你想查看 link 的資訊，可以在移除前用以下指令切換到系統目錄</p>
<blockquote>
<p>❯ cd &#x2F;usr&#x2F;local&#x2F;bin</p>
</blockquote>
<p>再透過 <code>ll</code> 檢視細節，大概的回應如下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">❯ ll</span><br><span class="line">total 412936</span><br><span class="line">...略</span><br><span class="line">lrwxr-xr-x  1 root  wheel    55B  6  8 15:45 kubectl -&gt; /Applications/Docker.app/Contents/</span><br><span class="line">...略</span><br></pre></td></tr></table></figure>

<h2 id="gcloud-安裝-kubectl"><a href="#gcloud-安裝-kubectl" class="headerlink" title="gcloud 安裝 kubectl"></a>gcloud 安裝 kubectl</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcloud components install kubectl</span><br></pre></td></tr></table></figure>

<p>出現以下訊息再按 y</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Your current Google Cloud CLI version is: 389.0.0</span><br><span class="line">Installing components from version: 389.0.0</span><br><span class="line"></span><br><span class="line">┌──────────────────────────────────────────────────────────────────┐</span><br><span class="line">│               These components will be installed.                │</span><br><span class="line">├─────────────────────┬─────────────────────┬──────────────────────┤</span><br><span class="line">│         Name        │       Version       │         Size         │</span><br><span class="line">├─────────────────────┼─────────────────────┼──────────────────────┤</span><br><span class="line">│ kubectl             │              1.22.9 │             65.2 MiB │</span><br><span class="line">│ kubectl             │              1.22.9 │              &lt; 1 MiB │</span><br><span class="line">└─────────────────────┴─────────────────────┴──────────────────────┘</span><br><span class="line"></span><br><span class="line">For the latest full release notes, please visit:</span><br><span class="line">  https://cloud.google.com/sdk/release_notes</span><br><span class="line"></span><br><span class="line">Do you want to continue (Y/n)?  y</span><br></pre></td></tr></table></figure>

<p>再次執行 kubectl 相關的指令就不會噴錯了</p>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/53597361/there-are-older-versions-of-google-cloud-platform-tools-docker">There are older versions of Google Cloud Platform tools: Docker</a></li>
<li><a target="_blank" rel="noopener" href="https://cloud.google.com/blog/products/containers-kubernetes/kubectl-auth-changes-in-gke">Here’s what to know about changes to kubectl authentication coming in GKE v1.25</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/06/08/2022/the_gcp_auth_plugin_is_deprecated/" data-id="cm1olstqz00bk2srv4lhp49aq" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/06/08/2022/the_gcp_auth_plugin_is_deprecated/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2022/contributed_MSDN" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/05/26/2022/contributed_MSDN/" class="article-date">
  <time datetime="2022-05-26T12:51:33.000Z" itemprop="datePublished">2022-05-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/05/26/2022/contributed_MSDN/"> [實作筆記] 貢獻微軟文件 MSDN 記錄</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h2><p>專案上我使用 .net core 並且有需要使用到 Config 相關的設定，<br>在看文件時不小心，查錯了文件(查到了<a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/dotnet/api/system.configuration.contextinformation.getsection?view=dotnet-plat-ext-6.0">這一篇 ContextInformation.GetSection(String) Method</a>)。</p>
<p>這裡寫到 configuration section 是區分大小寫的(case-sensitive)</p>
<blockquote>
<h2 id="Remarks"><a href="#Remarks" class="headerlink" title="Remarks"></a>Remarks</h2><p>When specifying a section within the configuration,<br>note that the name of the configuration section is <strong>case-sensitive</strong>.</p>
</blockquote>
<p>而我實測時，才發現並沒有區分大小寫，才注意到我<strong>查錯了文件</strong>。</p>
<h2 id="起念"><a href="#起念" class="headerlink" title="起念"></a>起念</h2><p>進一步我去微軟 MSDN 找到正確的文件查詢 <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/dotnet/api/microsoft.extensions.configuration.configurationmanager.getsection?view=dotnet-plat-ext-6.0"><code>ConfigurationManager.GetSection</code></a>，發現並沒有註明是否區分大小寫。</p>
<p>所以我就想<del>解</del>貢獻一下<del>成就</del>一之已力，<br>幫微軟加上說明，並好奇多久可以將修改的文件上線</p>
<h2 id="歷程"><a href="#歷程" class="headerlink" title="歷程"></a>歷程</h2><p>首先只要點選右上角的鉛筆圖示，就可以連線至 <a target="_blank" rel="noopener" href="https://github.com/dotnet/dotnet-api-docs/blob/main/xml/Microsoft.Extensions.Configuration/ConfigurationManager.xml">Github</a> 頁面，<br>很快的我完成了修改並且發出了 <a target="_blank" rel="noopener" href="https://github.com/dotnet/dotnet-api-docs/pull/8064">Pull Request</a> 。<br>發出後很快就有自動化的機器人 dotnet-issue-labeler 與 opbld33 進行審查。</p>
<p>接下來有人工審核，<a target="_blank" rel="noopener" href="https://github.com/gewarren">Gewarren</a> 很友善的給我一些建議，<br>大概就在我發出 PR 的幾個小時內，不過我自已的動作沒那麼快，<br>我過了 5 天才發現，並依照建議完成了修改(我想他們應該有一些文件修改的 Guide Line)，<br>修改完後送出，一樣會有自動化審核，Gewarren approve 後，再有 3 個自動化的檢查，</p>
<ul>
<li>snippets-build</li>
<li>OpenPublishing.Build Validation status: passed</li>
<li>license&#x2F;cla All CLA requirements met.</li>
</ul>
<p>接下來就 merged，這是 2022&#x2F;05&#x2F;17 ，不知道多久才會更新文件。</p>
<h2 id="結尾"><a href="#結尾" class="headerlink" title="結尾"></a>結尾</h2><p>2022&#x2F;05&#x2F;23 我已經在微軟官方文件見到更新，小小成就達成 🎉</p>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/05/26/2022/contributed_MSDN/" data-id="cm1olstqn00a12srvhbkf79sb" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/05/26/2022/contributed_MSDN/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2022/penetration_test" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/05/24/2022/penetration_test/" class="article-date">
  <time datetime="2022-05-24T03:33:04.000Z" itemprop="datePublished">2022-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/05/24/2022/penetration_test/"> [實作筆記] 滲透測試報告、原因與調整方針</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要，測試報告"><a href="#前情提要，測試報告" class="headerlink" title="前情提要，測試報告"></a>前情提要，測試報告</h2><p>測試廠商使用 Acunetix 掃描與 Burp Suite 攔截封包進行測試:<br>報告為以下幾個 Header 未加而使網站存在風險</p>
<ol>
<li>X-Frame-Options</li>
<li>X-XSS-Protection</li>
<li>X-Content-Type-Options</li>
<li>Strict-Transport-Security</li>
<li>Content-Security-Policy</li>
</ol>
<p>除了第五項，以下將會介紹各個 Header 賦於瀏覽器的行為，以及防範何種可能的攻擊</p>
<h2 id="Header-的用意"><a href="#Header-的用意" class="headerlink" title="Header 的用意"></a>Header 的用意</h2><h3 id="X-Frame-Options"><a href="#X-Frame-Options" class="headerlink" title="X-Frame-Options"></a>X-Frame-Options</h3><ul>
<li>新版的瀏覽器使用 <code>frame-ancestors</code></li>
<li>用意：防範 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/Security/Types_of_attacks#click-jacking">ClickJack</a> 攻擊<blockquote>
<p>Click Jacking 直譯為點擊劫持，常見的攻擊手段為，<br>攻擊者透過 frame 嵌入受害網站;當受害者誤入攻擊者網站時(常用社交攻擊)，<br>會誤以為是正常網站。<br>接下來就可以誘騙受害者，ex:輸入帳密，或是點擊特定連結或下載惡意軟體。</p>
</blockquote>
</li>
</ul>
<h4 id="選項"><a href="#選項" class="headerlink" title="選項"></a>選項</h4><ul>
<li><code>DENY</code></li>
<li><code>SAMEORIGIN</code></li>
<li><code>ALLOW-FROM &lt;uri&gt;</code></li>
</ul>
<h3 id="X-XSS-Protection"><a href="#X-XSS-Protection" class="headerlink" title="X-XSS-Protection"></a>X-XSS-Protection</h3><ul>
<li>新版的瀏覽器透過 <code>CSP (Content-Security-Policy)</code> 來防止 XSS 攻擊</li>
<li>用意:為提供舊版的瀏覽器防範 XSS 網站攻擊，這不屬於任何正式的規格書或草案之中<blockquote>
<p>XSS(Cross-Site Scripting)，直接跨站腳本攻擊，手段非常的多樣，<br>大多是在受害網站注入腳本語法(javascript)，使用者瀏覽時就會遭受攻擊。</p>
<p>ex:在留言區留下無限 loop 的 alert ，如果對方的網站沒有防範，<br>使用者瀏覽留言區的時候，就會彈出關不完的 alter 視窗。<br>(真正惡意的攻擊會更神不知鬼不覺)<br>參考</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://tech-blog.cymetrics.io/posts/huli/xss-attack-and-defense/">1</a></li>
<li><a target="_blank" rel="noopener" href="https://tech-blog.cymetrics.io/posts/jo/zerobased-cross-site-scripting/">2</a></li>
</ul>
</blockquote>
</li>
</ul>
<h4 id="選項-1"><a href="#選項-1" class="headerlink" title="選項"></a>選項</h4><ul>
<li><code>0</code><br>禁止 XSS 過濾。</li>
<li><code>1</code><br>啟用 XSS 過濾（通常瀏覽器是默認的）。如果檢測到跨站腳本攻擊，瀏覽器將清除頁面（刪除不安全的部分）。</li>
<li><code>1;mode=block</code><br>啟用 XSS 過濾。如果檢測到攻擊，瀏覽器將不會清除頁面，而是阻止頁面加載。</li>
<li><code>1; report=&lt;reporting-URI&gt;</code> (Chromium only)<br>啟用 XSS 過濾。如果檢測到跨站腳本攻擊，瀏覽器將清除頁面並使用 CSP report-uri (en-US)指令的功能發送違規報告。</li>
</ul>
<h3 id="X-Content-Type-Options"><a href="#X-Content-Type-Options" class="headerlink" title="X-Content-Type-Options"></a>X-Content-Type-Options</h3><ul>
<li>通知瀏覽器，不要自行猜測(MIME type sniffing)Content Type</li>
</ul>
<blockquote>
<p>原先 MIME type sniffing 是上古時代被設計來避免開發人員誤設 Content Type，<br>比如說明明是 javascript 檔， content Type 卻被設定 text&#x2F;plain，<br>這時瀏覽器 sniff 判斷為 javascript 後，可以執行該 js 檔<br>但是被用來惡意攻擊，比如說連結 <code>src/fake.jpg</code> 看起來像一張圖片<br>實際上 Response 卻回傳可執行的 javascript (內含惡意的程式)，<br>瀏覽器的 sniffing 行為會自行解析為腳本(javascript)並執行攻擊</p>
</blockquote>
<h4 id="選項-2"><a href="#選項-2" class="headerlink" title="選項"></a>選項</h4><ul>
<li><code>nosniff</code></li>
</ul>
<h3 id="Strict-Transport-Security"><a href="#Strict-Transport-Security" class="headerlink" title="Strict-Transport-Security"></a>Strict-Transport-Security</h3><p><code>HTTP Strict-Transport-Security</code> 回應標頭（簡稱為 HSTS (en-US)）告知瀏覽器應強制使用 HTTPS 以取代 HTTP。<br>現代的瀏覽器優先使用 HTTPS 已是共識，不加這個 Header 也會出現不安全的警告</p>
<h4 id="選項-3"><a href="#選項-3" class="headerlink" title="選項"></a>選項</h4><ul>
<li><code>max-age</code> 指定秒數</li>
<li><code>includeSubDomains</code> 包含子網域</li>
</ul>
<h3 id="Content-Security-Policy"><a href="#Content-Security-Policy" class="headerlink" title="Content-Security-Policy"></a>Content-Security-Policy</h3><p>這個坑很深，我另外再撰文說明，<br>可以透過另一個 Header <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy-Report-Only">Content-Security-Policy-Report-Only</a>，<br>產生報告逐一修正 Policy。</p>
<h2 id="補充"><a href="#補充" class="headerlink" title="補充"></a>補充</h2><h3 id="如何使用-How-to-use-testssl"><a href="#如何使用-How-to-use-testssl" class="headerlink" title="如何使用 How to use testssl"></a>如何使用 How to use testssl</h3><p>testssl.sh 是一個免費的 command tool，<br>它檢查任何端口上的服務器服務是否支持 TLS&#x2F;SSL 、<br>協議以及最近的密碼缺陷等。</p>
<p>安裝</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install testssl</span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">testssl.sh &#123;uri&#125;</span><br></pre></td></tr></table></figure>

<h3 id="如何在-GCP-Bucket-加上-header"><a href="#如何在-GCP-Bucket-加上-header" class="headerlink" title="如何在 GCP Bucket 加上 header"></a>如何在 GCP Bucket 加上 header</h3><p>GCP &gt; Network Services &gt; Load Balancing</p>
<ul>
<li>Edit</li>
<li>Backend Configuration</li>
<li>找到特定的 Bucket 點擊鉛筆符號</li>
<li>Edit backend bucket</li>
<li>展開 ADVANCED CONFIGURATIONS (RESPONSE HEADERS)</li>
<li>Custom response headers &gt; ADD HEADER</li>
<li>輸入 Header Key 與 Value<ul>
<li>X-Frame-Options: DENY</li>
<li>X-XSS-Protection: 1;mode&#x3D;block</li>
<li>X-Content-Type-Options: nosniff</li>
</ul>
</li>
</ul>
<h2 id="補充-如何使用-Burp-Suite-觀察"><a href="#補充-如何使用-Burp-Suite-觀察" class="headerlink" title="補充: 如何使用 Burp Suite 觀察"></a>補充: 如何使用 Burp Suite 觀察</h2><p>概念說明：<br>Burp 可以在你的本機建立一個 Proxy Server,<br>並透過它提供的瀏覽器(Chromium)連線到你指定的 uri 並進行欄截。</p>
<blockquote>
<p>You ←→ Burp(Proxy) ←→ Internet。</p>
</blockquote>
<p><strong>注意</strong>: 網路上大多數的文章都會有 Proxy 的設定，其實這是可以省略的，<br>新版本的 Burp 用提供的瀏覽器就會連結 Burp Proxy。</p>
<ol>
<li>下載並安裝 <a target="_blank" rel="noopener" href="https://portswigger.net/burp/communitydownload">Burp Suite</a>，Burp Suite Community Edition 版本即可</li>
<li>選擇 Temporary project &gt; Next</li>
<li>選擇 Use Burp defaults &gt; Start Burp</li>
<li>開啟攔截器: Proxy &gt; Intercept is on</li>
<li>開啟網站: Proxy &gt; Open Browser(Chromium) &gt; Key In &lt;target site URL&gt;</li>
<li>決定欄截或丟棄 Proxy &gt; Forward &#x2F; Drop</li>
<li>查看歷史記錄 Proxy &gt; HTTP &#x2F; WebSockets history</li>
</ol>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><p>CSP 相關(留作下篇文章的養份)</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP">https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP</a></li>
<li><a target="_blank" rel="noopener" href="https://csper.io/blog/csp-report-filtering">https://csper.io/blog/csp-report-filtering</a></li>
<li><a target="_blank" rel="noopener" href="https://content-security-policy.com/">https://content-security-policy.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://devco.re/blog/2014/04/08/security-issues-of-http-headers-2-content-security-policy/">https://devco.re/blog/2014/04/08/security-issues-of-http-headers-2-content-security-policy/</a></li>
<li><a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10272394">https://ithelp.ithome.com.tw/articles/10272394</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/WebAssembly/content-security-policy/blob/main/proposals/CSP.md">https://github.com/WebAssembly/content-security-policy/blob/main/proposals/CSP.md</a></li>
<li><a target="_blank" rel="noopener" href="https://hackmd.io/@Eotones/BkOX6u5kX">https://hackmd.io/@Eotones/BkOX6u5kX</a></li>
<li><a target="_blank" rel="noopener" href="https://runebook.dev/zh-CN/docs/http/headers/content-security-policy">https://runebook.dev/zh-CN/docs/http/headers/content-security-policy</a></li>
<li><a target="_blank" rel="noopener" href="https://mmazzarolo.com/blog/2021-12-14-lessons-learned-publishing-a-content-security-policy/">https://mmazzarolo.com/blog/2021-12-14-lessons-learned-publishing-a-content-security-policy/</a></li>
<li><a target="_blank" rel="noopener" href="https://www.appsecmonkey.com/blog/content-security-policy">https://www.appsecmonkey.com/blog/content-security-policy</a></li>
<li><a target="_blank" rel="noopener" href="https://bugs.chromium.org/p/chromium/issues/detail?id=915648">https://bugs.chromium.org/p/chromium/issues/detail?id=915648</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy</a></li>
</ul>
</li>
<li><p><a target="_blank" rel="noopener" href="https://hackercat.org/burp-suite-tutorial/web-pentesting-burp-suite-total-tutorial">https://hackercat.org/burp-suite-tutorial/web-pentesting-burp-suite-total-tutorial</a></p>
</li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/05/24/2022/penetration_test/" data-id="cm1olstqw00ba2srv8cz18m8d" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/05/24/2022/penetration_test/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2022/about_covid_19_in_taiwan" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/05/20/2022/about_covid_19_in_taiwan/" class="article-date">
  <time datetime="2022-05-20T06:04:08.000Z" itemprop="datePublished">2022-05-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/05/20/2022/about_covid_19_in_taiwan/"> [生活筆記] 2022 新冠(武漢)肺炎疫情</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="進況"><a href="#進況" class="headerlink" title="進況"></a>進況</h2><p>2021 年 5 月 ~ 7 月進入 3 級後，理論上都是在 2 級的狀態，<br>入境人數每日約有 50~100 名確診者入境，<br>到了 2022 年 4 月以來，疫情指數成長<br><img src="/../../images/2022/covid-19-1.png" alt="爆"><br>近日單日確診已破 90000 例。</p>
<h3 id="重複發生的事"><a href="#重複發生的事" class="headerlink" title="重複發生的事"></a>重複發生的事</h3><ul>
<li>2020 搶&#x2F;吵口罩</li>
<li>2021 搶&#x2F;吵疫苗</li>
<li>2022 搶&#x2F;吵快篩</li>
</ul>
<h3 id="該作的事"><a href="#該作的事" class="headerlink" title="該作的事"></a>該作的事</h3><ul>
<li>載口罩</li>
<li>勤洗手</li>
<li>少去人多的地方</li>
<li>注意自身生心理的變化</li>
</ul>
<h3 id="現況的因應方針"><a href="#現況的因應方針" class="headerlink" title="現況的因應方針"></a>現況的因應方針</h3><p>準備適量的快篩，以 2 人的小家庭其實 1 盒(5 劑)已經夠用，<br>買不到就作好該作的事，台灣的狀況是可以在幾周到幾個月內調整到位的。<br>(參考口罩、疫苗與雞蛋的狀況)<br>無症狀就正常生活，保持樂觀，不要過度被搧動性的<code>偽新聞</code>、<code>網軍</code>、<code>談話節目</code>影響，<br>如果真的要看，請深入研究各方的說詞，不要因喜好而偏重某些節目。</p>
<p>自覺有症狀先快篩，<br>陰性就保持正常生活，擔心的話請就醫。<br>陽性參考 CDC 指示，自我隔離或就醫，並聽從醫囑。</p>
<p>有症狀而無法篩檢的就可以先自我隔離，<br>所幸我的工作模式可以遠端處理大部份事宜，<br>家中也沒有老小，並且都接種過三劑疫苗。<br>正面面對目前的疫情，並不想介入過多的口水，<br>看數據作事，或許有點無情但是大局來說才是正確的方向。</p>
<h3 id="分不清的名詞"><a href="#分不清的名詞" class="headerlink" title="分不清的名詞"></a>分不清的名詞</h3><p>角色有確診者、密切接觸者、其它<br>方針居家檢疫、居家隔離&#96;、居家照護、<br>隔離、自主健康管理、自主防疫、<br>自我健康監測 ??、自主應變 ??</p>
<p>總覺得每天都在產生新名詞呢</p>
<h3 id="資訊的取得"><a href="#資訊的取得" class="headerlink" title="資訊的取得"></a>資訊的取得</h3><ul>
<li>參考國外數據</li>
<li>聽取 CDC&#x2F;(所在)縣市記者會</li>
<li>多方參考海外新聞、數據報表</li>
<li>盡可能獲取一些科普、醫療相關的知識，但是要注意背後的科學支持是否可信</li>
</ul>
<p>心態上不要盲信，也不需要被風向帶到彼此敵視</p>
<h2 id="未來的方向"><a href="#未來的方向" class="headerlink" title="未來的方向"></a>未來的方向</h2><p>長期來說，只能試著與病毒共存，<br>讓整體的生活恢復正常，問題是這個過程是要付出多少的代價 ?</p>
<p>第一個全面接種疫苗，<br>我們的第一劑覆蓋率只有 85% ，第二劑 80% ，第三劑  69%（資料來源 <a target="_blank" rel="noopener" href="https://support.google.com/websearch/answer/10339795?hl=zh-Hant&visit_id=637887157557033154-233604798&p=cvd19_vaccine_stats&rd=1">202205021，GOOGLE</a>）<br>對比世界其它國家不算低，但是疫苗的效力會隨時間下滑，所以定期要打加強劑，<br>此外仍有特定族群無法接種疫苗，特別為小孩與慢性病者，應儘快加速孩童疫苗的進口與接種.<br>而之前打氣下滑導致疫苗過期而被丟棄，實在十分浪費。</p>
<blockquote>
<p>指揮中心發言人莊人祥 3 月底曾表示，莫德納及 BNT 約有 26.4 萬劑、AZ 則約 30 萬劑，<br>共計 56.4 萬劑疫苗因到期得銷毀。根據疾管署最新統計，<br>台灣 COVID-19 疫苗接種人口涵蓋率第 1 劑 84.57%、第 2 劑 79.84%、追加劑接種率 58.24%。</p>
<p>ETtoday &lt;&lt;3 天 1.6 萬例！瘋搶疫苗 醫嘆：丟掉你罵浪費，現在罵打不到？&gt;&gt; 記者陳俊宏／綜合報導</p>
</blockquote>
<p>第二個，在不破壞醫療量能前提下，儘可能讓抵抗力高的人感染而達成自然免疫。<br>不論如何會有人因此死亡，特別是未接種者，<br>雖然接種疫苗中壯年在數據上中重率不高，<br>但是對於個體而言，代表的是一個活生生的生命。<br>沒有人想當那個 0.03 %。<br>不要過渡消耗醫療量能，<br>目前快篩的排隊或是 PCR 的排隊，有些人是為了領取保險金，取得確診証明。<br>無症或輕症者，其實正在壓縮真正需要就醫的人的生命，<br>讓醫護人員花費大量時間在作文書與檢驗作業。</p>
<p>無症或輕症者，雖是下策，可以透過線上或是購買成藥等方式來撐過疫情。<br>如果藥物足夠的話，快篩陽且有診狀，醫師就該判斷是否進行投藥，避免後續重症的發生。</p>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/05/20/2022/about_covid_19_in_taiwan/" data-id="cm1olstqm009w2srver31381m" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/05/20/2022/about_covid_19_in_taiwan/#disqus_thread" class="article-comment-link">留言</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2022/typescript_tips" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/05/15/2022/typescript_tips/" class="article-date">
  <time datetime="2022-05-15T02:00:57.000Z" itemprop="datePublished">2022-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/05/15/2022/typescript_tips/"> [活動筆記] 線上活動 TypeScript tips and Tricks with Matt</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>YouTube 頻道<a target="_blank" rel="noopener" href="https://www.youtube.com/channel/UCs5Y5_7XK8HLDX0SLNwkd3w">Visual Studio Code</a><br>前陣子推出了由大神 Matt 所介紹有關 TypeScript 奇技淫巧<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=hBk4nV7q6-w">影片</a><br>相當燒腦，特別作此記錄。</p>
<h2 id="5-06-generic-table-component"><a href="#5-06-generic-table-component" class="headerlink" title="5:06 generic-table-component"></a>5:06 <a target="_blank" rel="noopener" href="https://aka.ms/typescript/1">generic-table-component</a></h2><p>難度:★★☆☆☆</p>
<p>這題需要有一些 React 的基礎概念，<br>首先我們有一些 React Component(以下簡稱 RC)，<br>並且用 interface 建立相對應 props。</p>
<p>問題是如果要讓我們的 RC 更泛用應該怎麼作，<br>在這個例子中，我們建立了一個 Table RC(以下簡稱 Table) ，並且在 props 中傳入一些參數，<br>這個參數的型別，直接與 Table 產生了耦合，我們可用泛型(Generic)處理。</p>
<h3 id="Before"><a href="#Before" class="headerlink" title="Before"></a>Before</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface <span class="title class_">TableProps</span> &#123;</span><br><span class="line">  <span class="attr">items</span>: &#123; <span class="attr">id</span>: string &#125;[];</span><br><span class="line">  <span class="attr">renderItem</span>: <span class="function">(<span class="params">item: &#123; id: string &#125;</span>) =&gt;</span> <span class="title class_">React</span>.<span class="property">ReactNode</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">Table</span> = (<span class="params">props: TableProps</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="After"><a href="#After" class="headerlink" title="After"></a>After</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">TableProps</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="attr">items</span>: T[];</span><br><span class="line">  <span class="attr">renderItem</span>: <span class="function">(<span class="params">item: T</span>) =&gt;</span> <span class="title class_">React</span>.<span class="property">ReactNode</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">Table</span> = &lt;T,&gt;<span class="function">(<span class="params">props: TableProps&lt;T&gt;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>這裡是很簡單的泛型觀念，如果有寫過具備泛型的語言(ex:C#)應該不難理解，<br>另外需要注意的一個有關 React 的小小 Tricky<br>注意到 <code>&lt;T,&gt;</code> 這裡有一個小小的逗號，其實是不必要的，<br>但是在 React 的開發環境之中，角括號<code>&lt;&gt;</code>會被視為未封閉的 RC;<br>封閉的例子，ex:<code>&lt;myComponent&gt;&lt;/myComponent&gt;</code> 或是 <code>&lt;myComponent /&gt;</code><br>未了必免編輯器的警告，需要加上一個逗號<code>,</code></p>
<p>另外這裡在寫 React Component 時，使用了 arrow function，<br>我們也可以換成一般的 function 寫法,這種寫法就可以省略 <code>&lt;T,&gt;</code> 這樣 tricky 的寫法</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">Table</span> = <span class="keyword">function</span> &lt;T&gt;(<span class="attr">props</span>: <span class="title class_">TableProps</span>&lt;T&gt;) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>泛型不難理解，但是考量到需要具備的 React 知識，難度我給他兩顆星</p>
<h2 id="11-19-get-deep-value"><a href="#11-19-get-deep-value" class="headerlink" title="11:19 get-deep-value"></a>11:19 <a target="_blank" rel="noopener" href="https://aka.ms/typescript/2">get-deep-value</a></h2><p>難度:★★★☆☆</p>
<p>這題要動態的取出物件深層的屬性的型別，<br>具體好處是可以讓編輯型別檢查</p>
<p>看一下影片中的範例 <code>getDeepValue</code> 是一個函數，可以用來取物件深層屬性的值<br>這裡我們看到 <code>obj:any</code> Matt 說道可以視作一個壞味道(不知道他對 unknown 的看法)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getDeepValue</span> = (<span class="params">obj: any, firstKey: string, secondKey: string</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> obj[firstKey][secondKey];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>看一下原始範例如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">foo</span>: &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">b</span>: <span class="number">2</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">bar</span>: &#123;</span><br><span class="line">    <span class="attr">c</span>: <span class="string">&quot;12&quot;</span>,</span><br><span class="line">    <span class="attr">d</span>: <span class="number">18</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="我的作法"><a href="#我的作法" class="headerlink" title="我的作法"></a>我的作法</h3><p>如果比較直觀的寫法可以考慮寫個 ObjectType,</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// this one is NOT from the sample</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">obj</span>: <span class="title class_">ObjType</span> = &#123;</span><br><span class="line">  <span class="attr">foo</span>: &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">b</span>: <span class="number">2</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">bar</span>: &#123;</span><br><span class="line">    <span class="attr">c</span>: <span class="string">&quot;12&quot;</span>,</span><br><span class="line">    <span class="attr">d</span>: <span class="number">18</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">FirstKeyType</span> = <span class="string">&quot;foo&quot;</span> | <span class="string">&quot;bar&quot;</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">SecondKeyType</span> = <span class="string">&quot;a&quot;</span> | <span class="string">&quot;b&quot;</span> | <span class="string">&quot;c&quot;</span> | <span class="string">&quot;d&quot;</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ObjType</span> = &#123;</span><br><span class="line">  [key <span class="keyword">in</span> <span class="title class_">FirstKeyType</span>]: &#123; <span class="attr">a</span>: <span class="built_in">boolean</span>; <span class="attr">b</span>: <span class="built_in">number</span> &#125; | &#123; <span class="attr">c</span>: <span class="built_in">string</span>; <span class="attr">d</span>: <span class="built_in">number</span> &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getDeepValue = (<span class="attr">obj</span>: <span class="title class_">ObjType</span> <span class="comment">//...</span></span><br></pre></td></tr></table></figure>

<p>註:這裡有用到 <a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/2/objects.html#index-signatures">index-signatures</a> 的概念<br>看看官方文件的說法:</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Sometimes you don’t know all the names of a type’s properties ahead of time, but you do know the shape of the values.</span><br><span class="line"></span><br><span class="line">In those cases you can use an index signature to describe the types of possible values</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> value = <span class="title function_">getDeepValue</span>(obj, <span class="string">&quot;foo&quot;</span>, <span class="string">&quot;a&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="Matt-在影片中的作法"><a href="#Matt-在影片中的作法" class="headerlink" title="Matt 在影片中的作法"></a>Matt 在影片中的作法</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getDeepValue = &lt;</span><br><span class="line">  <span class="title class_">TObj</span>,</span><br><span class="line">  <span class="title class_">TFirstKey</span> <span class="keyword">extends</span> keyof <span class="title class_">TObj</span>,</span><br><span class="line">  <span class="title class_">TSecondKey</span> <span class="keyword">extends</span> keyof <span class="title class_">TObj</span>[<span class="title class_">TFirstKey</span>]</span><br><span class="line">&gt;<span class="function">(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">  obj: TObj,</span></span></span><br><span class="line"><span class="params"><span class="function">  firstKey: TFirstKey,</span></span></span><br><span class="line"><span class="params"><span class="function">  secondKey: TSecondKey</span></span></span><br><span class="line"><span class="params"><span class="function"></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> obj[firstKey][secondKey];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/2/keyof-types.html#handbook-content">keyof 關鍵字可以直接參考官方文件</a></p>
<h3 id="比較兩者的作法"><a href="#比較兩者的作法" class="headerlink" title="比較兩者的作法"></a>比較兩者的作法</h3><p>我們加上了 Type，就是要為程式碼加上保護<br>我跟 Matt 的作法，下面的程式碼都會提出警告</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> error_value = <span class="title function_">getDeepValue</span>(obj, <span class="string">&quot;error&quot;</span>, <span class="string">&quot;wrong&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>但是無法避免以下的錯誤</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> error_value = <span class="title function_">getDeepValue</span>(obj, <span class="string">&quot;foo&quot;</span>, <span class="string">&quot;c&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><code>obj.foo</code> 是不存在 <code>c</code> 屬性，這樣我們就需要動態判斷型別<br>看看 Matt 使用 <code>keyof</code> 作法。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getDeepValue = &lt;<span class="title class_">TObj</span>, <span class="title class_">TFirstKey</span> <span class="keyword">extends</span> keyof <span class="title class_">TObj</span>&gt;<span class="function">(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">  obj: TObj,</span></span></span><br><span class="line"><span class="params"><span class="function">  firstKey: TFirstKey,</span></span></span><br><span class="line"><span class="params"><span class="function">  secondKey: keyof TObj[TFirstKey]</span></span></span><br><span class="line"><span class="params"><span class="function"></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> obj[firstKey][secondKey];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>這裡有點不可思議，首先是 ts 的動態型別推導，<br>在呼叫方法 getDeepValue 的第 1 個參數會動態推導出 TObj 的型別<br>大概等價以下的型別</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">TObj</span> = &#123;</span><br><span class="line">  <span class="attr">foo</span>: &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="built_in">boolean</span>;</span><br><span class="line">    <span class="attr">b</span>: <span class="built_in">number</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="attr">bar</span>: &#123;</span><br><span class="line">    <span class="attr">c</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">d</span>: <span class="built_in">number</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><code>keyof TObj</code> 的值會是 <code>foo | bar</code><br>而 TFirstKey 的型別，在第 2 個參數傳入之時決定是 <code>foo</code> 或 <code>bar</code>，<br>不是上述兩種的參數傳入時，編輯會拋出錯誤警告，非常好用。<br>下一個燒腦的部份，第 3 個參數 <code>secondKey: keyof TObj[TFirstKey]</code>，<br>透過類似陣列取值的手法，我們可以在傳入第 2 個參數時決定第 3 個參數的值，並且讓編輯器提供保護。<br>例如，第 2 個參數為 <code>foo</code> 時，第 3 個參數會限定只能傳入 <code>&quot;a&quot;|&quot;b&quot;</code></p>
<p>這裡需要思考一下，並不難理解，所以給 3 顆星。</p>
<p>如果能應用得好的話，對於開發 ts Library 會相當有幫助<br>不過我覺得自已無法用得很得心應手，比如說，如果物件深度不固定，應該如處理？<br>又或者如果不用 <code>keyof</code> 的技巧，對一個已知的物件，我能不能作到類似的效果(編輯器動態檢查)?</p>
<h2 id="28-54-conditional-types"><a href="#28-54-conditional-types" class="headerlink" title="28:54 conditional-types"></a>28:54 <a target="_blank" rel="noopener" href="https://aka.ms/typescript/3">conditional-types</a></h2><p>難度:★★★☆☆</p>
<p>這其實是 TypeScript 一個基本的概念與技巧，<br>可以在<a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/2/conditional-types.html">官方文件</a>看到更多資訊</p>
<p>一個標準的寫法如下</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">SomeType</span> <span class="keyword">extends</span> <span class="title class_">OtherType</span> ? <span class="title class_">TrueType</span> : <span class="title class_">FalseType</span>;</span><br></pre></td></tr></table></figure>

<p>記得這裡最終只會回傳 TrueType 或是 FalseType，而 SomeType 只是作為條件檢查。<br>當然也可以作多重的條件檢查</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">SomeType</span> <span class="keyword">extends</span> <span class="title class_">OtherType</span> ?</span><br><span class="line">  <span class="title class_">TrueType</span> :</span><br><span class="line">  <span class="title class_">SomeType</span> <span class="keyword">extends</span> <span class="title class_">OtherConditionType</span>?</span><br><span class="line">  <span class="title class_">OtherThing</span> :</span><br><span class="line">  <span class="title class_">FalseType</span>;</span><br></pre></td></tr></table></figure>

<h3 id="35-20-更進一步"><a href="#35-20-更進一步" class="headerlink" title="35:20 更進一步"></a>35:20 更進一步</h3><p>我們看一下怎麼應用 Condition Type 這個技巧?<br>參考<a target="_blank" rel="noopener" href="https://aka.ms/typescript/9">error-messages-in-ts</a>這個教案<br>在 deepEqualCompare 這個方法之中，陣列比較需要例外處理，<br>因為陣列比較永遠會回傳 false<br>原本的作法，會在程式的 runtime 作型別檢查並拋出例外</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> deepEqualCompare = &lt;<span class="title class_">Arg</span>&gt;(<span class="attr">a</span>: <span class="title class_">Arg</span>, <span class="attr">b</span>: <span class="title class_">Arg</span>): <span class="function"><span class="params">boolean</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// runtime handle</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(a) || <span class="title class_">Array</span>.<span class="title function_">isArray</span>(b)) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;You cannot compare two arrays using deepEqualCompare&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> a === b;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>而透過 condition type，可以讓編輯器在開發時直接檢查，看起來更加的優雅</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> deepEqualCompare = &lt;<span class="title class_">Arg</span>&gt;(</span><br><span class="line">  <span class="attr">a</span>: <span class="title class_">Arg</span> <span class="keyword">extends</span> <span class="built_in">any</span>[] ? <span class="string">&quot;not allow array&quot;</span> : <span class="title class_">Arg</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="title class_">Arg</span> <span class="keyword">extends</span> <span class="built_in">any</span>[] ? <span class="string">&quot;not allow array&quot;</span> : <span class="title class_">Arg</span></span><br><span class="line">): <span class="function"><span class="params">boolean</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a === b;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>這應該算是 TypeScript 的基本工，也有在官方文件上有很清楚的講解，<br>對我來說，第一次看到仍然相當驚訝，我給他三顆星<br>另外，我有兩個延申問題，</p>
<ol>
<li>程式碼中有 any 算不算壞味道? 我是不是應該用 <code>unknown[]</code> 取代 <code>any[]</code></li>
<li><code>Arg extends any[] ? &quot;not allow array&quot; : Arg</code> 明顯出現了重複，我有沒有什麼技巧可以消除這樣的重複?</li>
</ol>
<h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><p>整個影片還有許多燒腦的部分，<br>Q&amp;A 或是最後的挑戰都有相當多有趣的東西的可挖掘，<br>有機會我再補上。</p>
<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/type-challenges/type-challenges/tree/main/questions">Type-Challenges</a></li>
<li>Matt’s Tips &amp; Tricks<ul>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/1">generic-table-component</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/2">get-deep-value</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/3">conditional-types</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/4">loose-autocomplete</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/5">compose</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/6">conditional-function-args</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/7">distributive-conditional-types</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/8">object-values</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/9">error-messages-in-ts</a></li>
<li><a target="_blank" rel="noopener" href="https://aka.ms/typescript/10">search-params-decoding</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://dev.to/samwightt/today-in-typescript-the-keyof-operator-445b">Today in TypeScript: the keyof operator</a></li>
<li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/zod">zod</a></li>
<li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/ts-toolbelt">ts-toolbelt</a></li>
<li><a target="_blank" rel="noopener" href="https://stately.ai/">Matt 目前的專案 stately</a></li>
<li><a target="_blank" rel="noopener" href="https://twitter.com/mpocock1">Matt 的推特</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/05/15/2022/typescript_tips/" data-id="cm1olstqz00bm2srvcjkn5hv5" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/05/15/2022/typescript_tips/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2022/hexo_customerize_helper" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/05/10/2022/hexo_customerize_helper/" class="article-date">
  <time datetime="2022-05-10T02:17:05.000Z" itemprop="datePublished">2022-05-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/05/10/2022/hexo_customerize_helper/"> [實作筆記] 自定義 Hexo Helper</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>我的 Blog 目前是使用 Hexo 搭建的,<br>使用的主題是 <code>landscape</code> 。<br>隨著時光推移, Hexo 漸漸從人們的目光淡出,<br>主功能、文件、翻譯或是外掛、主題等…, 更新速度變慢很多</p>
<p>我想改寫主題當中的某個輔助函數（Helper), 稍微記錄一下作法。</p>
<h2 id="實作"><a href="#實作" class="headerlink" title="實作"></a>實作</h2><p>首先是檔案位置，一個是在根目錄底下建立 <code>scripts</code> 資料夾，<br>或者你正在使用主題(Theme)底下。<br>以我的例子來說，我會放在 <code>themes/landscape/scripts</code> 底下</p>
<p>參考下面的圖示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">├── scripts</span><br><span class="line">│   ├── index.js</span><br><span class="line">│   └── your_helper_here.js</span><br><span class="line">├── themes</span><br><span class="line">│   └── the_theme_you_are_using</span><br><span class="line">│       └── scripts</span><br><span class="line">│           ├── index.js</span><br><span class="line">│           └── your_helper_here.js</span><br></pre></td></tr></table></figure>

<p>下一步，你需要建立 <code>index.js</code>,並在其入註冊你的函數,</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//hexo.extend.helper.register(name, function)</span></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">helper</span>.<span class="title function_">register</span>(<span class="string">&quot;helper_name&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;&lt;div&gt;your helper function &lt;/div&gt;&quot;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>通常 helper 不會是一個簡單的函數，且會有 UI 相關的程式，<br>有為了方便管理，我會拆檔，再用 <code>require</code> 來引入函數</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo.<span class="property">extend</span>.<span class="property">helper</span>.<span class="title function_">register</span>(<span class="string">&quot;helper_name&quot;</span>, <span class="built_in">require</span>(<span class="string">&quot;./helper_file_name&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>最後，在 *.ejs 檔案中使用 helper</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- <span class="title function_">helper_name</span>() %&gt;</span><br></pre></td></tr></table></figure>

<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://hexo.bootcss.com/api/helper.html">Hexo 輔助函數</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.haysc.tech/custom-helper-hexo/">詳解 Hexo 輔助函數</a></li>
<li><a target="_blank" rel="noopener" href="https://titangene.github.io/article/hexo-markdown-it.html">將 Hexo 的 Markdown 渲染引擎換成 markdown-it</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/05/10/2022/hexo_customerize_helper/" data-id="cm1olstqr00ao2srvbp3q4o9g" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/05/10/2022/hexo_customerize_helper/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2022/dotnet_namespace" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/05/03/2022/dotnet_namespace/" class="article-date">
  <time datetime="2022-05-03T07:13:12.000Z" itemprop="datePublished">2022-05-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/05/03/2022/dotnet_namespace/"> [實作筆記] Dotnet Core 實作隨筆</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Web-Api-專案統一錯誤處理"><a href="#Web-Api-專案統一錯誤處理" class="headerlink" title="Web&#x2F;Api 專案統一錯誤處理"></a>Web&#x2F;Api 專案統一錯誤處理</h2><p>首先建立一個新的類別 <code>ErrorHandlingFilter</code><br>繼承 <code>ExceptionFilterAttribute</code> 並複寫 <code>OnException</code> 函數</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ErrorHandlingFilter</span> : <span class="title">ExceptionFilterAttribute</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnException</span>(<span class="params">ExceptionContext context</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//do your logical here</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 Program.cs 中注入</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">builder.Services.AddControllers(options =&gt; &#123; options.Filters.Add(<span class="keyword">new</span> ErrorHandlingFilter()); &#125;);</span><br></pre></td></tr></table></figure>

<h2 id="專案更改-Root-Namespace"><a href="#專案更改-Root-Namespace" class="headerlink" title="專案更改 Root Namespace"></a>專案更改 Root Namespace</h2><p>預設會使用專案名稱作為整個專案的 Root Namespace，<br>但是我們可以在 csproj 檔中設定 <code>RootNamespace</code> 讓它與專案名稱有所差異</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Project Sdk=<span class="string">&quot;Microsoft.NET.Sdk.Web&quot;</span>&gt;</span><br><span class="line">  &lt;PropertyGroup&gt;</span><br><span class="line">    &lt;TargetFramework&gt;net6<span class="number">.0</span>&lt;/TargetFramework&gt;</span><br><span class="line">    &lt;RootNamespace&gt;MyNameSpace&lt;/RootNamespace&gt;</span><br><span class="line">  &lt;/PropertyGroup&gt;</span><br><span class="line">&lt;/Project&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Nuget"><a href="#Nuget" class="headerlink" title="Nuget"></a>Nuget</h2><h3 id="add-nuget-registry"><a href="#add-nuget-registry" class="headerlink" title="add nuget registry"></a>add nuget registry</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet nuget add <span class="built_in">source</span> &lt;registry url&gt; -n SourceName -u UserName -p Password --store-password-in-clear-text</span><br></pre></td></tr></table></figure>

<h3 id="pack"><a href="#pack" class="headerlink" title="pack"></a>pack</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet pack -o &lt;output folder&gt; -c NUGET --no-dependencies --force  -p:PackageVersion=&lt;version&gt;</span><br></pre></td></tr></table></figure>

<h3 id="push"><a href="#push" class="headerlink" title="push"></a>push</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet nuget push -s SourceName &lt;Packed Version&gt;</span><br></pre></td></tr></table></figure>

<h2 id="建立共用的-HttpClient"><a href="#建立共用的-HttpClient" class="headerlink" title="建立共用的 HttpClient"></a>建立共用的 HttpClient</h2><p>在 Program.cs 中註冊</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">builder.Services.AddHttpClient(<span class="string">&quot;ThirdService&quot;</span>, (provider, client) =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> o = provider.GetRequiredService&lt;IOptions&lt;ThirdServiceOptions&gt;&gt;();</span><br><span class="line">    client.BaseAddress = <span class="keyword">new</span> Uri(<span class="string">$&quot;<span class="subst">&#123;o.Value.Url&#125;</span>/&quot;</span>);</span><br><span class="line">    client.DefaultRequestHeaders.Accept.Add(<span class="keyword">new</span> MediaTypeWithQualityHeaderValue(<span class="string">&quot;application/json&quot;</span>));</span><br><span class="line">    client.DefaultRequestHeaders.Authorization = <span class="keyword">new</span> AuthenticationHeaderValue(<span class="string">&quot;Bearer&quot;</span>, o.Value.Token);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>再透過 HttpClientFactory 具名取用</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">MyService</span>(<span class="params">IHttpClientFactory httpClientFactory</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">  HttpClient _httpClient = httpClientFactory.CreateClient(<span class="string">&quot;ThirdService&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最小化-Docker-Image"><a href="#最小化-Docker-Image" class="headerlink" title="最小化 Docker Image"></a>最小化 Docker Image</h2><p>這一種被稱為 Multiple Stage Builds 的 Docker 技巧，<br>主要的概念是將建置(Build)與部署(Deploy)的步驟分開，<br>最終只部署出營運所需的映象檔(Image)。</p>
<p>比如說下面的 <code>Docker File</code> 就是將 dotnet 專案作了兩步驟的處理</p>
<p>此外，如果我們更換適當的 Image，<br>比如說，在 Create Runtime Image Step，<br>將 <code>mcr.microsoft.com/dotnet/aspnet:6.0</code> 改為 <code>mcr.microsoft.com/dotnet/aspnet:6.0-alpine</code><br>映象檔的 Size 將減少 46.6% (216.11 MB → 115.4 MB)</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Build Step</span></span><br><span class="line"><span class="keyword">FROM</span> mcr.microsoft.com/dotnet/sdk:<span class="number">6.0</span> AS build</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /source</span></span><br><span class="line"><span class="comment"># copy everything else and build app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> /src/WebAPI/. ./WebApi/</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /source/WebApi</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> dotnet restore <span class="string">&#x27;WebApi.csproj&#x27;</span></span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> dotnet build <span class="string">&#x27;WebApi.csproj&#x27;</span> -c release -o /app --no-restore</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> dotnet publish <span class="string">&#x27;WebApi.csproj&#x27;</span> -c release -o /app --no-restore</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create Runtime Image Step</span></span><br><span class="line"><span class="keyword">FROM</span> mcr.microsoft.com/dotnet/aspnet:<span class="number">6.0</span>-alpine</span><br><span class="line"><span class="keyword">ENV</span> ASPNETCORE_URLS=http://+:<span class="number">5110</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=build /app ./</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">5110</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;dotnet&quot;</span>, <span class="string">&quot;WebApi.dll&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-tw/aspnet/core/fundamentals/http-requests?view=aspnetcore-6.0">在 ASP.NET Core 中使用 IHttpClientFactory 發出 HTTP 要求</a></li>
<li><a target="_blank" rel="noopener" href="https://jiepeng.me/2018/06/09/use-docker-multiple-stage-builds">透過 Multiple Stage Builds 編譯出最小的 Docker Image</a></li>
</ul>
<p>(fin)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blog.marsen.me/2022/05/03/2022/dotnet_namespace/" data-id="cm1olstqo00a62srv19ni88uc" class="article-share-link">Share</a>
      
        <a href="https://blog.marsen.me/2022/05/03/2022/dotnet_namespace/#disqus_thread" class="article-comment-link">留言</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/8/">← 上一頁</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/28/">28</a><a class="extend next" rel="next" href="/page/10/">下一頁 →</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/09/30/2024/typescript_string_intersection_trick/"> [學習筆記] TypeScript 字串建議的小技巧</a>
          </li>
        
          <li>
            <a href="/2024/09/26/2024/type_vs_object_method_syntax_typescript/"> [學習筆記] 淺談 TypeScript 方法簡寫與物件屬性語法的差異</a>
          </li>
        
          <li>
            <a href="/2024/09/17/2024/different_FUPAN_ways/"> [學習筆記] 一些復盤的方法</a>
          </li>
        
          <li>
            <a href="/2024/09/09/2024/azure_function_developer_with_queue/"> [實作筆記] Azure Function Queue Trigger 開發(以Python為例) </a>
          </li>
        
          <li>
            <a href="/2024/08/13/2024/azure_function_python_deploy_with_devops_pipeline/"> [踩雷筆記] Gitlab 整合 Azure DevOps Pipeline 以 python on Azure Functions 為例</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">彙整</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">九月 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">八月 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">七月 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">六月 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">五月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">四月 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">三月 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">二月 2024</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">一月 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">十二月 2023</a><span class="archive-list-count">2</span></li><span id='list_archives2' style='display:none'><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">十一月 2023</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">十月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">九月 2023</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">八月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">七月 2023</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">六月 2023</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">五月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">四月 2023</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">三月 2023</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">二月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">一月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">九月 2022</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">八月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">六月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">五月 2022</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">三月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">二月 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">6</span></li></span><span id=''></span><span onclick="var d=document.getElementById('list_archives2'); d.style.display===''?d.style='display:none':d.style=''">toggle...</span></ul>
    </div>
  </div>


  
    <a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-nd/3.0/tw/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/3.0/tw/88x31.png" />
</a>
  <br />
This work is licensed under a 
<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-nd/3.0/tw/">Creative Commons Attribution-NonCommercial-NoDerivs 3.0 Taiwan License</a>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤雲</h3>
    <div class="widget tagcloud">
      <a href="/tags/Net-Framework/" style="font-size: 14.67px;">.Net Framework</a> <a href="/tags/API/" style="font-size: 11.33px;">API</a> <a href="/tags/AWS/" style="font-size: 13.33px;">AWS</a> <a href="/tags/Agile/" style="font-size: 17.33px;">Agile</a> <a href="/tags/CI-CD/" style="font-size: 19.33px;">CI/CD</a> <a href="/tags/Cache/" style="font-size: 10px;">Cache</a> <a href="/tags/Coding-Standard/" style="font-size: 10px;">Coding Standard</a> <a href="/tags/Container/" style="font-size: 12px;">Container</a> <a href="/tags/Database/" style="font-size: 12.67px;">Database</a> <a href="/tags/Design-Pattern/" style="font-size: 10.67px;">Design Pattern</a> <a href="/tags/Docker/" style="font-size: 12px;">Docker</a> <a href="/tags/Entity-Framework/" style="font-size: 10.67px;">Entity Framework</a> <a href="/tags/Firebase/" style="font-size: 10px;">Firebase</a> <a href="/tags/Git/" style="font-size: 10.67px;">Git</a> <a href="/tags/Golang/" style="font-size: 11.33px;">Golang</a> <a href="/tags/Google/" style="font-size: 11.33px;">Google</a> <a href="/tags/GulpJs/" style="font-size: 10.67px;">GulpJs</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/Hexo/" style="font-size: 15.33px;">Hexo</a> <a href="/tags/IIS/" style="font-size: 10px;">IIS</a> <a href="/tags/IO/" style="font-size: 10px;">IO</a> <a href="/tags/Integrated-Testing/" style="font-size: 10px;">Integrated Testing</a> <a href="/tags/Jenkins/" style="font-size: 12px;">Jenkins</a> <a href="/tags/Kubernetes/" style="font-size: 10px;">Kubernetes</a> <a href="/tags/Linux/" style="font-size: 10.67px;">Linux</a> <a href="/tags/Mongodb/" style="font-size: 10px;">Mongodb</a> <a href="/tags/MsSQL/" style="font-size: 11.33px;">MsSQL</a> <a href="/tags/MsTest/" style="font-size: 10px;">MsTest</a> <a href="/tags/Mutation-Testing/" style="font-size: 10px;">Mutation Testing</a> <a href="/tags/Nodejs/" style="font-size: 15.33px;">Nodejs</a> <a href="/tags/OAuth/" style="font-size: 10px;">OAuth</a> <a href="/tags/OOP/" style="font-size: 11.33px;">OOP</a> <a href="/tags/Openshift/" style="font-size: 10.67px;">Openshift</a> <a href="/tags/PowerShell/" style="font-size: 11.33px;">PowerShell</a> <a href="/tags/React/" style="font-size: 12px;">React</a> <a href="/tags/Redis/" style="font-size: 10.67px;">Redis</a> <a href="/tags/SQL/" style="font-size: 12px;">SQL</a> <a href="/tags/Scrum/" style="font-size: 16.67px;">Scrum</a> <a href="/tags/Shell/" style="font-size: 10.67px;">Shell</a> <a href="/tags/Specflow/" style="font-size: 10px;">Specflow</a> <a href="/tags/StyleCop/" style="font-size: 10px;">StyleCop</a> <a href="/tags/TDD/" style="font-size: 16px;">TDD</a> <a href="/tags/Testing/" style="font-size: 14px;">Testing</a> <a href="/tags/Thread/" style="font-size: 10.67px;">Thread</a> <a href="/tags/Trello/" style="font-size: 10px;">Trello</a> <a href="/tags/TypeScript/" style="font-size: 13.33px;">TypeScript</a> <a href="/tags/Unit-Testing/" style="font-size: 18.67px;">Unit Testing</a> <a href="/tags/Unix/" style="font-size: 10.67px;">Unix</a> <a href="/tags/Vim/" style="font-size: 10px;">Vim</a> <a href="/tags/Visual-Studio/" style="font-size: 10px;">Visual Studio</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/post/" style="font-size: 10px;">post</a> <a href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" style="font-size: 10.67px;">學習筆記</a> <a href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" style="font-size: 20px;">實作筆記</a> <a href="/tags/%E6%99%82%E9%96%93%E7%AE%A1%E7%90%86/" style="font-size: 10.67px;">時間管理</a> <a href="/tags/%E6%B4%BB%E5%8B%95%E7%AD%86%E8%A8%98/" style="font-size: 12.67px;">活動筆記</a> <a href="/tags/%E7%94%9F%E6%B4%BB%E7%AD%86%E8%A8%98/" style="font-size: 16px;">生活筆記</a> <a href="/tags/%E8%A8%98%E9%8C%84/" style="font-size: 11.33px;">記錄</a> <a href="/tags/%E8%B8%A9%E9%9B%B7%E7%AD%86%E8%A8%98/" style="font-size: 14.67px;">踩雷筆記</a> <a href="/tags/%E9%87%8D%E6%A7%8B/" style="font-size: 12px;">重構</a> <a href="/tags/%E9%96%B1%E8%AE%80%E7%AD%86%E8%A8%98/" style="font-size: 18px;">閱讀筆記</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Net-Framework/" rel="tag">.Net Framework</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/API/" rel="tag">API</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AWS/" rel="tag">AWS</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Agile/" rel="tag">Agile</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI-CD/" rel="tag">CI&#x2F;CD</a><span class="tag-list-count">24</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cache/" rel="tag">Cache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Coding-Standard/" rel="tag">Coding Standard</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Container/" rel="tag">Container</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Database/" rel="tag">Database</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design-Pattern/" rel="tag">Design Pattern</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Entity-Framework/" rel="tag">Entity Framework</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Firebase/" rel="tag">Firebase</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Golang/" rel="tag">Golang</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Google/" rel="tag">Google</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GulpJs/" rel="tag">GulpJs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IIS/" rel="tag">IIS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO/" rel="tag">IO</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Integrated-Testing/" rel="tag">Integrated Testing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jenkins/" rel="tag">Jenkins</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kubernetes/" rel="tag">Kubernetes</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mongodb/" rel="tag">Mongodb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MsSQL/" rel="tag">MsSQL</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MsTest/" rel="tag">MsTest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mutation-Testing/" rel="tag">Mutation Testing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nodejs/" rel="tag">Nodejs</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OAuth/" rel="tag">OAuth</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OOP/" rel="tag">OOP</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Openshift/" rel="tag">Openshift</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PowerShell/" rel="tag">PowerShell</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/" rel="tag">SQL</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scrum/" rel="tag">Scrum</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/" rel="tag">Shell</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Specflow/" rel="tag">Specflow</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/StyleCop/" rel="tag">StyleCop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TDD/" rel="tag">TDD</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Testing/" rel="tag">Testing</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thread/" rel="tag">Thread</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Trello/" rel="tag">Trello</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/" rel="tag">TypeScript</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unit-Testing/" rel="tag">Unit Testing</a><span class="tag-list-count">19</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unix/" rel="tag">Unix</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vim/" rel="tag">Vim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Visual-Studio/" rel="tag">Visual Studio</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/" rel="tag">html</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/post/" rel="tag">post</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98/" rel="tag">學習筆記</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AF%A6%E4%BD%9C%E7%AD%86%E8%A8%98/" rel="tag">實作筆記</a><span class="tag-list-count">113</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%99%82%E9%96%93%E7%AE%A1%E7%90%86/" rel="tag">時間管理</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B4%BB%E5%8B%95%E7%AD%86%E8%A8%98/" rel="tag">活動筆記</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E7%AD%86%E8%A8%98/" rel="tag">生活筆記</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A8%98%E9%8C%84/" rel="tag">記錄</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B8%A9%E9%9B%B7%E7%AD%86%E8%A8%98/" rel="tag">踩雷筆記</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%87%8D%E6%A7%8B/" rel="tag">重構</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%96%B1%E8%AE%80%E7%AD%86%E8%A8%98/" rel="tag">閱讀筆記</a><span class="tag-list-count">15</span></li></ul>
    </div>
  </div>


  
    

  
    <div class="widget-wrap">
    <h3 class="widget-title">多語系</h3>
    <div class="widget">
        <div id="ytWidget"></div>
    </div>
</div>
<script src="https://translate.yandex.net/website-widget/v1/widget.js?widgetId=ytWidget&pageLang=zh&widgetTheme=dark&autoMode=false" type="text/javascript"></script>
  
    <div class="widget-wrap">
    <h3 class="widget-title">BADGES</h3>
    <div class="widget">
        <a target="_blank" rel="noopener" href="https://bcert.me/bc/html/show-badge.html?b=uufxvngl">
            <img src="/images/2018/csm/seal-csm.png" alt="Certified ScrumMaster®">
        </a>
    </div>
</div>
  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2024 Marsen L.<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

  
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css">

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>



<script src="/js/sayings.js?v=0.js"></script>
  

<script src="/js/script.js?v=0.js"></script>

<div id="likecoin">
Please enable JavaScript to view the LikeCoin. :P
</div>
<script>

  (function(){
    var ifrm = document.createElement("iframe");
    ifrm.setAttribute("src", "https://button.like.co/in/embed/marsenlin/button?referrer=undefined");      
    ifrm.setAttribute("sandbox","allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox");
    ifrm.frameborder = "0";
    ifrm.scrolling = "no";
    (document.getElementById("likecoin").replaceChild(ifrm, document.getElementById("likecoin").childNodes[0]));
  })();

</script>
<script>

  var disqus_shortname = 'marsenlin';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();

</script>

  </div>
    
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NTDGNJZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

</body>
</html>